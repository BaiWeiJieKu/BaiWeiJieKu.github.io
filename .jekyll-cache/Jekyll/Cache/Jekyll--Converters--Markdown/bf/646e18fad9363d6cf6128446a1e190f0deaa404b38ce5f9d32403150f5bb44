I"ğ¼<ul id="markdown-toc">
  <li><a href="#session" id="markdown-toc-session">Session</a>    <ul>
      <li><a href="#ç¼“å­˜" id="markdown-toc-ç¼“å­˜">ç¼“å­˜</a></li>
    </ul>
  </li>
  <li><a href="#éš”ç¦»çº§åˆ«" id="markdown-toc-éš”ç¦»çº§åˆ«">éš”ç¦»çº§åˆ«</a></li>
  <li><a href="#å¯¹è±¡çŠ¶æ€" id="markdown-toc-å¯¹è±¡çŠ¶æ€">å¯¹è±¡çŠ¶æ€</a>    <ul>
      <li><a href="#ä¸´æ—¶å¯¹è±¡" id="markdown-toc-ä¸´æ—¶å¯¹è±¡">ä¸´æ—¶å¯¹è±¡</a></li>
      <li><a href="#æŒä¹…å¯¹è±¡" id="markdown-toc-æŒä¹…å¯¹è±¡">æŒä¹…å¯¹è±¡</a></li>
      <li><a href="#åˆ é™¤å¯¹è±¡" id="markdown-toc-åˆ é™¤å¯¹è±¡">åˆ é™¤å¯¹è±¡</a></li>
      <li><a href="#æ¸¸ç¦»å¯¹è±¡" id="markdown-toc-æ¸¸ç¦»å¯¹è±¡">æ¸¸ç¦»å¯¹è±¡</a></li>
    </ul>
  </li>
  <li><a href="#å•å‘å¤šå¯¹ä¸€" id="markdown-toc-å•å‘å¤šå¯¹ä¸€">å•å‘å¤šå¯¹ä¸€</a></li>
  <li><a href="#åŒå‘ä¸€å¯¹å¤š" id="markdown-toc-åŒå‘ä¸€å¯¹å¤š">åŒå‘ä¸€å¯¹å¤š</a></li>
  <li><a href="#å•å‘ä¸€å¯¹ä¸€" id="markdown-toc-å•å‘ä¸€å¯¹ä¸€">å•å‘ä¸€å¯¹ä¸€</a>    <ul>
      <li><a href="#åŸºäºå¤–é”®" id="markdown-toc-åŸºäºå¤–é”®">åŸºäºå¤–é”®</a></li>
      <li><a href="#åŸºäºä¸»é”®æ˜ å°„" id="markdown-toc-åŸºäºä¸»é”®æ˜ å°„">åŸºäºä¸»é”®æ˜ å°„</a></li>
    </ul>
  </li>
  <li><a href="#åŒå‘ä¸€å¯¹ä¸€" id="markdown-toc-åŒå‘ä¸€å¯¹ä¸€">åŒå‘ä¸€å¯¹ä¸€</a>    <ul>
      <li><a href="#åŸºäºä¸»é”®" id="markdown-toc-åŸºäºä¸»é”®">åŸºäºä¸»é”®</a></li>
      <li><a href="#åŸºäºå¤–é”®-1" id="markdown-toc-åŸºäºå¤–é”®-1">åŸºäºå¤–é”®</a></li>
    </ul>
  </li>
  <li><a href="#å•å‘ä¸€å¯¹å¤š" id="markdown-toc-å•å‘ä¸€å¯¹å¤š">å•å‘ä¸€å¯¹å¤š</a></li>
  <li><a href="#å•å‘å¤šå¯¹å¤š" id="markdown-toc-å•å‘å¤šå¯¹å¤š">å•å‘å¤šå¯¹å¤š</a></li>
  <li><a href="#åŒå‘å¤šå¯¹å¤š" id="markdown-toc-åŒå‘å¤šå¯¹å¤š">åŒå‘å¤šå¯¹å¤š</a></li>
</ul>
<h3 id="session">Session</h3>

<ul>
  <li>Session æ¥å£æ˜¯ Hibernate å‘åº”ç”¨ç¨‹åºæä¾›çš„æ“çºµæ•°æ®åº“çš„æœ€ä¸»è¦çš„æ¥å£, å®ƒæä¾›äº†åŸºæœ¬çš„ä¿å­˜, æ›´æ–°, åˆ é™¤å’ŒåŠ è½½ Java å¯¹è±¡çš„æ–¹æ³•</li>
  <li>Session å…·æœ‰ä¸€ä¸ªç¼“å­˜, ä½äºç¼“å­˜ä¸­çš„å¯¹è±¡ç§°ä¸ºæŒä¹…åŒ–å¯¹è±¡, å®ƒå’Œæ•°æ®åº“ä¸­çš„ç›¸å…³è®°å½•å¯¹åº”</li>
  <li>Session èƒ½å¤Ÿåœ¨æŸäº›æ—¶é—´ç‚¹, æŒ‰ç…§ç¼“å­˜ä¸­å¯¹è±¡çš„å˜åŒ–æ¥æ‰§è¡Œç›¸å…³çš„ SQL è¯­å¥, æ¥åŒæ­¥æ›´æ–°æ•°æ®åº“, è¿™ä¸€è¿‡ç¨‹è¢«ç§°ä¸ºåˆ·æ–°ç¼“å­˜(flush)</li>
  <li>ç«™åœ¨æŒä¹…åŒ–çš„è§’åº¦, Hibernate æŠŠå¯¹è±¡åˆ†ä¸º 4 ç§çŠ¶æ€: <strong>æŒä¹…åŒ–çŠ¶æ€, ä¸´æ—¶çŠ¶æ€, æ¸¸ç¦»çŠ¶æ€, åˆ é™¤çŠ¶æ€</strong></li>
  <li>Session çš„ç‰¹å®šæ–¹æ³•èƒ½ä½¿å¯¹è±¡ä»ä¸€ä¸ªçŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ä¸ªçŠ¶æ€</li>
</ul>

<h4 id="ç¼“å­˜">ç¼“å­˜</h4>

<ul>
  <li>åœ¨ Session æ¥å£çš„å®ç°ä¸­åŒ…å«ä¸€ç³»åˆ—çš„ Java é›†åˆ, è¿™äº› Java é›†åˆæ„æˆäº† Session ç¼“å­˜</li>
  <li>åªè¦ Session å®ä¾‹æ²¡æœ‰ç»“æŸç”Ÿå‘½å‘¨æœŸ, ä¸”æ²¡æœ‰æ¸…ç†ç¼“å­˜ï¼Œåˆ™å­˜æ”¾åœ¨å®ƒç¼“å­˜ä¸­çš„å¯¹è±¡ä¹Ÿä¸ä¼šç»“æŸç”Ÿå‘½å‘¨æœŸ</li>
  <li>Session ç¼“å­˜å¯å‡å°‘ Hibernate åº”ç”¨ç¨‹åºè®¿é—®æ•°æ®åº“çš„é¢‘ç‡</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">Sessionç¼“å­˜ï¼ˆæŒä¹…åŒ–å¯¹è±¡ï¼‰---------flush()----------&gt;æ•°æ®åº“ï¼ˆè®°å½•ï¼‰</span>
<span class="err">æ•°æ®åº“ï¼ˆè®°å½•ï¼‰-------------------reflesh()--------&gt;Sessionç¼“å­˜ï¼ˆæŒä¹…åŒ–å¯¹è±¡ï¼‰</span>
<span class="err">Sessionç¼“å­˜ï¼ˆæŒä¹…åŒ–å¯¹è±¡ï¼‰--------clear()-----------&gt;Sessionç¼“å­˜ï¼ˆç©ºï¼‰</span>
</code></pre></div></div>

<ul>
  <li>flushï¼šSession æŒ‰ç…§ç¼“å­˜ä¸­å¯¹è±¡çš„å±æ€§å˜åŒ–æ¥åŒæ­¥æ›´æ–°æ•°æ®åº“</li>
  <li>flush ç¼“å­˜çš„ä¾‹å¤–æƒ…å†µ: å¦‚æœå¯¹è±¡ä½¿ç”¨ native ç”Ÿæˆå™¨ç”Ÿæˆ OID, é‚£ä¹ˆå½“è°ƒç”¨ Session çš„ save() æ–¹æ³•ä¿å­˜å¯¹è±¡æ—¶, ä¼šç«‹å³æ‰§è¡Œå‘æ•°æ®åº“æ’å…¥è¯¥å®ä½“çš„ insert è¯­å¥</li>
  <li>commit() å’Œ flush() æ–¹æ³•çš„åŒºåˆ«ï¼šflush æ‰§è¡Œä¸€ç³»åˆ— sql è¯­å¥ï¼Œä½†ä¸æäº¤äº‹åŠ¡ï¼›commit æ–¹æ³•å…ˆè°ƒç”¨flush() æ–¹æ³•ï¼Œç„¶åæäº¤äº‹åŠ¡. æ„å‘³ç€æäº¤äº‹åŠ¡æ„å‘³ç€å¯¹æ•°æ®åº“æ“ä½œæ°¸ä¹…ä¿å­˜ä¸‹æ¥</li>
  <li>
    <p>è‹¥å¸Œæœ›æ”¹å˜ flush çš„é»˜è®¤æ—¶é—´ç‚¹, å¯ä»¥é€šè¿‡ Session çš„ setFlushMode() æ–¹æ³•æ˜¾å¼è®¾å®š flush çš„æ—¶é—´ç‚¹</p>
  </li>
  <li>é»˜è®¤æƒ…å†µä¸‹ Session åœ¨ä»¥ä¸‹æ—¶é—´ç‚¹åˆ·æ–°ç¼“å­˜ï¼š</li>
  <li>æ˜¾å¼è°ƒç”¨ Session çš„ flush() æ–¹æ³•</li>
  <li>å½“åº”ç”¨ç¨‹åºè°ƒç”¨ Transaction çš„ commitï¼ˆï¼‰æ–¹æ³•çš„æ—¶, è¯¥æ–¹æ³•å…ˆ flush ï¼Œç„¶ååœ¨å‘æ•°æ®åº“æäº¤äº‹åŠ¡</li>
  <li>å½“åº”ç”¨ç¨‹åºæ‰§è¡Œä¸€äº›æŸ¥è¯¢(HQL, Criteria)æ“ä½œæ—¶ï¼Œå¦‚æœç¼“å­˜ä¸­æŒä¹…åŒ–å¯¹è±¡çš„å±æ€§å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œä¼šå…ˆ flush ç¼“å­˜ï¼Œä»¥ä¿è¯æŸ¥è¯¢ç»“æœèƒ½å¤Ÿåæ˜ æŒä¹…åŒ–å¯¹è±¡çš„æœ€æ–°çŠ¶æ€</li>
</ul>

<h3 id="éš”ç¦»çº§åˆ«">éš”ç¦»çº§åˆ«</h3>

<ul>
  <li>ä¸€ä¸ªäº‹åŠ¡ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»çš„ç¨‹åº¦ç§°ä¸ºéš”ç¦»çº§åˆ«</li>
  <li>
    <p>éš”ç¦»çº§åˆ«è¶Šé«˜, æ•°æ®ä¸€è‡´æ€§å°±è¶Šå¥½, ä½†å¹¶å‘æ€§è¶Šå¼±</p>
  </li>
  <li>
    <p>å¯¹äºåŒæ—¶è¿è¡Œçš„å¤šä¸ªäº‹åŠ¡, å½“è¿™äº›äº‹åŠ¡è®¿é—®æ•°æ®åº“ä¸­ç›¸åŒçš„æ•°æ®æ—¶, å¦‚æœæ²¡æœ‰é‡‡å–å¿…è¦çš„éš”ç¦»æœºåˆ¶, å°±ä¼šå¯¼è‡´å„ç§å¹¶å‘é—®é¢˜</p>
  </li>
  <li>
    <p><strong>è„è¯»</strong>ï¼Œ<strong>ä¸å¯é‡å¤è¯»</strong>ï¼Œ<strong>å¹»è¯»</strong></p>
  </li>
  <li>
    <p>æ•°æ®åº“äº‹åŠ¡çš„éš”ç¦»æ€§: æ•°æ®åº“ç³»ç»Ÿå¿…é¡»å…·æœ‰éš”ç¦»å¹¶å‘è¿è¡Œå„ä¸ªäº‹åŠ¡çš„èƒ½åŠ›, ä½¿å®ƒä»¬ä¸ä¼šç›¸äº’å½±å“, é¿å…å„ç§å¹¶å‘é—®é¢˜</p>
  </li>
  <li>
    <p>Mysql æ”¯æŒ 4 ä¸­äº‹åŠ¡éš”ç¦»çº§åˆ«. Mysql é»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸º: REPEATABLE READ</p>

    <p>Hibernate é€šè¿‡ä¸º Hibernate æ˜ å°„æ–‡ä»¶æŒ‡å®š hibernate.connection.isolation å±æ€§æ¥è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼ˆ1. READ UNCOMMITEDï¼›2. READ COMMITEDï¼›4. REPEATABLE READï¼›8. SERIALIZEABLEï¼‰</p>
  </li>
</ul>

<h3 id="å¯¹è±¡çŠ¶æ€">å¯¹è±¡çŠ¶æ€</h3>

<h4 id="ä¸´æ—¶å¯¹è±¡">ä¸´æ—¶å¯¹è±¡</h4>

<ul>
  <li>åœ¨ä½¿ç”¨ä»£ç†ä¸»é”®çš„æƒ…å†µä¸‹, OID é€šå¸¸ä¸º null</li>
  <li>ä¸å¤„äº Session çš„ç¼“å­˜ä¸­</li>
  <li>åœ¨æ•°æ®åº“ä¸­æ²¡æœ‰å¯¹åº”çš„è®°å½•</li>
</ul>

<h4 id="æŒä¹…å¯¹è±¡">æŒä¹…å¯¹è±¡</h4>

<ul>
  <li>OID ä¸ä¸º null</li>
  <li>ä½äº Session ç¼“å­˜ä¸­</li>
  <li>è‹¥åœ¨æ•°æ®åº“ä¸­å·²ç»æœ‰å’Œå…¶å¯¹åº”çš„è®°å½•, æŒä¹…åŒ–å¯¹è±¡å’Œæ•°æ®åº“ä¸­çš„ç›¸å…³è®°å½•å¯¹åº”</li>
  <li>Session åœ¨ flush ç¼“å­˜æ—¶, ä¼šæ ¹æ®æŒä¹…åŒ–å¯¹è±¡çš„å±æ€§å˜åŒ–, æ¥åŒæ­¥æ›´æ–°æ•°æ®åº“</li>
  <li>åœ¨åŒä¸€ä¸ª Session å®ä¾‹çš„ç¼“å­˜ä¸­, æ•°æ®åº“è¡¨ä¸­çš„æ¯æ¡è®°å½•åªå¯¹åº”å”¯ä¸€çš„æŒä¹…åŒ–å¯¹è±¡</li>
</ul>

<h4 id="åˆ é™¤å¯¹è±¡">åˆ é™¤å¯¹è±¡</h4>

<ul>
  <li>åœ¨æ•°æ®åº“ä¸­æ²¡æœ‰å’Œå…¶ OID å¯¹åº”çš„è®°å½•</li>
  <li>ä¸å†å¤„äº Session ç¼“å­˜ä¸­</li>
  <li>ä¸€èˆ¬æƒ…å†µä¸‹, åº”ç”¨ç¨‹åºä¸è¯¥å†ä½¿ç”¨è¢«åˆ é™¤çš„å¯¹è±¡</li>
</ul>

<h4 id="æ¸¸ç¦»å¯¹è±¡">æ¸¸ç¦»å¯¹è±¡</h4>

<ul>
  <li>OID ä¸ä¸º null</li>
  <li>ä¸å†å¤„äº Session ç¼“å­˜ä¸­</li>
  <li>ä¸€èˆ¬æƒ…å†µéœ€ä¸‹, æ¸¸ç¦»å¯¹è±¡æ˜¯ç”±æŒä¹…åŒ–å¯¹è±¡è½¬å˜è¿‡æ¥çš„, å› æ­¤åœ¨æ•°æ®åº“ä¸­å¯èƒ½è¿˜å­˜åœ¨ä¸å®ƒå¯¹åº”çš„è®°å½•</li>
</ul>

<h3 id="å•å‘å¤šå¯¹ä¸€">å•å‘å¤šå¯¹ä¸€</h3>

<ul>
  <li>å•å‘ n-1 å…³è”åªéœ€ä» n çš„ä¸€ç«¯å¯ä»¥è®¿é—® 1 çš„ä¸€ç«¯</li>
  <li>åœ¨Order ç±»ä¸­å®šä¹‰ä¸€ä¸ª Customer å±æ€§, è€Œåœ¨ Customer ç±»ä¸­æ— éœ€å®šä¹‰å­˜æ”¾ Order å¯¹è±¡çš„é›†åˆå±æ€§</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;many-to-one&gt; </code><strong>å…ƒç´ æ¥æ˜ å°„ç»„æˆå…³ç³»</strong></li>
  <li><strong>name:</strong> <strong>è®¾å®šå¾…æ˜ å°„çš„æŒä¹…åŒ–ç±»çš„å±æ€§çš„åå­—</strong></li>
  <li><strong>column:</strong> <strong>è®¾å®šå’ŒæŒä¹…åŒ–ç±»çš„å±æ€§å¯¹åº”çš„è¡¨çš„å¤–é”®</strong></li>
  <li><strong>class</strong>ï¼šè®¾å®šå¾…æ˜ å°„çš„æŒä¹…åŒ–ç±»çš„å±æ€§çš„ç±»å‹</li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;many-to-one</span>
	<span class="na">name=</span><span class="s">"customer"</span>
	<span class="na">class=</span><span class="s">"Customer"</span>
	<span class="na">column=</span><span class="s">"CUSTOMER_ID"</span>
	<span class="na">not-null=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<ul>
  <li>userè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">userid</span> <span class="err">int(11)</span> <span class="err">notnull</span> <span class="err">primarykey</span> <span class="err">ä¸»é”®</span>
<span class="err">name</span> <span class="err">varchar</span> <span class="err">cannull</span> 
<span class="err">password</span> <span class="err">varchar</span> <span class="err">cannull</span>
<span class="err">address_id</span> <span class="err">int</span> <span class="err">cannull</span> <span class="err">mul</span>
</code></pre></div></div>

<ul>
  <li>addressè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">addressid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span> <span class="err">ä¸»é”®</span>
<span class="err">addressinfo</span> <span class="err">varchar</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">userid</span><span class="o">;</span> 				<span class="c1">// Userç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 			<span class="c1">//nameå±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>			<span class="c1">//passwordå±æ€§</span>
	<span class="kd">private</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">;</span> 			<span class="c1">// Userç±»çš„å…³è”å®ä½“å±æ€§</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">()</span> <span class="o">{</span>                                                                   
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Userå±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="kt">int</span> <span class="n">userid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">password</span><span class="o">,</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">userid</span> <span class="o">=</span> <span class="n">userid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">// getterå’Œsetteræ–¹æ³•</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 20:36:01 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"User"</span> <span class="na">table=</span><span class="s">"USER"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"userid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USERID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"NAME"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"PASSWORD"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="c">&lt;!--ç”¨æ¥æ˜ å°„å¤šå¯¹ä¸€å…³è”å®ä½“ï¼Œcolumnå±æ€§æŒ‡å®šå¤–é”®åˆ—åˆ—å--&gt;</span>
       <span class="nt">&lt;many-to-one</span> <span class="na">name=</span><span class="s">"address"</span> <span class="na">class=</span><span class="s">"Address"</span> <span class="na">unique=</span><span class="s">"true"</span> <span class="na">fetch=</span><span class="s">"join"</span><span class="nt">&gt;</span>
       		<span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"address_id"</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;/many-to-one&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
<span class="c1">//Addressç±»çš„æ ‡è¯†å±æ€§</span>
<span class="kd">private</span> <span class="kt">int</span> <span class="n">addressid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Addresså±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//getterå’Œsetteræ–¹æ³•</span>

<span class="o">}</span>


</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 20:36:01 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"Address"</span> <span class="na">table=</span><span class="s">"ADDRESS"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"addressid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"addressinfo"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSINFO"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<h3 id="åŒå‘ä¸€å¯¹å¤š">åŒå‘ä¸€å¯¹å¤š</h3>

<ul>
  <li>åŒå‘ 1-n ä¸ åŒå‘ n-1 æ˜¯å®Œå…¨ç›¸åŒçš„ä¸¤ç§æƒ…å½¢</li>
  <li>åŒå‘ 1-n éœ€è¦åœ¨ 1 çš„ä¸€ç«¯å¯ä»¥è®¿é—® n çš„ä¸€ç«¯, åä¹‹ä¾ç„¶</li>
  <li>ä» Order åˆ° Customer çš„å¤šå¯¹ä¸€åŒå‘å…³è”éœ€è¦åœ¨Order ç±»ä¸­å®šä¹‰ä¸€ä¸ª Customer å±æ€§, è€Œåœ¨ Customer ç±»ä¸­éœ€å®šä¹‰å­˜æ”¾ Order å¯¹è±¡çš„é›†åˆå±æ€§</li>
  <li>å½“ Session ä»æ•°æ®åº“ä¸­åŠ è½½ Java é›†åˆæ—¶, åˆ›å»ºçš„æ˜¯ Hibernateå†…ç½®é›†åˆç±»çš„å®ä¾‹, å› æ­¤åœ¨æŒä¹…åŒ–ç±»ä¸­å®šä¹‰é›†åˆå±æ€§æ—¶å¿…é¡»æŠŠå±æ€§å£°æ˜ä¸ºJava æ¥å£ç±»å‹</li>
  <li>Hibernate ä½¿ç”¨<code class="language-plaintext highlighter-rouge"> &lt;set&gt; </code>å…ƒç´ æ¥æ˜ å°„ set ç±»å‹çš„å±æ€§</li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;set</span> <span class="na">name=</span><span class="s">"orders"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;key</span> <span class="na">column=</span><span class="s">"CUSTOMER_ID"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;one-to-many</span> <span class="na">class=</span><span class="s">"Order"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</code></pre></div></div>

<ul>
  <li>åœ¨hibernateä¸­é€šè¿‡å¯¹ inverse å±æ€§çš„æ¥å†³å®šæ˜¯ç”±åŒå‘å…³è”çš„å“ªä¸€æ–¹æ¥ç»´æŠ¤è¡¨å’Œè¡¨ä¹‹é—´çš„å…³ç³»</li>
  <li>inverse = false çš„ä¸ºä¸»åŠ¨æ–¹ï¼Œinverse = true çš„ä¸ºè¢«åŠ¨æ–¹</li>
  <li>ç”±ä¸»åŠ¨æ–¹è´Ÿè´£ç»´æŠ¤å…³è”å…³ç³»</li>
  <li>åœ¨æ²¡æœ‰è®¾ç½® inverse=true çš„æƒ…å†µä¸‹ï¼Œçˆ¶å­ä¸¤è¾¹éƒ½ç»´æŠ¤çˆ¶å­å…³ç³»</li>
  <li>
    <p>åœ¨ 1-n å…³ç³»ä¸­ï¼Œå°† n æ–¹è®¾ä¸ºä¸»æ§æ–¹å°†æœ‰åŠ©äºæ€§èƒ½æ”¹å–„</p>
  </li>
  <li>userè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">userid</span> <span class="err">int(11)</span> <span class="err">notnull</span> <span class="err">primarykey</span> <span class="err">ä¸»é”®</span>
<span class="err">name</span> <span class="err">varchar</span> <span class="err">cannull</span> 
<span class="err">password</span> <span class="err">varchar</span> <span class="err">cannull</span>
</code></pre></div></div>

<ul>
  <li>addressè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">addressid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span> <span class="err">ä¸»é”®</span>
<span class="err">addressinfo</span> <span class="err">varchar</span>
<span class="err">user_id</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">mul</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.HashSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Set</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">userid</span><span class="o">;</span> 											<span class="c1">// Userç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 											<span class="c1">//nameå±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>										<span class="c1">//passwordå±æ€§</span>
	<span class="kd">private</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Address</span><span class="o">&gt;</span> <span class="n">addresses</span><span class="o">=</span><span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;</span><span class="nc">Address</span><span class="o">&gt;();</span> 			<span class="c1">// Userç±»çš„å…³è”å®ä½“å±æ€§</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">()</span> <span class="o">{</span>                                                                   
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Userå±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="kt">int</span> <span class="n">userid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">password</span><span class="o">,</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">userid</span> <span class="o">=</span> <span class="n">userid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//getterå’Œsetteræ–¹æ³•</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-11-3 10:29:42 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"User"</span> <span class="na">table=</span><span class="s">"USER"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"userid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USERID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"NAME"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"PASSWORD"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="c">&lt;!--æ˜ å°„é›†åˆå±æ€§ï¼Œå…³è”åˆ°æŒä¹…åŒ–ç±»ã€‚ç”±Addressä¸€æ–¹æ§åˆ¶å…³è”å…³ç³»--&gt;</span>
        <span class="nt">&lt;set</span> <span class="na">name=</span><span class="s">"addresses"</span> <span class="na">table=</span><span class="s">"ADDRESS"</span> <span class="na">inverse=</span><span class="s">"true"</span> <span class="na">lazy=</span><span class="s">"true"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;key&gt;</span>
                <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USER_ID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/key&gt;</span>
            <span class="nt">&lt;one-to-many</span> <span class="na">class=</span><span class="s">"Address"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/set&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
<span class="c1">//Addressç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">addressid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">User</span> <span class="n">user</span><span class="o">;</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Addresså±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//getterå’Œsetteræ–¹æ³•</span>

<span class="o">}</span>


</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-11-3 10:29:42 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"Address"</span> <span class="na">table=</span><span class="s">"ADDRESS"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"addressid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"addressinfo"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSINFO"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;many-to-one</span> <span class="na">name=</span><span class="s">"user"</span> <span class="na">class=</span><span class="s">"User"</span> <span class="na">fetch=</span><span class="s">"join"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USER_ID"</span> <span class="na">not-null=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/many-to-one&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<h3 id="å•å‘ä¸€å¯¹ä¸€">å•å‘ä¸€å¯¹ä¸€</h3>

<h4 id="åŸºäºå¤–é”®">åŸºäºå¤–é”®</h4>

<ul>
  <li>å¯¹äºåŸºäºå¤–é”®çš„1-1å…³è”ï¼Œå…¶å¤–é”®å¯ä»¥å­˜æ”¾åœ¨ä»»æ„ä¸€è¾¹ï¼Œæ¯”å¦‚ä¸€ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªåœ°å€</li>
  <li>åœ¨éœ€è¦å­˜æ”¾å¤–é”®ä¸€ç«¯ï¼Œå¢åŠ many-to-oneå…ƒç´ </li>
  <li>ä¸ºmany-to-oneå…ƒç´ å¢åŠ unique=â€œtrueâ€ å±æ€§æ¥è¡¨ç¤ºä¸º1-1å…³è”</li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;many-to-one</span> 
	<span class="na">name=</span><span class="s">"manager"</span> 
	<span class="na">class=</span><span class="s">"Manager"</span> 
	<span class="na">column=</span><span class="s">"MANAGER_ID"</span>
	<span class="na">cascade=</span><span class="s">"all"</span>
	<span class="na">unique=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<ul>
  <li>å¦ä¸€ç«¯éœ€è¦ä½¿ç”¨one-to-oneå…ƒç´ ï¼Œè¯¥å…ƒç´ ä½¿ç”¨ <strong>property-ref</strong> å±æ€§æŒ‡å®šä½¿ç”¨è¢«å…³è”å®ä½“ä¸»é”®ä»¥å¤–çš„å­—æ®µä½œä¸ºå…³è”å­—æ®µ</li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;one-to-one</span>
	<span class="na">name=</span><span class="s">"dept"</span>
	<span class="na">class=</span><span class="s">"Department"</span>
	<span class="na">property-ref=</span><span class="s">"manager"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<ul>
  <li>userè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">userid</span> <span class="err">int(11)</span> <span class="err">notnull</span> <span class="err">primarykey</span> <span class="err">ä¸»é”®</span>
<span class="err">name</span> <span class="err">varchar</span> <span class="err">cannull</span> 
<span class="err">password</span> <span class="err">varchar</span> <span class="err">cannull</span>
<span class="err">address_id</span> <span class="err">int</span> <span class="err">cannull</span> <span class="err">mul</span>
</code></pre></div></div>

<ul>
  <li>addressè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">addressid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span> <span class="err">ä¸»é”®</span>
<span class="err">addressinfo</span> <span class="err">varchar</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">userid</span><span class="o">;</span> 				<span class="c1">// Userç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 			<span class="c1">//nameå±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>			<span class="c1">//passwordå±æ€§</span>
	<span class="kd">private</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">;</span> 			<span class="c1">// Userç±»çš„å…³è”å®ä½“å±æ€§</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">()</span> <span class="o">{</span>                                                                   
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Userå±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="kt">int</span> <span class="n">userid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">password</span><span class="o">,</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">userid</span> <span class="o">=</span> <span class="n">userid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">// getterå’Œsetteræ–¹æ³•</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 20:36:01 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"User"</span> <span class="na">table=</span><span class="s">"USER"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"userid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USERID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"NAME"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"PASSWORD"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="c">&lt;!--æ˜ å°„å…³è”å®ä½“Addressï¼Œå°†å…¶addresså±æ€§æ˜ å°„ä¸ºaddressè¡¨ä¸­çš„å¤–é”®address_id,uniqueæŒ‡å®šä¸ºä¸€å¯¹ä¸€æ˜ å°„--&gt;</span>
       <span class="nt">&lt;many-to-one</span> <span class="na">name=</span><span class="s">"address"</span> <span class="na">class=</span><span class="s">"Address"</span> <span class="na">unique=</span><span class="s">"true"</span><span class="nt">&gt;</span>
       		<span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESS_ID"</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;/many-to-one&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
	<span class="c1">//Addressç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">addressid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Addresså±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//Addresså±æ€§çš„getterå’Œsetteræ–¹æ³•</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getAddressid</span> <span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">addressid</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUseid</span><span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//addressinfoçš„getterå’Œsetteræ–¹æ³•</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getAddressinfo</span> <span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">.</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAddressinfo</span> <span class="o">(</span><span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span> <span class="n">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>


</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 20:36:01 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"Address"</span> <span class="na">table=</span><span class="s">"ADDRESS"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"addressid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"addressinfo"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSINFO"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<h4 id="åŸºäºä¸»é”®æ˜ å°„">åŸºäºä¸»é”®æ˜ å°„</h4>

<ul>
  <li>åŸºäºä¸»é”®çš„æ˜ å°„ç­–ç•¥:æŒ‡ä¸€ç«¯çš„ä¸»é”®ç”Ÿæˆå™¨ä½¿ç”¨ foreign ç­–ç•¥,è¡¨æ˜æ ¹æ®<strong>â€å¯¹æ–¹â€</strong>çš„ä¸»é”®æ¥ç”Ÿæˆè‡ªå·±çš„ä¸»é”®ï¼Œè‡ªå·±å¹¶ä¸èƒ½ç‹¬ç«‹ç”Ÿæˆä¸»é”®</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;param&gt;</code> å­å…ƒç´ æŒ‡å®šä½¿ç”¨å½“å‰æŒä¹…åŒ–ç±»çš„å“ªä¸ªå±æ€§ä½œä¸º <strong>â€œå¯¹æ–¹â€</strong></li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"id"</span> <span class="na">column=</span><span class="s">"ID"</span> <span class="na">type=</span><span class="s">"integer"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"foreign"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"property"</span><span class="nt">&gt;</span>manager<span class="nt">&lt;/param&gt;</span>
	<span class="nt">&lt;/generator&gt;</span>
<span class="nt">&lt;/id&gt;</span>
</code></pre></div></div>

<ul>
  <li>é‡‡ç”¨foreignä¸»é”®ç”Ÿæˆå™¨ç­–ç•¥çš„ä¸€ç«¯å¢åŠ  one-to-one å…ƒç´ æ˜ å°„å…³è”å±æ€§ï¼Œå…¶one-to-oneå±æ€§è¿˜åº”å¢åŠ  constrained=â€œtrueâ€ å±æ€§</li>
  <li>å¦ä¸€ç«¯å¢åŠ one-to-oneå…ƒç´ æ˜ å°„å…³è”å±æ€§</li>
  <li>constrained(çº¦æŸ):æŒ‡å®šä¸ºå½“å‰æŒä¹…åŒ–ç±»å¯¹åº”çš„æ•°æ®åº“è¡¨çš„ä¸»é”®æ·»åŠ ä¸€ä¸ªå¤–é”®çº¦æŸï¼Œå¼•ç”¨è¢«å…³è”çš„å¯¹è±¡(â€œå¯¹æ–¹â€)æ‰€å¯¹åº”çš„æ•°æ®åº“è¡¨ä¸»é”®</li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;one-to-one</span>
	<span class="na">name=</span><span class="s">"manager"</span>
	<span class="na">class=</span><span class="s">"Manager"</span>
	<span class="na">constrained=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<ul>
  <li>userè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">userid</span> <span class="err">int(11)</span> <span class="err">notnull</span> <span class="err">primarykey</span> <span class="err">ä¸»é”®</span>
<span class="err">name</span> <span class="err">varchar</span> <span class="err">cannull</span> 
<span class="err">password</span> <span class="err">varchar</span> <span class="err">cannull</span>
</code></pre></div></div>

<ul>
  <li>addressè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">addressid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span> <span class="err">ä¸»é”®</span>
<span class="err">addressinfo</span> <span class="err">varchar</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">userid</span><span class="o">;</span> 				<span class="c1">// Userç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 			<span class="c1">//nameå±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>			<span class="c1">//passwordå±æ€§</span>
	<span class="kd">private</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">;</span> 			<span class="c1">// Userç±»çš„å…³è”å®ä½“å±æ€§</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">()</span> <span class="o">{</span>                                                                   
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Userå±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="kt">int</span> <span class="n">userid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">password</span><span class="o">,</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">userid</span> <span class="o">=</span> <span class="n">userid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">// getterå’Œsetteræ–¹æ³•</span>
	
<span class="o">}</span>

</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 20:36:01 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"User"</span> <span class="na">table=</span><span class="s">"USER"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"userid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USERID"</span> <span class="nt">/&gt;</span>
            <span class="c">&lt;!--åŸºäºä¸»é”®å…³è”æ—¶ï¼Œå°†ä¸»é”®ç”Ÿæˆç­–ç•¥è®¾ç½®ä¸ºforeignï¼Œè¡¨æ˜ç”±å…³è”ç±»æ¥ç”Ÿæˆä¸»é”®ï¼Œå³ç›´æ¥ä½¿ç”¨å¦ä¸€ä¸ªå…³è”ç±»çš„ä¸»é”®å€¼ï¼Œè¯¥æŒä¹…ç±»æœ¬èº«ä¸èƒ½ç”Ÿæˆä¸»é”®--&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"foreign"</span><span class="nt">&gt;</span>
            	<span class="c">&lt;!--å…³è”æŒä¹…åŒ–ç±»çš„å±æ€§å--&gt;</span>
            	<span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"property"</span><span class="nt">&gt;</span>address<span class="nt">&lt;/param&gt;</span>
            <span class="nt">&lt;/generator&gt;</span>
            
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"NAME"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"PASSWORD"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="c">&lt;!--åŸºäºä¸»é”®çš„ä¸€å¯¹ä¸€å…³è”æ˜ å°„--&gt;</span>
        <span class="nt">&lt;one-to-one</span> <span class="na">name=</span><span class="s">"address"</span> <span class="na">class=</span><span class="s">"Address"</span> <span class="na">constrained=</span><span class="s">"true"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/one-to-one&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
<span class="c1">//Addressç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">addressid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Addresså±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//Addresså±æ€§çš„getterå’Œsetteræ–¹æ³•</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getAddressid</span> <span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">addressid</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUseid</span><span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//addressinfoçš„getterå’Œsetteræ–¹æ³•</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getAddressinfo</span> <span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">.</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAddressinfo</span> <span class="o">(</span><span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span> <span class="n">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>


</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 20:36:01 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"Address"</span> <span class="na">table=</span><span class="s">"ADDRESS"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"addressid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"addressinfo"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSINFO"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<h3 id="åŒå‘ä¸€å¯¹ä¸€">åŒå‘ä¸€å¯¹ä¸€</h3>

<h4 id="åŸºäºä¸»é”®">åŸºäºä¸»é”®</h4>

<ul>
  <li>userè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">userid</span> <span class="err">int(11)</span> <span class="err">notnull</span> <span class="err">primarykey</span> <span class="err">ä¸»é”®</span>
<span class="err">name</span> <span class="err">varchar</span> <span class="err">cannull</span> 
<span class="err">password</span> <span class="err">varchar</span> <span class="err">cannull</span>
</code></pre></div></div>

<ul>
  <li>addressè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">addressid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span> <span class="err">ä¸»é”®</span>
<span class="err">addressinfo</span> <span class="err">varchar</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">userid</span><span class="o">;</span> 				<span class="c1">// Userç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 			<span class="c1">//nameå±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>			<span class="c1">//passwordå±æ€§</span>
	<span class="kd">private</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">;</span> 			<span class="c1">// Userç±»çš„å…³è”å®ä½“å±æ€§</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">()</span> <span class="o">{</span>                                                                   
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Userå±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="kt">int</span> <span class="n">userid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">password</span><span class="o">,</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">userid</span> <span class="o">=</span> <span class="n">userid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//getterå’Œsetteræ–¹æ³•</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 20:36:01 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"User"</span> <span class="na">table=</span><span class="s">"USER"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"userid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USERID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span><span class="nt">/&gt;</span>  
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"NAME"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"PASSWORD"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="c">&lt;!--æ˜ å°„å…³è”å±æ€§address.cascade=allè¡¨ç¤ºçº§è”ä¿å­˜Userå¯¹è±¡å…³è”çš„Addresså¯¹è±¡--&gt;</span>
        <span class="nt">&lt;one-to-one</span> <span class="na">name=</span><span class="s">"address"</span> <span class="na">class=</span><span class="s">"Address"</span> <span class="na">cascade=</span><span class="s">"all"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/one-to-one&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
<span class="c1">//Addressç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">addressid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">User</span> <span class="n">user</span><span class="o">;</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Addresså±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//getterå’Œsetteræ–¹æ³•</span>
<span class="o">}</span>


</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 20:36:01 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"Address"</span> <span class="na">table=</span><span class="s">"ADDRESS"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"addressid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"foreign"</span><span class="nt">&gt;</span>
            	<span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"property"</span><span class="nt">&gt;</span>user<span class="nt">&lt;/param&gt;</span>
            <span class="nt">&lt;/generator&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"addressinfo"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSINFO"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="c">&lt;!--æ˜ å°„å…³è”å±æ€§userã€‚constrainedè¡¨ç¤ºåœ¨addressè¡¨ä¸­å­˜åœ¨ä¸€ä¸ªå¤–é”®çº¦æŸ--&gt;</span>
        <span class="nt">&lt;one-to-one</span> <span class="na">name=</span><span class="s">"user"</span> <span class="na">class=</span><span class="s">"User"</span> <span class="na">constrained=</span><span class="s">"true"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/one-to-one&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<h4 id="åŸºäºå¤–é”®-1">åŸºäºå¤–é”®</h4>

<ul>
  <li>userè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">userid</span> <span class="err">int(11)</span> <span class="err">notnull</span> <span class="err">primarykey</span> <span class="err">ä¸»é”®</span>
<span class="err">name</span> <span class="err">varchar</span> <span class="err">cannull</span> 
<span class="err">password</span> <span class="err">varchar</span> <span class="err">cannull</span>
</code></pre></div></div>

<ul>
  <li>addressè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">addressid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span> <span class="err">ä¸»é”®</span>
<span class="err">addressinfo</span> <span class="err">varchar</span>
<span class="err">user_id</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">mul</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">userid</span><span class="o">;</span> 				<span class="c1">// Userç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 			<span class="c1">//nameå±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>			<span class="c1">//passwordå±æ€§</span>
	<span class="kd">private</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">;</span> 			<span class="c1">// Userç±»çš„å…³è”å®ä½“å±æ€§</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">()</span> <span class="o">{</span>                                                                   
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Userå±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="kt">int</span> <span class="n">userid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">password</span><span class="o">,</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">userid</span> <span class="o">=</span> <span class="n">userid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//getterå’Œsetteræ–¹æ³•</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 20:36:01 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"User"</span> <span class="na">table=</span><span class="s">"USER"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"userid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USERID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span><span class="nt">/&gt;</span>  
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"NAME"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"PASSWORD"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="c">&lt;!--æ˜ å°„å…³è”å±æ€§addressã€‚åœ¨ä¿å­˜Userç±»çš„å¯¹è±¡æ—¶ï¼Œçº§è”ä¿å­˜è¯¥å¯¹è±¡æ‰€å…³è”çš„addresså¯¹è±¡--&gt;</span>
        <span class="nt">&lt;one-to-one</span> <span class="na">name=</span><span class="s">"address"</span> <span class="na">class=</span><span class="s">"Address"</span> <span class="na">cascade=</span><span class="s">"all"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/one-to-one&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
<span class="c1">//Addressç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">addressid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">User</span> <span class="n">user</span><span class="o">;</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Addresså±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//getterå’Œsetteræ–¹æ³•</span>

	
<span class="o">}</span>


</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 20:36:01 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"Address"</span> <span class="na">table=</span><span class="s">"ADDRESS"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"addressid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"addressinfo"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSINFO"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;many-to-one</span> <span class="na">name=</span><span class="s">"user"</span> <span class="na">class=</span><span class="s">"User"</span> <span class="na">fetch=</span><span class="s">"select"</span> <span class="na">unique=</span><span class="s">"true"</span><span class="nt">&gt;</span>
        	<span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USER_ID"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/many-to-one&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<h3 id="å•å‘ä¸€å¯¹å¤š">å•å‘ä¸€å¯¹å¤š</h3>

<ul>
  <li>userè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">userid</span> <span class="err">int(11)</span> <span class="err">notnull</span> <span class="err">primarykey</span> <span class="err">ä¸»é”®</span>
<span class="err">name</span> <span class="err">varchar</span> <span class="err">cannull</span> 
<span class="err">password</span> <span class="err">varchar</span> <span class="err">cannull</span>
</code></pre></div></div>

<ul>
  <li>addressè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">addressid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span> <span class="err">ä¸»é”®</span>
<span class="err">addressinfo</span> <span class="err">varchar</span>
<span class="err">user_id</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">mul</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.HashSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Set</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">userid</span><span class="o">;</span> 				<span class="c1">// Userç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 			<span class="c1">//nameå±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>			<span class="c1">//passwordå±æ€§</span>
	<span class="kd">private</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Address</span><span class="o">&gt;</span> <span class="n">addresses</span><span class="o">=</span><span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;</span><span class="nc">Address</span><span class="o">&gt;();</span> 				<span class="c1">// Userç±»çš„å…³è”å®ä½“å±æ€§</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">()</span> <span class="o">{</span>                                                                   
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Userå±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="kt">int</span> <span class="n">userid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">password</span><span class="o">,</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">userid</span> <span class="o">=</span> <span class="n">userid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//getterå’Œsetteræ–¹æ³•</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 23:57:50 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"User"</span> <span class="na">table=</span><span class="s">"USER"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"userid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USERID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"NAME"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"PASSWORD"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="c">&lt;!--æ˜ å°„é›†åˆå±æ€§ï¼Œinverseä¸ºfalseè¡¨ç¤ºç”±Useræ–¹æ¥ç»´æŠ¤å…³è”å…³ç³»ï¼Œä¸é‡‡ç”¨å»¶è¿ŸåŠ è½½--&gt;</span>
        <span class="nt">&lt;set</span> <span class="na">name=</span><span class="s">"addresses"</span> <span class="na">table=</span><span class="s">"ADDRESS"</span> <span class="na">inverse=</span><span class="s">"false"</span> <span class="na">lazy=</span><span class="s">"true"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;key&gt;</span>
            	<span class="c">&lt;!--ç¡®å®šå…³è”çš„å¤–é”®åˆ—--&gt;</span>
                <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USER_ID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/key&gt;</span>
            <span class="c">&lt;!--æ˜ å°„åˆ°å…³è”ç±»å±æ€§--&gt;</span>
            <span class="nt">&lt;one-to-many</span> <span class="na">class=</span><span class="s">"Address"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/set&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
<span class="c1">//Addressç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">addressid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Addresså±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//getterå’Œsetteræ–¹æ³•</span>
	
<span class="o">}</span>


</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 23:57:50 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"Address"</span> <span class="na">table=</span><span class="s">"ADDRESS"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"addressid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"addressinfo"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSINFO"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<h3 id="å•å‘å¤šå¯¹å¤š">å•å‘å¤šå¯¹å¤š</h3>

<ul>
  <li>å®ƒåˆ©ç”¨ä¸­é—´è¡¨å°†ä¸¤ä¸ªä¸»è¡¨å…³è”èµ·æ¥ã€‚</li>
  <li>ä¸­é—´è¡¨çš„ä½œç”¨æ˜¯å°†ä¸¤å¼ è¡¨çš„ä¸»é”®ä½œä¸ºå…¶å¤–é”®ï¼Œé€šè¿‡å¤–é”®å»ºç«‹è¿™ä¸¤å¼ è¡¨ä¹‹é—´çš„æ˜ å°„å…³ç³»</li>
  <li>æ¯”å¦‚å¤šä¸ªç”¨æˆ·Userå¯¹åº”å¤šä¸ªåœ°å€Address</li>
  <li>userè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">userid</span> <span class="err">int(11)</span> <span class="err">notnull</span> <span class="err">primarykey</span> <span class="err">ä¸»é”®</span>
<span class="err">name</span> <span class="err">varchar</span> <span class="err">cannull</span> 
<span class="err">password</span> <span class="err">varchar</span> <span class="err">cannull</span>
</code></pre></div></div>

<ul>
  <li>addressè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">addressid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span> <span class="err">ä¸»é”®</span>
<span class="err">addressinfo</span> <span class="err">varchar</span>
</code></pre></div></div>

<ul>
  <li>user_addressè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">addressid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span>
<span class="err">userid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.HashSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Set</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">userid</span><span class="o">;</span> 				<span class="c1">// Userç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 			<span class="c1">//nameå±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>			<span class="c1">//passwordå±æ€§</span>
	<span class="kd">private</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Address</span><span class="o">&gt;</span> <span class="n">addresses</span><span class="o">=</span><span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;</span><span class="nc">Address</span><span class="o">&gt;();</span> <span class="c1">// Userç±»çš„å…³è”å®ä½“å±æ€§</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">()</span> <span class="o">{</span>                                                                   
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Userå±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="kt">int</span> <span class="n">userid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">password</span><span class="o">,</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">userid</span> <span class="o">=</span> <span class="n">userid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//çœç•¥getå’Œset</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 23:57:50 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"User"</span> <span class="na">table=</span><span class="s">"USER"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"userid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USERID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"NAME"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"PASSWORD"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="c">&lt;!--æ˜ å°„é›†åˆå±æ€§ï¼ŒUSER_ADDRESSæ˜¯ä¸­é—´è¡¨åç§°ï¼Œç”±Userä¸€æ–¹æ¥ç»´æŠ¤å…³è”å…³ç³»ï¼Œä¸é‡‡ç”¨å»¶è¿ŸåŠ è½½--&gt;</span>
        <span class="nt">&lt;set</span> <span class="na">name=</span><span class="s">"addresses"</span> <span class="na">table=</span><span class="s">"USER_ADDRESS"</span> <span class="na">inverse=</span><span class="s">"false"</span> <span class="na">lazy=</span><span class="s">"true"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;key&gt;</span>
                <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USERID"</span> <span class="nt">/&gt;</span><span class="c">&lt;!--æŒ‡å®šUSERè¡¨å…³è”åˆ°ä¸­é—´è¡¨çš„å¤–é”®åˆ—å--&gt;</span>
            <span class="nt">&lt;/key&gt;</span>
            <span class="c">&lt;!--æŒ‡å®šå…³è”USERè¡¨çš„Addresså¯¹è±¡çš„ä¸»é”®åœ¨è¿æ¥è¡¨ä¸­çš„åˆ—å--&gt;</span>
            <span class="nt">&lt;many-to-many</span> <span class="na">class=</span><span class="s">"Address"</span> <span class="na">column=</span><span class="s">"ADDRESSID"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/set&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
<span class="c1">//Addressç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">addressid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Addresså±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//Addresså±æ€§çš„getterå’Œsetteræ–¹æ³•</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getAddressid</span> <span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">addressid</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUseid</span><span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//addressinfoçš„getterå’Œsetteræ–¹æ³•</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getAddressinfo</span> <span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">.</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAddressinfo</span> <span class="o">(</span><span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span> <span class="n">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>


</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 23:57:50 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"Address"</span> <span class="na">table=</span><span class="s">"ADDRESS"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"addressid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"addressinfo"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSINFO"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<h3 id="åŒå‘å¤šå¯¹å¤š">åŒå‘å¤šå¯¹å¤š</h3>

<ul>
  <li>åŒå‘ n-n å…³è”éœ€è¦ä¸¤ç«¯éƒ½ä½¿ç”¨é›†åˆå±æ€§</li>
  <li>åŒå‘n-nå…³è”<strong>å¿…é¡»ä½¿ç”¨è¿æ¥è¡¨</strong></li>
  <li>é›†åˆå±æ€§åº”å¢åŠ  key å­å…ƒç´ ç”¨ä»¥æ˜ å°„å¤–é”®åˆ—, é›†åˆå…ƒç´ é‡Œè¿˜åº”å¢åŠ many-to-manyå­å…ƒç´ å…³è”å®ä½“ç±»</li>
  <li>
    <p>å¯¹äºåŒå‘ n-n å…³è”, å¿…é¡»æŠŠå…¶ä¸­ä¸€ç«¯çš„ inverse è®¾ç½®ä¸º true, å¦åˆ™ä¸¤ç«¯éƒ½ç»´æŠ¤å…³è”å…³ç³»å¯èƒ½ä¼šé€ æˆä¸»é”®å†²çª</p>
  </li>
  <li>userè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">userid</span> <span class="err">int(11)</span> <span class="err">notnull</span> <span class="err">primarykey</span> <span class="err">ä¸»é”®</span>
<span class="err">name</span> <span class="err">varchar</span> <span class="err">cannull</span> 
<span class="err">password</span> <span class="err">varchar</span> <span class="err">cannull</span>
</code></pre></div></div>

<ul>
  <li>addressè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">addressid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span> <span class="err">ä¸»é”®</span>
<span class="err">addressinfo</span> <span class="err">varchar</span>
</code></pre></div></div>

<ul>
  <li>user_addressè¡¨</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">addressid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span>
<span class="err">userid</span> <span class="err">int</span> <span class="err">notnull</span> <span class="err">pri</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.HashSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Set</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">userid</span><span class="o">;</span> 				<span class="c1">// Userç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 			<span class="c1">//nameå±æ€§</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>			<span class="c1">//passwordå±æ€§</span>
	<span class="kd">private</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Address</span><span class="o">&gt;</span> <span class="n">addresses</span><span class="o">=</span><span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;</span><span class="nc">Address</span><span class="o">&gt;();</span> 	<span class="c1">// Userç±»çš„å…³è”å®ä½“å±æ€§</span>
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">()</span> <span class="o">{</span>                                                                   
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Userå±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="kt">int</span> <span class="n">userid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">password</span><span class="o">,</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span> <span class="nc">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">userid</span> <span class="o">=</span> <span class="n">userid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//çœç•¥getå’Œset</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-10-31 23:57:50 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"User"</span> <span class="na">table=</span><span class="s">"USER"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"userid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USERID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"NAME"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"PASSWORD"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="c">&lt;!--æ˜ å°„é›†åˆå±æ€§ï¼Œå…³è”åˆ°æŒä¹…åŒ–ç±»ï¼Œtable="user_address"æŒ‡å®šäº†ä¸­é—´è¡¨åç§°--&gt;</span>
        <span class="nt">&lt;set</span> <span class="na">name=</span><span class="s">"addresses"</span> <span class="na">table=</span><span class="s">"USER_ADDRESS"</span> <span class="na">inverse=</span><span class="s">"true"</span> <span class="na">lazy=</span><span class="s">"true"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;key&gt;</span>
                <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"USERID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/key&gt;</span>
            <span class="nt">&lt;many-to-many</span> <span class="na">class=</span><span class="s">"Address"</span> <span class="na">column=</span><span class="s">"ADDRESSID"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/set&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.HashSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Set</span><span class="o">;</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
<span class="c1">//Addressç±»çš„æ ‡è¯†å±æ€§</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">addressid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;();</span>	
	<span class="c1">//æ— å‚æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>
	<span class="c1">//åˆå§‹åŒ–æ‰€æœ‰Addresså±æ€§çš„æ„é€ æ–¹æ³•</span>
	<span class="kd">public</span> <span class="nf">Address</span> <span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">,</span> <span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//Addresså±æ€§çš„getterå’Œsetteræ–¹æ³•</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getAddressid</span> <span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">addressid</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUseid</span><span class="o">(</span><span class="kt">int</span> <span class="n">addressid</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">addressid</span> <span class="o">=</span> <span class="n">addressid</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">//addressinfoçš„getterå’Œsetteræ–¹æ³•</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getAddressinfo</span> <span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">this</span><span class="o">.</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAddressinfo</span> <span class="o">(</span><span class="nc">String</span> <span class="n">addressinfo</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span> <span class="n">addressinfo</span> <span class="o">=</span> <span class="n">addressinfo</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">getUsers</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">users</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUsers</span><span class="o">(</span><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="n">users</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">users</span> <span class="o">=</span> <span class="n">users</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>


</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</span>
<span class="c">&lt;!-- Generated 2012-11-2 11:19:47 by Hibernate Tools 3.4.0.CR1 --&gt;</span>
<span class="nt">&lt;hibernate-mapping&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">"Address"</span> <span class="na">table=</span><span class="s">"ADDRESS"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">"addressid"</span> <span class="na">type=</span><span class="s">"int"</span> <span class="na">access=</span><span class="s">"field"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">"identity"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"addressinfo"</span> <span class="na">type=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSINFO"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="c">&lt;!--æ˜ å°„é›†åˆå±æ€§ï¼Œå…³è”åˆ°æŒä¹…åŒ–ç±»ï¼Œtableå±æ€§æŒ‡å®šäº†ä¸­é—´è¡¨åå­—--&gt;</span>
        <span class="nt">&lt;set</span> <span class="na">name=</span><span class="s">"users"</span> <span class="na">table=</span><span class="s">"USER_ADDRESS"</span> <span class="na">inverse=</span><span class="s">"false"</span> <span class="na">lazy=</span><span class="s">"true"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;key&gt;</span>
                <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"ADDRESSID"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/key&gt;</span>
            <span class="nt">&lt;many-to-many</span> <span class="na">class=</span><span class="s">"User"</span> <span class="na">column=</span><span class="s">"USERID"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/set&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>

</code></pre></div></div>

:ET