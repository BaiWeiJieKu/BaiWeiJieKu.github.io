I"<ul id="markdown-toc">
  <li><a href="#ç®€ä»‹" id="markdown-toc-ç®€ä»‹">ç®€ä»‹</a></li>
  <li><a href="#å¤§å°æ¯”è¾ƒ" id="markdown-toc-å¤§å°æ¯”è¾ƒ">å¤§å°æ¯”è¾ƒ</a></li>
  <li><a href="#ä¿ç•™å°æ•°" id="markdown-toc-ä¿ç•™å°æ•°">ä¿ç•™å°æ•°</a></li>
  <li><a href="#å¸¸ç”¨æ–¹æ³•" id="markdown-toc-å¸¸ç”¨æ–¹æ³•">å¸¸ç”¨æ–¹æ³•</a></li>
  <li><a href="#è¿ç®—å·¥å…·ç±»" id="markdown-toc-è¿ç®—å·¥å…·ç±»">è¿ç®—å·¥å…·ç±»</a></li>
  <li><a href="#é¿å‘æŒ‡å—" id="markdown-toc-é¿å‘æŒ‡å—">é¿å‘æŒ‡å—</a>    <ul>
      <li><a href="#ä½¿ç”¨doubleå¾ˆå±é™©" id="markdown-toc-ä½¿ç”¨doubleå¾ˆå±é™©">ä½¿ç”¨doubleå¾ˆå±é™©</a></li>
      <li><a href="#è€ƒè™‘æµ®ç‚¹æ•°èˆå…¥å’Œæ ¼å¼åŒ–æ–¹å¼" id="markdown-toc-è€ƒè™‘æµ®ç‚¹æ•°èˆå…¥å’Œæ ¼å¼åŒ–æ–¹å¼">è€ƒè™‘æµ®ç‚¹æ•°èˆå…¥å’Œæ ¼å¼åŒ–æ–¹å¼</a></li>
      <li><a href="#equalsåšåˆ¤æ–­" id="markdown-toc-equalsåšåˆ¤æ–­">equalsåšåˆ¤æ–­</a></li>
      <li><a href="#å°å¿ƒæ•°å€¼æº¢å‡º" id="markdown-toc-å°å¿ƒæ•°å€¼æº¢å‡º">å°å¿ƒæ•°å€¼æº¢å‡º</a></li>
    </ul>
  </li>
</ul>
<h3 id="ç®€ä»‹">ç®€ä»‹</h3>

<ul>
  <li><strong>ä½¿ç”¨ BigDecimal æ¥å®šä¹‰æµ®ç‚¹æ•°çš„å€¼ï¼Œå†è¿›è¡Œæµ®ç‚¹æ•°çš„è¿ç®—æ“ä½œï¼Œè§£å†³æµ®ç‚¹æ•°è¿ç®—ç²¾åº¦ä¸¢å¤±é—®é¢˜</strong></li>
  <li>æˆ‘ä»¬åœ¨ä½¿ç”¨BigDecimalæ—¶ï¼Œä¸ºäº†é˜²æ­¢ç²¾åº¦ä¸¢å¤±ï¼Œæ¨èä½¿ç”¨å®ƒçš„ <strong>BigDecimal(String)</strong> æ„é€ æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚</li>
  <li>BigDecimal ä¸»è¦ç”¨æ¥æ“ä½œï¼ˆå¤§ï¼‰æµ®ç‚¹æ•°ï¼ŒBigInteger ä¸»è¦ç”¨æ¥æ“ä½œå¤§æ•´æ•°ï¼ˆè¶…è¿‡ long ç±»å‹ï¼‰ã€‚</li>
  <li>BigDecimal çš„å®ç°åˆ©ç”¨åˆ°äº† BigInteger, æ‰€ä¸åŒçš„æ˜¯ BigDecimal åŠ å…¥äº†å°æ•°ä½çš„æ¦‚å¿µ</li>
</ul>

<h3 id="å¤§å°æ¯”è¾ƒ">å¤§å°æ¯”è¾ƒ</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//a.compareTo(b) : è¿”å› -1 è¡¨ç¤ºå°äºï¼Œ0 è¡¨ç¤º ç­‰äºï¼Œ 1è¡¨ç¤º å¤§äºã€‚</span>
<span class="nc">BigDecimal</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"1.0"</span><span class="o">);</span>
<span class="nc">BigDecimal</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"0.9"</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">b</span><span class="o">));</span><span class="c1">// 1</span>
</code></pre></div></div>

<h3 id="ä¿ç•™å°æ•°">ä¿ç•™å°æ•°</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//é€šè¿‡ setScaleæ–¹æ³•è®¾ç½®ä¿ç•™å‡ ä½å°æ•°ä»¥åŠä¿ç•™è§„åˆ™ã€‚</span>
<span class="nc">BigDecimal</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"1.255433"</span><span class="o">);</span>
<span class="nc">BigDecimal</span> <span class="n">n</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ROUND_HALF_DOWN</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">n</span><span class="o">);</span><span class="c1">// 1.255</span>
</code></pre></div></div>

<h3 id="å¸¸ç”¨æ–¹æ³•">å¸¸ç”¨æ–¹æ³•</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * æ±‚ä½™æ•°
 * è¿”å›å€¼ä¸º (this % divisor) çš„ BigDecimal
 */</span>
<span class="nc">BigDecimal</span> <span class="nf">remainder</span><span class="o">(</span><span class="nc">BigDecimal</span> <span class="n">divisor</span><span class="o">);</span>

<span class="cm">/**
 * æ±‚ç›¸åæ•°
 * è¿”å›å€¼æ˜¯ (-this) çš„ BigDecimal
 */</span>
<span class="nc">BigDecimal</span> <span class="nf">negate</span><span class="o">();</span>

<span class="cm">/**
 * å°†æ­¤ BigDecimal ä¸æŒ‡å®šçš„ BigDecimal æ¯”è¾ƒ
 * æ ¹æ®æ­¤æ–¹æ³•,å€¼ç›¸ç­‰ä½†å…·æœ‰ä¸åŒæ ‡åº¦çš„ä¸¤ä¸ª BigDecimal å¯¹è±¡ï¼ˆå¦‚ï¼Œ2.0 å’Œ 2.00ï¼‰è¢«è®¤ä¸ºæ˜¯ç›¸ç­‰çš„;
 * ç›¸å¯¹å…­ä¸ª boolean æ¯”è¾ƒè¿ç®—ç¬¦ (&lt;, ==, &gt;, &gt;=, !=, &lt;=) ä¸­æ¯ä¸€ä¸ªè¿ç®—ç¬¦çš„å„ä¸ªæ–¹æ³•,ä¼˜å…ˆæä¾›æ­¤æ–¹æ³•;
 * å»ºè®®ä½¿ç”¨ä»¥ä¸‹è¯­å¥æ‰§è¡Œä¸Šè¿°æ¯”è¾ƒï¼š(x.compareTo(y) &lt;op&gt; 0), å…¶ä¸­ &lt;op&gt; æ˜¯å…­ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦ä¹‹ä¸€;
 *
 * æŒ‡å®šè€…ï¼šæ¥å£ Comparable&lt;BigDecimal&gt; ä¸­çš„ compareTo
 * è¿”å›ï¼šå½“æ­¤ BigDecimal åœ¨æ•°å­—ä¸Šå°äºã€ç­‰äºæˆ–å¤§äº val æ—¶ï¼Œè¿”å› -1ã€0 æˆ– 1
 */</span>
<span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">BigDecimal</span> <span class="n">val</span><span class="o">);</span>
</code></pre></div></div>

<h3 id="è¿ç®—å·¥å…·ç±»">è¿ç®—å·¥å…·ç±»</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ArithUtil</span> <span class="o">{</span>

    <span class="c1">// é™¤æ³•è¿ç®—é»˜è®¤ç²¾åº¦  </span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">DEF_DIV_SCALE</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>  
  
    <span class="kd">private</span> <span class="nf">ArithUtil</span><span class="o">()</span> <span class="o">{</span>  
  
    <span class="o">}</span>  
  
    <span class="cm">/** 
     * ç²¾ç¡®åŠ æ³• 
     */</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">add</span><span class="o">(</span><span class="kt">double</span> <span class="n">value1</span><span class="o">,</span> <span class="kt">double</span> <span class="n">value2</span><span class="o">)</span> <span class="o">{</span>  
        <span class="nc">BigDecimal</span> <span class="n">b1</span> <span class="o">=</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">value1</span><span class="o">);</span>  
        <span class="nc">BigDecimal</span> <span class="n">b2</span> <span class="o">=</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">value2</span><span class="o">);</span>  
        <span class="k">return</span> <span class="n">b1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b2</span><span class="o">).</span><span class="na">doubleValue</span><span class="o">();</span>  
    <span class="o">}</span>  
  
    <span class="cm">/** 
     * ç²¾ç¡®å‡æ³• 
     */</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">sub</span><span class="o">(</span><span class="kt">double</span> <span class="n">value1</span><span class="o">,</span> <span class="kt">double</span> <span class="n">value2</span><span class="o">)</span> <span class="o">{</span>  
        <span class="nc">BigDecimal</span> <span class="n">b1</span> <span class="o">=</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">value1</span><span class="o">);</span>  
        <span class="nc">BigDecimal</span> <span class="n">b2</span> <span class="o">=</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">value2</span><span class="o">);</span>  
        <span class="k">return</span> <span class="n">b1</span><span class="o">.</span><span class="na">subtract</span><span class="o">(</span><span class="n">b2</span><span class="o">).</span><span class="na">doubleValue</span><span class="o">();</span>  
    <span class="o">}</span>  
  
    <span class="cm">/** 
     * ç²¾ç¡®ä¹˜æ³• 
     */</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">mul</span><span class="o">(</span><span class="kt">double</span> <span class="n">value1</span><span class="o">,</span> <span class="kt">double</span> <span class="n">value2</span><span class="o">)</span> <span class="o">{</span>  
        <span class="nc">BigDecimal</span> <span class="n">b1</span> <span class="o">=</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">value1</span><span class="o">);</span>  
        <span class="nc">BigDecimal</span> <span class="n">b2</span> <span class="o">=</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">value2</span><span class="o">);</span>  
        <span class="k">return</span> <span class="n">b1</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">b2</span><span class="o">).</span><span class="na">doubleValue</span><span class="o">();</span>  
    <span class="o">}</span>  
  
    <span class="cm">/** 
     * ç²¾ç¡®é™¤æ³• ä½¿ç”¨é»˜è®¤ç²¾åº¦ 
     */</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">div</span><span class="o">(</span><span class="kt">double</span> <span class="n">value1</span><span class="o">,</span> <span class="kt">double</span> <span class="n">value2</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IllegalAccessException</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="nf">div</span><span class="o">(</span><span class="n">value1</span><span class="o">,</span> <span class="n">value2</span><span class="o">,</span> <span class="no">DEF_DIV_SCALE</span><span class="o">);</span>  
    <span class="o">}</span>  
  
    <span class="cm">/** 
     * ç²¾ç¡®é™¤æ³• 
     * @param scale ç²¾åº¦ 
     */</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">div</span><span class="o">(</span><span class="kt">double</span> <span class="n">value1</span><span class="o">,</span> <span class="kt">double</span> <span class="n">value2</span><span class="o">,</span> <span class="kt">int</span> <span class="n">scale</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IllegalAccessException</span> <span class="o">{</span>  
        <span class="k">if</span><span class="o">(</span><span class="n">scale</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>  
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalAccessException</span><span class="o">(</span><span class="s">"ç²¾ç¡®åº¦ä¸èƒ½å°äº0"</span><span class="o">);</span>  
        <span class="o">}</span>  
        <span class="nc">BigDecimal</span> <span class="n">b1</span> <span class="o">=</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">value1</span><span class="o">);</span>  
        <span class="nc">BigDecimal</span> <span class="n">b2</span> <span class="o">=</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">value2</span><span class="o">);</span>  
        <span class="c1">// return b1.divide(b2, scale).doubleValue();  </span>
        <span class="k">return</span> <span class="n">b1</span><span class="o">.</span><span class="na">divide</span><span class="o">(</span><span class="n">b2</span><span class="o">,</span> <span class="n">scale</span><span class="o">,</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ROUND_HALF_UP</span><span class="o">).</span><span class="na">doubleValue</span><span class="o">();</span>  
    <span class="o">}</span>  
  
    <span class="cm">/** 
     * å››èˆäº”å…¥ 
     * @param scale å°æ•°ç‚¹åä¿ç•™å‡ ä½ 
     */</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">round</span><span class="o">(</span><span class="kt">double</span> <span class="n">v</span><span class="o">,</span> <span class="kt">int</span> <span class="n">scale</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IllegalAccessException</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="nf">div</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="n">scale</span><span class="o">);</span>  
    <span class="o">}</span>  
      
    <span class="cm">/** 
     * æ¯”è¾ƒå¤§å° 
     */</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">equalTo</span><span class="o">(</span><span class="nc">BigDecimal</span> <span class="n">b1</span><span class="o">,</span> <span class="nc">BigDecimal</span> <span class="n">b2</span><span class="o">)</span> <span class="o">{</span>  
        <span class="k">if</span><span class="o">(</span><span class="n">b1</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">b2</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>  
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>  
        <span class="o">}</span>  
        <span class="k">return</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">b1</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">b2</span><span class="o">);</span>  
    <span class="o">}</span>  
    
    
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IllegalAccessException</span> <span class="o">{</span>
        <span class="kt">double</span> <span class="n">value1</span><span class="o">=</span><span class="mf">1.2345678912311</span><span class="o">;</span>
        <span class="kt">double</span> <span class="n">value2</span><span class="o">=</span><span class="mf">9.1234567890123</span><span class="o">;</span>
        <span class="nc">BigDecimal</span> <span class="n">value3</span><span class="o">=</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="nc">Double</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">value1</span><span class="o">));</span>
        <span class="nc">BigDecimal</span> <span class="n">value4</span><span class="o">=</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="nc">Double</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">value2</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ç²¾ç¡®åŠ æ³•================="</span><span class="o">+</span><span class="nc">ArithUtil</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">value1</span><span class="o">,</span> <span class="n">value2</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ç²¾ç¡®å‡æ³•================="</span><span class="o">+</span><span class="nc">ArithUtil</span><span class="o">.</span><span class="na">sub</span><span class="o">(</span><span class="n">value1</span><span class="o">,</span> <span class="n">value2</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ç²¾ç¡®ä¹˜æ³•================="</span><span class="o">+</span><span class="nc">ArithUtil</span><span class="o">.</span><span class="na">mul</span><span class="o">(</span><span class="n">value1</span><span class="o">,</span> <span class="n">value2</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ç²¾ç¡®é™¤æ³• ä½¿ç”¨é»˜è®¤ç²¾åº¦ ================="</span><span class="o">+</span><span class="nc">ArithUtil</span><span class="o">.</span><span class="na">div</span><span class="o">(</span><span class="n">value1</span><span class="o">,</span> <span class="n">value2</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ç²¾ç¡®é™¤æ³•  è®¾ç½®ç²¾åº¦================="</span><span class="o">+</span><span class="nc">ArithUtil</span><span class="o">.</span><span class="na">div</span><span class="o">(</span><span class="n">value1</span><span class="o">,</span> <span class="n">value2</span><span class="o">,</span><span class="mi">20</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"å››èˆäº”å…¥   å°æ•°ç‚¹åä¿ç•™å‡ ä½ ================="</span><span class="o">+</span><span class="nc">ArithUtil</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="n">value1</span><span class="o">,</span> <span class="mi">10</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"æ¯”è¾ƒå¤§å° ================="</span><span class="o">+</span><span class="nc">ArithUtil</span><span class="o">.</span><span class="na">equalTo</span><span class="o">(</span><span class="n">value3</span><span class="o">,</span> <span class="n">value4</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="é¿å‘æŒ‡å—">é¿å‘æŒ‡å—</h3>

<h4 id="ä½¿ç”¨doubleå¾ˆå±é™©">ä½¿ç”¨doubleå¾ˆå±é™©</h4>

<ul>
  <li>è®¡ç®—æœºæ˜¯ä»¥äºŒè¿›åˆ¶å­˜å‚¨æ•°å€¼çš„ï¼Œæµ®ç‚¹æ•°ä¹Ÿä¸ä¾‹å¤–ã€‚å¯¹äºè®¡ç®—æœºè€Œè¨€ï¼Œ0.1 æ— æ³•ç²¾ç¡®è¡¨è¾¾ï¼Œè¿™æ˜¯æµ®ç‚¹æ•°è®¡ç®—é€ æˆç²¾åº¦æŸå¤±çš„æ ¹æºã€‚</li>
  <li>ä½¿ç”¨ BigDecimal è¡¨ç¤ºå’Œè®¡ç®—æµ®ç‚¹æ•°ï¼Œä¸”åŠ¡å¿…ä½¿ç”¨å­—ç¬¦ä¸²çš„æ„é€ æ–¹æ³•æ¥åˆå§‹åŒ–BigDecimal</li>
  <li>BigDecimal æœ‰ scale å’Œ precision çš„æ¦‚å¿µï¼Œscale è¡¨ç¤ºå°æ•°ç‚¹å³è¾¹çš„ä½æ•°ï¼Œè€Œ precision è¡¨ç¤ºç²¾åº¦ï¼Œä¹Ÿå°±æ˜¯æœ‰æ•ˆæ•°å­—çš„é•¿åº¦</li>
  <li>ä¸èƒ½è°ƒç”¨ BigDecimal ä¼ å…¥ Double çš„æ„é€ æ–¹æ³•ï¼Œä½†æ‰‹å¤´åªæœ‰ä¸€ä¸ª Doubleï¼Œå¦‚ä½•è½¬æ¢ä¸ºç²¾ç¡®è¡¨è¾¾çš„ BigDecimal å‘¢ï¼Ÿ</li>
  <li>å¦‚æœä¸€å®šè¦ç”¨ Double æ¥åˆå§‹åŒ– BigDecimal çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ BigDecimal.valueOf æ–¹æ³•ï¼Œä»¥ç¡®ä¿å…¶è¡¨ç°å’Œå­—ç¬¦ä¸²å½¢å¼çš„æ„é€ æ–¹æ³•ä¸€è‡´</li>
  <li><code class="language-plaintext highlighter-rouge">System.out.println(new BigDecimal("4.015").multiply(BigDecimal.valueOf(100)));</code></li>
  <li>new BigDecimal(Double.toString(100)) å¾—åˆ°çš„ BigDecimal çš„
scale=1ã€precision=4ï¼›è€Œ new BigDecimal(â€œ100â€) å¾—åˆ°çš„ BigDecimal çš„ scale=0ã€
precision=3ã€‚å¯¹äº BigDecimal ä¹˜æ³•æ“ä½œï¼Œè¿”å›å€¼çš„ scale æ˜¯ä¸¤ä¸ªæ•°çš„ scale ç›¸åŠ ã€‚æ‰€
ä»¥ï¼Œåˆå§‹åŒ– 100 çš„ä¸¤ç§ä¸åŒæ–¹å¼ï¼Œå¯¼è‡´æœ€åç»“æœçš„ scale åˆ†åˆ«æ˜¯ 4 å’Œ 3ã€‚</li>
</ul>

<h4 id="è€ƒè™‘æµ®ç‚¹æ•°èˆå…¥å’Œæ ¼å¼åŒ–æ–¹å¼">è€ƒè™‘æµ®ç‚¹æ•°èˆå…¥å’Œæ ¼å¼åŒ–æ–¹å¼</h4>

<ul>
  <li>é¦–å…ˆç”¨ double å’Œ float åˆå§‹åŒ–ä¸¤ä¸ª 3.35 çš„æµ®ç‚¹æ•°ï¼Œç„¶åé€šè¿‡String.format ä½¿ç”¨ %.1f æ¥æ ¼å¼åŒ–è¿™ 2 ä¸ªæ•°å­—</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">num1</span> <span class="o">=</span> <span class="mf">3.35</span><span class="o">;</span>
<span class="kt">float</span> <span class="n">num2</span> <span class="o">=</span> <span class="mf">3.35f</span><span class="o">;</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%.1f"</span><span class="o">,</span> <span class="n">num1</span><span class="o">));</span><span class="c1">//å››èˆäº”å…¥ 3.4</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%.1f"</span><span class="o">,</span> <span class="n">num2</span><span class="o">));</span><span class="c1">//3.3</span>
</code></pre></div></div>

<ul>
  <li>è¿™å°±æ˜¯ç”±ç²¾åº¦é—®é¢˜å’Œèˆå…¥æ–¹å¼å…±åŒå¯¼è‡´çš„ï¼Œdouble å’Œ float çš„ 3.35 å…¶å®ç›¸å½“äº 3.350xxxå’Œ 3.349xxx</li>
  <li>String.format é‡‡ç”¨å››èˆäº”å…¥çš„æ–¹å¼è¿›è¡Œèˆå…¥ï¼Œå– 1 ä½å°æ•°ï¼Œdouble çš„ 3.350 å››èˆäº”å…¥ä¸º3.4ï¼Œè€Œ float çš„ 3.349 å››èˆäº”å…¥ä¸º 3.3ã€‚</li>
  <li>å¦‚æœæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨å…¶ä»–èˆå…¥æ–¹å¼æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„è¯ï¼Œå¯ä»¥è®¾ç½® DecimalFormat</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">num1</span> <span class="o">=</span> <span class="mf">3.35</span><span class="o">;</span>
<span class="kt">float</span> <span class="n">num2</span> <span class="o">=</span> <span class="mf">3.35f</span><span class="o">;</span>
<span class="nc">DecimalFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DecimalFormat</span><span class="o">(</span><span class="s">"#.##"</span><span class="o">);</span>
<span class="n">format</span><span class="o">.</span><span class="na">setRoundingMode</span><span class="o">(</span><span class="nc">RoundingMode</span><span class="o">.</span><span class="na">DOWN</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">num1</span><span class="o">));</span><span class="c1">//3.35</span>
<span class="n">format</span><span class="o">.</span><span class="na">setRoundingMode</span><span class="o">(</span><span class="nc">RoundingMode</span><span class="o">.</span><span class="na">DOWN</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">format</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">num2</span><span class="o">));</span><span class="c1">//3.34</span>
</code></pre></div></div>

<ul>
  <li>å³ä½¿é€šè¿‡ DecimalFormat æ¥ç²¾ç¡®æ§åˆ¶èˆå…¥æ–¹å¼ï¼Œdouble å’Œ float çš„é—®é¢˜ä¹Ÿå¯èƒ½äº§
ç”Ÿæ„æƒ³ä¸åˆ°çš„ç»“æœ</li>
  <li>æ‰€ä»¥æµ®ç‚¹æ•°é¿å‘ç¬¬äºŒåŸåˆ™ï¼š<strong>æµ®ç‚¹æ•°çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–ä¹Ÿè¦é€šè¿‡BigDecimal è¿›è¡Œ</strong>ã€‚</li>
  <li>ä½¿ç”¨ BigDecimal æ¥æ ¼å¼åŒ–æ•°å­— 3.35ï¼Œåˆ†åˆ«ä½¿ç”¨å‘ä¸‹èˆå…¥å’Œå››èˆäº”å…¥æ–¹å¼å– 1 ä½å°æ•°è¿›è¡Œæ ¼å¼åŒ–</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">BigDecimal</span> <span class="n">num1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"3.35"</span><span class="o">);</span>
<span class="nc">BigDecimal</span> <span class="n">num2</span> <span class="o">=</span> <span class="n">num1</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ROUND_DOWN</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">num2</span><span class="o">);</span><span class="c1">//3.3</span>
<span class="nc">BigDecimal</span> <span class="n">num3</span> <span class="o">=</span> <span class="n">num1</span><span class="o">.</span><span class="na">setScale</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">ROUND_HALF_UP</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">num3</span><span class="o">);</span><span class="c1">//3.4</span>
</code></pre></div></div>

<h4 id="equalsåšåˆ¤æ–­">equalsåšåˆ¤æ–­</h4>

<ul>
  <li>åŒ…è£…ç±»çš„æ¯”è¾ƒè¦é€šè¿‡ equals è¿›è¡Œï¼Œè€Œä¸èƒ½ä½¿ç”¨ ==ã€‚é‚£ä¹ˆï¼Œä½¿ç”¨ equals æ–¹æ³•å¯¹ä¸¤ä¸ª BigDecimal åˆ¤ç­‰ï¼Œä¸€å®šèƒ½å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœå—ï¼Ÿ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"1.0"</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"1"</span><span class="o">)));</span>
<span class="cm">/*
BigDecimal çš„ equals æ–¹æ³•çš„æ³¨é‡Šä¸­è¯´
æ˜äº†åŸå› ï¼Œequals æ¯”è¾ƒçš„æ˜¯ BigDecimal çš„ value å’Œ scaleï¼Œ1.0 çš„ scale æ˜¯ 1ï¼Œ1 çš„
scale æ˜¯ 0ï¼Œæ‰€ä»¥ç»“æœä¸€å®šæ˜¯ false
*/</span>
</code></pre></div></div>

<ul>
  <li><strong>å¦‚æœæˆ‘ä»¬å¸Œæœ›åªæ¯”è¾ƒ BigDecimal çš„ valueï¼Œå¯ä»¥ä½¿ç”¨ compareTo æ–¹æ³•</strong></li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"1.0"</span><span class="o">).</span><span class="na">compareTo</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"1"</span><span class="o">))==</span><span class="mi">0</span><span class="o">);</span>
</code></pre></div></div>

<ul>
  <li>BigDecimal çš„ equals å’Œ hashCode æ–¹æ³•ä¼šåŒæ—¶è€ƒè™‘ valueå’Œ scaleï¼Œå¦‚æœç»“åˆ HashSet æˆ– HashMap ä½¿ç”¨çš„è¯å°±å¯èƒ½ä¼šå‡ºç°éº»çƒ¦ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æŠŠå€¼ä¸º 1.0 çš„ BigDecimal åŠ å…¥ HashSetï¼Œç„¶ååˆ¤æ–­å…¶æ˜¯å¦å­˜åœ¨å€¼ä¸º 1 çš„ BigDecimalï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ false</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">BigDecimal</span><span class="o">&gt;</span> <span class="n">hashSet1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;();</span>
<span class="n">hashSet1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"1.0"</span><span class="o">));</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">hashSet1</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"1"</span><span class="o">)));</span><span class="c1">//è¿”å›false</span>
</code></pre></div></div>

<ul>
  <li>ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯ï¼Œä½¿ç”¨ TreeSet æ›¿æ¢ HashSetã€‚TreeSet ä¸ä½¿ç”¨ hashCode æ–¹æ³•ï¼Œä¹Ÿä¸ä½¿ç”¨ equals æ¯”è¾ƒå…ƒç´ ï¼Œè€Œæ˜¯ä½¿ç”¨ compareTo æ–¹æ³•ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰é—®é¢˜ã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">BigDecimal</span><span class="o">&gt;</span> <span class="n">treeSet</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeSet</span><span class="o">&lt;&gt;();</span>
<span class="n">treeSet</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"1.0"</span><span class="o">));</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">treeSet</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"1"</span><span class="o">)));</span><span class="c1">//è¿”å›true</span>
</code></pre></div></div>

<ul>
  <li>ç¬¬äºŒä¸ªæ–¹æ³•æ˜¯ï¼ŒæŠŠ BigDecimal å­˜å…¥ HashSet æˆ– HashMap å‰ï¼Œå…ˆä½¿ç”¨stripTrailingZeros æ–¹æ³•å»æ‰å°¾éƒ¨çš„é›¶ï¼Œæ¯”è¾ƒçš„æ—¶å€™ä¹Ÿå»æ‰å°¾éƒ¨çš„ 0ï¼Œç¡®ä¿ value ç›¸åŒçš„BigDecimalï¼Œscale ä¹Ÿæ˜¯ä¸€è‡´çš„</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Set</span><span class="o">&lt;</span><span class="nc">BigDecimal</span><span class="o">&gt;</span> <span class="n">hashSet2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;();</span>
<span class="n">hashSet2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"1.0"</span><span class="o">).</span><span class="na">stripTrailingZeros</span><span class="o">());</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">hashSet2</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="s">"1.000"</span><span class="o">).</span><span class="na">stripTrailingZeros</span><span class="o">()));</span><span class="c1">//è¿”å›true</span>
</code></pre></div></div>

<h4 id="å°å¿ƒæ•°å€¼æº¢å‡º">å°å¿ƒæ•°å€¼æº¢å‡º</h4>

<ul>
  <li>ä¸ç®¡æ˜¯ int è¿˜æ˜¯ longï¼Œæ‰€æœ‰çš„åŸºæœ¬æ•°å€¼ç±»å‹éƒ½æœ‰è¶…å‡ºè¡¨è¾¾èŒƒå›´çš„å¯èƒ½æ€§ã€‚</li>
  <li>æ˜¾ç„¶è¿™æ˜¯å‘ç”Ÿäº†æº¢å‡ºï¼Œè€Œä¸”æ˜¯é»˜é»˜çš„æº¢å‡ºï¼Œå¹¶æ²¡æœ‰ä»»ä½•å¼‚å¸¸ã€‚è¿™ç±»é—®é¢˜éå¸¸å®¹æ˜“è¢«å¿½ç•¥ï¼Œæ”¹è¿›æ–¹å¼æœ‰ä¸‹é¢ 2 ç§</li>
  <li>æ–¹æ³•ä¸€æ˜¯ï¼Œè€ƒè™‘ä½¿ç”¨ Math ç±»çš„ addExactã€subtractExact ç­‰ xxExact æ–¹æ³•è¿›è¡Œæ•°å€¼è¿ç®—ï¼Œè¿™äº›æ–¹æ³•å¯ä»¥åœ¨æ•°å€¼æº¢å‡ºæ—¶ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span> <span class="o">{</span>
  <span class="kt">long</span> <span class="n">l</span> <span class="o">=</span> <span class="nc">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">;</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Math</span><span class="o">.</span><span class="na">addExact</span><span class="o">(</span><span class="n">l</span><span class="o">,</span> <span class="mi">1</span><span class="o">));</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
	<span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span><span class="c1">//java.lang.ArithmeticException: long overflow</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>æ–¹æ³•äºŒæ˜¯ï¼Œä½¿ç”¨å¤§æ•°ç±» BigIntegerã€‚BigDecimal æ˜¯å¤„ç†æµ®ç‚¹æ•°çš„ä¸“å®¶ï¼Œè€Œ BigInteger åˆ™æ˜¯å¯¹å¤§æ•°è¿›è¡Œç§‘å­¦è®¡ç®—çš„ä¸“å®¶ã€‚</li>
  <li>ä½¿ç”¨ BigInteger å¯¹ Long æœ€å¤§å€¼è¿›è¡Œ +1 æ“ä½œï¼›å¦‚æœå¸Œæœ›æŠŠè®¡ç®—ç»“æœè½¬æ¢ä¸€ä¸ªLong å˜é‡çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ BigInteger çš„ longValueExact æ–¹æ³•ï¼Œåœ¨è½¬æ¢å‡ºç°æº¢å‡ºæ—¶ï¼ŒåŒæ ·ä¼šæŠ›å‡º ArithmeticException</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">BigInteger</span> <span class="n">i</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BigInteger</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">));</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">).</span><span class="na">toString</span><span class="o">());</span>
<span class="k">try</span> <span class="o">{</span>
<span class="kt">long</span> <span class="n">l</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">).</span><span class="na">longValueExact</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
<span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>

<span class="cm">/*
9223372036854775808
java.lang.ArithmeticException: BigInteger out of long range
å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ BigInteger å¯¹ Long çš„æœ€å¤§å€¼åŠ  1 ä¸€ç‚¹é—®é¢˜éƒ½æ²¡æœ‰ï¼Œå½“å°è¯•æŠŠç»“æœè½¬æ¢ä¸º
Long ç±»å‹æ—¶ï¼Œåˆ™ä¼šæç¤º BigInteger out of long range
*/</span>
</code></pre></div></div>

:ET