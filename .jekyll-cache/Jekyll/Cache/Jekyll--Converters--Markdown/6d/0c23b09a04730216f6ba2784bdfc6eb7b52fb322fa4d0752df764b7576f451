I"¤<ul id="markdown-toc">
  <li><a href="#æ¦‚å¿µ" id="markdown-toc-æ¦‚å¿µ">æ¦‚å¿µ</a></li>
  <li><a href="#å·¥å…·ç±»" id="markdown-toc-å·¥å…·ç±»">å·¥å…·ç±»</a></li>
  <li><a href="#å¢åˆ æ”¹" id="markdown-toc-å¢åˆ æ”¹">å¢åˆ æ”¹</a>    <ul>
      <li><a href="#æŸ¥è¯¢" id="markdown-toc-æŸ¥è¯¢">æŸ¥è¯¢</a></li>
      <li><a href="#æ€»æ•°" id="markdown-toc-æ€»æ•°">æ€»æ•°</a></li>
    </ul>
  </li>
  <li><a href="#metadata" id="markdown-toc-metadata">MetaData</a></li>
  <li><a href="#propertyutils" id="markdown-toc-propertyutils">PropertyUtils</a></li>
  <li><a href="#prepared" id="markdown-toc-prepared">Prepared</a>    <ul>
      <li><a href="#ä¼˜ç‚¹1" id="markdown-toc-ä¼˜ç‚¹1">ä¼˜ç‚¹1</a></li>
      <li><a href="#ä¼˜ç‚¹2" id="markdown-toc-ä¼˜ç‚¹2">ä¼˜ç‚¹2</a></li>
      <li><a href="#ä¼˜ç‚¹3" id="markdown-toc-ä¼˜ç‚¹3">ä¼˜ç‚¹3</a></li>
    </ul>
  </li>
  <li><a href="#executeåŒºåˆ«" id="markdown-toc-executeåŒºåˆ«">executeåŒºåˆ«</a></li>
  <li><a href="#ç‰¹æ®Šæ“ä½œ" id="markdown-toc-ç‰¹æ®Šæ“ä½œ">ç‰¹æ®Šæ“ä½œ</a>    <ul>
      <li><a href="#è‡ªå¢é•¿id" id="markdown-toc-è‡ªå¢é•¿id">è‡ªå¢é•¿id</a></li>
      <li><a href="#å…ƒæ•°æ®è·å–" id="markdown-toc-å…ƒæ•°æ®è·å–">å…ƒæ•°æ®è·å–</a></li>
    </ul>
  </li>
  <li><a href="#äº‹åŠ¡" id="markdown-toc-äº‹åŠ¡">äº‹åŠ¡</a>    <ul>
      <li><a href="#å±æ€§" id="markdown-toc-å±æ€§">å±æ€§</a></li>
      <li><a href="#å¹¶å‘é—®é¢˜" id="markdown-toc-å¹¶å‘é—®é¢˜">å¹¶å‘é—®é¢˜</a></li>
      <li><a href="#ä¸ä½¿ç”¨" id="markdown-toc-ä¸ä½¿ç”¨">ä¸ä½¿ç”¨</a></li>
      <li><a href="#ä½¿ç”¨äº‹åŠ¡" id="markdown-toc-ä½¿ç”¨äº‹åŠ¡">ä½¿ç”¨äº‹åŠ¡</a></li>
    </ul>
  </li>
  <li><a href="#orm" id="markdown-toc-orm">ORM</a></li>
  <li><a href="#dao" id="markdown-toc-dao">DAO</a></li>
  <li><a href="#æ•°æ®åº“è¿æ¥æ± " id="markdown-toc-æ•°æ®åº“è¿æ¥æ± ">æ•°æ®åº“è¿æ¥æ± </a>    <ul>
      <li><a href="#ä¼ ç»Ÿæ–¹å¼" id="markdown-toc-ä¼ ç»Ÿæ–¹å¼">ä¼ ç»Ÿæ–¹å¼</a></li>
      <li><a href="#ä½¿ç”¨æ± " id="markdown-toc-ä½¿ç”¨æ± ">ä½¿ç”¨æ± </a></li>
      <li><a href="#åˆå§‹åŒ–" id="markdown-toc-åˆå§‹åŒ–">åˆå§‹åŒ–</a></li>
      <li><a href="#æµ‹è¯•" id="markdown-toc-æµ‹è¯•">æµ‹è¯•</a></li>
    </ul>
  </li>
</ul>
<h2 id="æ¦‚å¿µ">æ¦‚å¿µ</h2>

<ul>
  <li>JDBC (Java DataBase Connection) æ˜¯é€šè¿‡JAVAè®¿é—®æ•°æ®åº“</li>
  <li>JDBCæ˜¯ä¸€ç»„è§„èŒƒï¼Œé€šè¿‡æ“ä½œæ•°æ®åº“é©±åŠ¨æ¥æ“ä½œæ•°æ®åº“</li>
</ul>

<h2 id="å·¥å…·ç±»">å·¥å…·ç±»</h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.zhuoer.qmaintance.utils</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DBTools</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">URL</span> <span class="o">=</span> <span class="s">"jdbc:mysql://127.0.0.1:3306/database?useUnicode=true&amp;characterEncoding=UTF-8"</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">DRIVER</span> <span class="o">=</span> <span class="s">"com.mysql.jdbc.Driver"</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">USER</span> <span class="o">=</span> <span class="s">"root"</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">PASS</span> <span class="o">=</span> <span class="s">"123456"</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="nc">Connection</span> <span class="n">conn</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
 	<span class="c1">// å»ºç«‹ä¸æ•°æ®åº“çš„Connectionè¿æ¥</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">Connection</span> <span class="nf">getConnection</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">conn</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">conn</span><span class="o">.</span><span class="na">isClosed</span><span class="o">())</span> <span class="o">{</span>
				<span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="no">DRIVER</span><span class="o">);</span>
				<span class="n">conn</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="no">URL</span><span class="o">,</span> <span class="no">USER</span><span class="o">,</span> <span class="no">PASS</span><span class="o">);</span>
			<span class="o">}</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
		<span class="k">return</span> <span class="n">conn</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.zhuoer.qmaintance.utils</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSetMetaData</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">com.zhuoer.qmaintance.beans.RepairInfo</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RepairInfoTools</span> <span class="o">{</span>
	
	<span class="cm">/**
	 * æ‰€æœ‰æŸ¥è¯¢å·¥å…·ç±»
	 * @param sql
	 * @param objects
	 * @return
	 */</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span> <span class="nf">executeQuary</span><span class="o">(</span><span class="nc">String</span> <span class="n">sql</span><span class="o">,</span> <span class="nc">Object</span><span class="o">...</span> <span class="n">objects</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">List</span> <span class="n">li</span><span class="o">=</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">();</span>
		<span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">;</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">PreparedStatement</span> <span class="n">ps</span><span class="o">=</span><span class="nc">DBTools</span><span class="o">.</span><span class="na">getConnection</span><span class="o">().</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">objects</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
				<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">objects</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
					<span class="n">ps</span><span class="o">.</span><span class="na">setObject</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">objects</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
 
				<span class="o">}</span>
			<span class="o">}</span>
			<span class="n">rs</span><span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
			
			<span class="nc">ResultSetMetaData</span> <span class="n">md</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getMetaData</span><span class="o">();</span>
			<span class="kt">int</span> <span class="n">columnCount</span> <span class="o">=</span> <span class="n">md</span><span class="o">.</span><span class="na">getColumnCount</span><span class="o">();</span>
			<span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
				<span class="nc">Map</span> <span class="n">rowData</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">();</span>
				<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">columnCount</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
				<span class="o">{</span>
					<span class="n">rowData</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">md</span><span class="o">.</span><span class="na">getColumnName</span><span class="o">(</span><span class="n">i</span><span class="o">),</span> <span class="n">rs</span><span class="o">.</span><span class="na">getObject</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>
				<span class="o">}</span>
				<span class="n">li</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">rowData</span><span class="o">);</span>
			<span class="o">}</span>
			<span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
			<span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
 
		<span class="k">return</span> <span class="n">li</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="cm">/**
	 * æŸ¥è¯¢æ€»é¡µæ•°
	 * @param sql
	 * @return
	 */</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">selectCount</span><span class="o">(</span><span class="nc">String</span> <span class="n">sql</span><span class="o">)</span> <span class="o">{</span>
		<span class="kt">int</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="nc">DBTools</span><span class="o">.</span><span class="na">getConnection</span><span class="o">().</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
			<span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
			<span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
			<span class="o">{</span>
				<span class="n">count</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
			<span class="o">}</span>
			<span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
			<span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
		
		<span class="k">return</span> <span class="n">count</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="cm">/**
	 * ä¿®æ”¹æ“ä½œå·¥å…·ç±»(å¢åˆ æ”¹)
	 * @param sql
	 * @param objects
	 * @return
	 */</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">executeUpdate</span><span class="o">(</span><span class="nc">String</span> <span class="n">sql</span><span class="o">,</span> <span class="nc">Object</span><span class="o">...</span> <span class="n">objects</span><span class="o">)</span> <span class="o">{</span>
		<span class="kt">int</span> <span class="n">s</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
		<span class="k">try</span> <span class="o">{</span>
			
			<span class="nc">PreparedStatement</span> <span class="n">ps</span><span class="o">=</span><span class="nc">DBTools</span><span class="o">.</span><span class="na">getConnection</span><span class="o">().</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">objects</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
				<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">objects</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
					
					<span class="n">ps</span><span class="o">.</span><span class="na">setObject</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">objects</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
				<span class="o">}</span>
 
			<span class="n">s</span><span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
			<span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
			<span class="k">return</span> <span class="n">s</span><span class="o">;</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
		<span class="k">return</span> <span class="n">s</span><span class="o">;</span>
	<span class="o">}</span>
 
 
<span class="o">}</span>
</code></pre></div></div>

<h2 id="å¢åˆ æ”¹">å¢åˆ æ”¹</h2>

<ul>
  <li>CRUDæ˜¯æœ€å¸¸è§çš„æ•°æ®åº“æ“ä½œï¼Œå³å¢åˆ æ”¹æŸ¥ 
C å¢åŠ (Create) 
R è¯»å–æŸ¥è¯¢(Retrieve) 
U æ›´æ–°(Update) 
D åˆ é™¤(Delete)</li>
  <li>åœ¨JDBCä¸­å¢åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹çš„æ“ä½œéƒ½å¾ˆç±»ä¼¼ï¼Œåªæ˜¯ä¼ é€’ä¸åŒçš„SQLè¯­å¥å°±è¡Œäº†ã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
  
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
  
        <span class="k">try</span> <span class="o">(</span>
            <span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span>
                <span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
            <span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>              
        <span class="o">)</span>
        <span class="o">{</span>
            <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"insert into hero values(null,"</span> <span class="o">+</span> <span class="s">"'æè«'"</span> <span class="o">+</span> <span class="s">","</span> <span class="o">+</span> <span class="mf">313.0f</span> <span class="o">+</span> <span class="s">","</span> <span class="o">+</span> <span class="mi">50</span> <span class="o">+</span> <span class="s">")"</span><span class="o">;</span>
            <span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
              
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
  
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
  
        <span class="k">try</span> <span class="o">(</span>
            <span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span>
                <span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
            <span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>              
        <span class="o">)</span>
        <span class="o">{</span>
            <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"delete from hero where id = 5"</span><span class="o">;</span>
            <span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
              
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
  
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
  
        <span class="k">try</span> <span class="o">(</span>
            <span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span>
                <span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
            <span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>              
        <span class="o">)</span>
        <span class="o">{</span>
            <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"update hero set name = 'name 5' where id = 3"</span><span class="o">;</span>
            <span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
              
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="æŸ¥è¯¢">æŸ¥è¯¢</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span>
				<span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span> <span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();)</span> <span class="o">{</span>

			<span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from hero"</span><span class="o">;</span>

			<span class="c1">// æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œå¹¶æŠŠç»“æœé›†è¿”å›ç»™ResultSet</span>
			<span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
			<span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
				<span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"id"</span><span class="o">);</span><span class="c1">// å¯ä»¥ä½¿ç”¨å­—æ®µå</span>
				<span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span><span class="c1">// ä¹Ÿå¯ä»¥ä½¿ç”¨å­—æ®µçš„é¡ºåº</span>
				<span class="kt">float</span> <span class="n">hp</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getFloat</span><span class="o">(</span><span class="s">"hp"</span><span class="o">);</span>
				<span class="kt">int</span> <span class="n">damage</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>
				<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%d\t%s\t%f\t%d%n"</span><span class="o">,</span> <span class="n">id</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">hp</span><span class="o">,</span> <span class="n">damage</span><span class="o">);</span>
			<span class="o">}</span>
			<span class="c1">// ä¸ä¸€å®šè¦åœ¨è¿™é‡Œå…³é—­ReultSetï¼Œå› ä¸ºStatementå…³é—­çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å…³é—­ResultSet</span>
			<span class="c1">// rs.close();</span>

		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="æ€»æ•°">æ€»æ•°</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span>
				<span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span> <span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();)</span> <span class="o">{</span>

			<span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"select count(*) from hero"</span><span class="o">;</span>

			<span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
			<span class="kt">int</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
			<span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
				<span class="n">total</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
			<span class="o">}</span>

			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"è¡¨Heroä¸­æ€»å…±æœ‰:"</span> <span class="o">+</span> <span class="n">total</span><span class="o">+</span><span class="s">" æ¡æ•°æ®"</span><span class="o">);</span>

		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h2 id="metadata">MetaData</h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"æ–¹æ³•æ‘˜è¦ "</span>
 <span class="nc">String</span> <span class="nf">getCatalogName</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
          <span class="s">"è·å–æŒ‡å®šåˆ—çš„è¡¨ç›®å½•åç§°ã€‚"</span> 
 <span class="nc">String</span> <span class="nf">getColumnClassName</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
          <span class="s">"å¦‚æœè°ƒç”¨æ–¹æ³• ResultSet.getObject ä»åˆ—ä¸­è·å–å€¼ï¼Œåˆ™è¿”å›æ„é€ å…¶å®ä¾‹çš„ Java ç±»çš„å®Œå…¨é™å®šåç§°ã€‚"</span> 
 <span class="kt">int</span> <span class="nf">getColumnCount</span><span class="o">()</span> 
         <span class="s">" è¿”å›æ­¤ ResultSet å¯¹è±¡ä¸­çš„åˆ—æ•°ã€‚ "</span>
 <span class="kt">int</span> <span class="nf">getColumnDisplaySize</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
         <span class="s">" æŒ‡ç¤ºæŒ‡å®šåˆ—çš„æœ€å¤§æ ‡å‡†å®½åº¦ï¼Œä»¥å­—ç¬¦ä¸ºå•ä½ã€‚"</span> 
 <span class="nc">String</span> <span class="nf">getColumnLabel</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
          <span class="s">"è·å–ç”¨äºæ‰“å°è¾“å‡ºå’Œæ˜¾ç¤ºçš„æŒ‡å®šåˆ—çš„å»ºè®®æ ‡é¢˜ã€‚ "</span>
 <span class="nc">String</span> <span class="nf">getColumnName</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
          <span class="s">"è·å–æŒ‡å®šåˆ—çš„åç§°ã€‚"</span> 
 <span class="kt">int</span> <span class="nf">getColumnType</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
          <span class="s">"è·å–æŒ‡å®šåˆ—çš„ SQL ç±»å‹ã€‚"</span> 
 <span class="nc">String</span> <span class="nf">getColumnTypeName</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
          <span class="s">"è·å–æŒ‡å®šåˆ—çš„æ•°æ®åº“ç‰¹å®šçš„ç±»å‹åç§°ã€‚"</span> 
 <span class="kt">int</span> <span class="nf">getPrecision</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
          <span class="s">"è·å–æŒ‡å®šåˆ—çš„æŒ‡å®šåˆ—å®½ã€‚ "</span>
 <span class="kt">int</span> <span class="nf">getScale</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
         <span class="s">" è·å–æŒ‡å®šåˆ—çš„å°æ•°ç‚¹å³è¾¹çš„ä½æ•°ã€‚"</span> 
 <span class="nc">String</span> <span class="nf">getSchemaName</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
          <span class="s">"è·å–æŒ‡å®šåˆ—çš„è¡¨æ¨¡å¼ã€‚"</span> 
 <span class="nc">String</span> <span class="nf">getTableName</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
          <span class="s">"è·å–æŒ‡å®šåˆ—çš„åç§°ã€‚"</span> 
 <span class="kt">boolean</span> <span class="nf">isAutoIncrement</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
          <span class="s">"æŒ‡ç¤ºæ˜¯å¦è‡ªåŠ¨ä¸ºæŒ‡å®šåˆ—è¿›è¡Œç¼–å·ã€‚ "</span>
 <span class="kt">boolean</span> <span class="nf">isCaseSensitive</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
         <span class="s">" æŒ‡ç¤ºåˆ—çš„å¤§å°å†™æ˜¯å¦æœ‰å…³ç³»ã€‚ "</span>
 <span class="kt">boolean</span> <span class="nf">isCurrency</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
         <span class="s">" æŒ‡ç¤ºæŒ‡å®šçš„åˆ—æ˜¯å¦æ˜¯ä¸€ä¸ªå“ˆå¸Œä»£ç å€¼ã€‚ "</span>
 <span class="kt">boolean</span> <span class="nf">isDefinitelyWritable</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
          <span class="s">"æŒ‡ç¤ºåœ¨æŒ‡å®šçš„åˆ—ä¸Šè¿›è¡Œå†™æ“ä½œæ˜¯å¦æ˜ç¡®å¯ä»¥è·å¾—æˆåŠŸã€‚"</span> 
 <span class="kt">int</span> <span class="nf">isNullable</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
         <span class="s">" æŒ‡ç¤ºæŒ‡å®šåˆ—ä¸­çš„å€¼æ˜¯å¦å¯ä»¥ä¸º nullã€‚"</span> 
 <span class="kt">boolean</span> <span class="nf">isReadOnly</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
         <span class="s">" æŒ‡ç¤ºæŒ‡å®šçš„åˆ—æ˜¯å¦æ˜ç¡®ä¸å¯å†™å…¥ã€‚"</span> 
 <span class="kt">boolean</span> <span class="nf">isSearchable</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
         <span class="s">" æŒ‡ç¤ºæ˜¯å¦å¯ä»¥åœ¨ where å­å¥ä¸­ä½¿ç”¨æŒ‡å®šçš„åˆ—ã€‚"</span> 
 <span class="kt">boolean</span> <span class="nf">isSigned</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
         <span class="s">" æŒ‡ç¤ºæŒ‡å®šåˆ—ä¸­çš„å€¼æ˜¯å¦å¸¦æ­£è´Ÿå·ã€‚ "</span>
 <span class="kt">boolean</span> <span class="nf">isWritable</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> 
         <span class="s">" æŒ‡ç¤ºåœ¨æŒ‡å®šçš„åˆ—ä¸Šè¿›è¡Œå†™æ“ä½œæ˜¯å¦å¯ä»¥è·å¾—æˆåŠŸã€‚"</span> 

</code></pre></div></div>

<h2 id="propertyutils">PropertyUtils</h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">static</span> <span class="kt">void</span>	<span class="nf">setProperty</span><span class="o">(</span><span class="nc">Object</span> <span class="n">bean</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">value</span><span class="o">)</span>
<span class="s">"è®¾ç½®æŒ‡å®šbeançš„æŒ‡å®šå±æ€§çš„å€¼ï¼Œæ— è®ºä½¿ç”¨å“ªç§å±æ€§å¼•ç”¨æ ¼å¼ï¼Œéƒ½ä¸è¿›è¡Œç±»å‹è½¬æ¢ã€‚"</span>
</code></pre></div></div>

<h2 id="prepared">Prepared</h2>

<ul>
  <li>å’Œ Statementä¸€æ ·ï¼ŒPreparedStatementä¹Ÿæ˜¯ç”¨æ¥æ‰§è¡Œsqlè¯­å¥çš„</li>
  <li>ä¸åˆ›å»ºStatementä¸åŒçš„æ˜¯ï¼Œéœ€è¦æ ¹æ®sqlè¯­å¥åˆ›å»ºPreparedStatement</li>
  <li>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜èƒ½å¤Ÿé€šè¿‡è®¾ç½®å‚æ•°ï¼ŒæŒ‡å®šç›¸åº”çš„å€¼ï¼Œè€Œä¸æ˜¯Statementé‚£æ ·ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
   
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
   
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
 
        <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"insert into hero values(null,?,?,?)"</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
        	<span class="c1">// æ ¹æ®sqlè¯­å¥åˆ›å»ºPreparedStatement</span>
            <span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
        <span class="o">)</span> <span class="o">{</span>
        	
            <span class="c1">// è®¾ç½®å‚æ•°</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">"æè«"</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setFloat</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mf">313.0f</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>
            <span class="c1">// æ‰§è¡Œ</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
 
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
   
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="ä¼˜ç‚¹1">ä¼˜ç‚¹1</h3>

<ul>
  <li>Statement éœ€è¦è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¯è¯»æ€§å’Œç»´æŠ¤æ€§æ¯”è¾ƒå·®</li>
  <li><code class="language-plaintext highlighter-rouge">String sql = "insert into hero values(null,"+"'æè«'"+","+313.0f+","+50+")";</code></li>
  <li>PreparedStatement ä½¿ç”¨å‚æ•°è®¾ç½®ï¼Œå¯è¯»æ€§å¥½ï¼Œä¸æ˜“çŠ¯é”™</li>
  <li><code class="language-plaintext highlighter-rouge">String sql = "insert into hero values(null,?,?,?)";</code></li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
 
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
 
        <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"insert into hero values(null,?,?,?)"</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span> 
            <span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span> 
            <span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
        <span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Statementéœ€è¦è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¯è¯»æ€§å’Œç»´ä¿®æ€§æ¯”è¾ƒå·®</span>
            <span class="nc">String</span> <span class="n">sql0</span> <span class="o">=</span> <span class="s">"insert into hero values(null,"</span> <span class="o">+</span> <span class="s">"'æè«'"</span> <span class="o">+</span> <span class="s">","</span> <span class="o">+</span> <span class="mf">313.0f</span> <span class="o">+</span> <span class="s">","</span> <span class="o">+</span> <span class="mi">50</span> <span class="o">+</span> <span class="s">")"</span><span class="o">;</span>
            <span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sql0</span><span class="o">);</span>
 
            <span class="c1">// PreparedStatement ä½¿ç”¨å‚æ•°è®¾ç½®ï¼Œå¯è¯»æ€§å¥½ï¼Œä¸æ˜“çŠ¯é”™</span>
            <span class="c1">// "insert into hero values(null,?,?,?)";</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">"æè«"</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setFloat</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mf">313.0f</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
 
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="ä¼˜ç‚¹2">ä¼˜ç‚¹2</h3>

<ul>
  <li>PreparedStatementæœ‰é¢„ç¼–è¯‘æœºåˆ¶ï¼Œæ€§èƒ½æ¯”Statementæ›´å¿«</li>
</ul>

<h3 id="ä¼˜ç‚¹3">ä¼˜ç‚¹3</h3>

<ul>
  <li>é˜²æ­¢SQLæ³¨å…¥å¼æ”»å‡»</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
 
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
 
        <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from hero where name = ?"</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
        		<span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
        <span class="o">)</span> <span class="o">{</span>
            <span class="c1">// å‡è®¾nameæ˜¯ç”¨æˆ·æäº¤æ¥çš„æ•°æ®</span>
            <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"'ç›–ä¼¦' OR 1=1"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">sql0</span> <span class="o">=</span> <span class="s">"select * from hero where name = "</span> <span class="o">+</span> <span class="n">name</span><span class="o">;</span>
            <span class="c1">// æ‹¼æ¥å‡ºæ¥çš„SQLè¯­å¥å°±æ˜¯</span>
            <span class="c1">// select * from hero where name = 'ç›–ä¼¦' OR 1=1</span>
            <span class="c1">// å› ä¸ºæœ‰OR 1=1ï¼Œæ‰€ä»¥æ’æˆç«‹</span>
            <span class="c1">// é‚£ä¹ˆå°±ä¼šæŠŠæ‰€æœ‰çš„è‹±é›„éƒ½æŸ¥å‡ºæ¥ï¼Œè€Œä¸åªæ˜¯ç›–ä¼¦</span>
            <span class="c1">// å¦‚æœHeroè¡¨é‡Œçš„æ•°æ®æ—¶æµ·é‡çš„ï¼Œæ¯”å¦‚å‡ ç™¾ä¸‡æ¡ï¼ŒæŠŠè¿™ä¸ªè¡¨é‡Œçš„æ•°æ®å…¨éƒ¨æŸ¥å‡ºæ¥</span>
            <span class="c1">// ä¼šè®©æ•°æ®åº“è´Ÿè½½å˜é«˜ï¼ŒCPU100%ï¼Œå†…å­˜æ¶ˆè€—å…‰ï¼Œå“åº”å˜å¾—æå…¶ç¼“æ…¢</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sql0</span><span class="o">);</span>
 
            <span class="nc">ResultSet</span> <span class="n">rs0</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="n">sql0</span><span class="o">);</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">rs0</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">String</span> <span class="n">heroName</span> <span class="o">=</span> <span class="n">rs0</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">heroName</span><span class="o">);</span>
            <span class="o">}</span>
 
            <span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sql0</span><span class="o">);</span>
 
            <span class="c1">// ä½¿ç”¨é¢„ç¼–è¯‘Statementå°±å¯ä»¥æœç»SQLæ³¨å…¥</span>
 
            <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>
 
            <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
            <span class="c1">// æŸ¥ä¸å‡ºæ•°æ®å‡ºæ¥</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">String</span> <span class="n">heroName</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">heroName</span><span class="o">);</span>
            <span class="o">}</span>

		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
 
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h2 id="executeåŒºåˆ«">executeåŒºåˆ«</h2>

<ul>
  <li>executeä¸executeUpdateçš„ç›¸åŒç‚¹ï¼šéƒ½å¯ä»¥æ‰§è¡Œå¢åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
			<span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();)</span> <span class="o">{</span>

			<span class="nc">String</span> <span class="n">sqlInsert</span> <span class="o">=</span> <span class="s">"insert into Hero values (null,'ç›–ä¼¦',616,100)"</span><span class="o">;</span>
			<span class="nc">String</span> <span class="n">sqlDelete</span> <span class="o">=</span> <span class="s">"delete from Hero where id = 100"</span><span class="o">;</span>
			<span class="nc">String</span> <span class="n">sqlUpdate</span> <span class="o">=</span> <span class="s">"update Hero set hp = 300 where id = 100"</span><span class="o">;</span>

			<span class="c1">// ç›¸åŒç‚¹ï¼šéƒ½å¯ä»¥æ‰§è¡Œå¢åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹</span>

			<span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sqlInsert</span><span class="o">);</span>
			<span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sqlDelete</span><span class="o">);</span>
			<span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sqlUpdate</span><span class="o">);</span>
			<span class="n">s</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="n">sqlInsert</span><span class="o">);</span>
			<span class="n">s</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="n">sqlDelete</span><span class="o">);</span>
			<span class="n">s</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="n">sqlUpdate</span><span class="o">);</span>

		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>ä¸åŒ1ï¼š
executeå¯ä»¥æ‰§è¡ŒæŸ¥è¯¢è¯­å¥
ç„¶åé€šè¿‡getResultSetï¼ŒæŠŠç»“æœé›†å–å‡ºæ¥
executeUpdateä¸èƒ½æ‰§è¡ŒæŸ¥è¯¢è¯­å¥</li>
  <li>ä¸åŒ2:
executeè¿”å›booleanç±»å‹ï¼Œtrueè¡¨ç¤ºæ‰§è¡Œçš„æ˜¯æŸ¥è¯¢è¯­å¥ï¼Œfalseè¡¨ç¤ºæ‰§è¡Œçš„æ˜¯insert,delete,updateç­‰ç­‰
executeUpdateè¿”å›çš„æ˜¯intï¼Œè¡¨ç¤ºæœ‰å¤šå°‘æ¡æ•°æ®å—åˆ°äº†å½±å“</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
 
		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
			<span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();)</span> <span class="o">{</span>
 
            <span class="c1">// ä¸åŒ1ï¼šexecuteå¯ä»¥æ‰§è¡ŒæŸ¥è¯¢è¯­å¥</span>
            <span class="c1">// ç„¶åé€šè¿‡getResultSetï¼ŒæŠŠç»“æœé›†å–å‡ºæ¥</span>
            <span class="nc">String</span> <span class="n">sqlSelect</span> <span class="o">=</span> <span class="s">"select * from hero"</span><span class="o">;</span>
 
            <span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sqlSelect</span><span class="o">);</span>
            <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">getResultSet</span><span class="o">();</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"id"</span><span class="o">));</span>
            <span class="o">}</span>
 
            <span class="c1">// executeUpdateä¸èƒ½æ‰§è¡ŒæŸ¥è¯¢è¯­å¥</span>
            <span class="c1">// s.executeUpdate(sqlSelect);</span>
 
            <span class="c1">// ä¸åŒ2:</span>
            <span class="c1">// executeè¿”å›booleanç±»å‹ï¼Œtrueè¡¨ç¤ºæ‰§è¡Œçš„æ˜¯æŸ¥è¯¢è¯­å¥ï¼Œfalseè¡¨ç¤ºæ‰§è¡Œçš„æ˜¯insert,delete,updateç­‰ç­‰</span>
            <span class="kt">boolean</span> <span class="n">isSelect</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sqlSelect</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">isSelect</span><span class="o">);</span>
 
            <span class="c1">// executeUpdateè¿”å›çš„æ˜¯intï¼Œè¡¨ç¤ºæœ‰å¤šå°‘æ¡æ•°æ®å—åˆ°äº†å½±å“</span>
            <span class="nc">String</span> <span class="n">sqlUpdate</span> <span class="o">=</span> <span class="s">"update Hero set hp = 300 where id &lt; 100"</span><span class="o">;</span>
            <span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="n">sqlUpdate</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
 
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
 
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h2 id="ç‰¹æ®Šæ“ä½œ">ç‰¹æ®Šæ“ä½œ</h2>

<h3 id="è‡ªå¢é•¿id">è‡ªå¢é•¿id</h3>

<ul>
  <li>åœ¨Statementé€šè¿‡executeæˆ–è€…executeUpdateæ‰§è¡Œå®Œæ’å…¥è¯­å¥åï¼ŒMySQLä¼šä¸ºæ–°æ’å…¥çš„æ•°æ®åˆ†é…ä¸€ä¸ªè‡ªå¢é•¿idï¼Œ(å‰ææ˜¯è¿™ä¸ªè¡¨çš„idè®¾ç½®ä¸ºäº†è‡ªå¢é•¿,åœ¨Mysqlåˆ›å»ºè¡¨çš„æ—¶å€™ï¼ŒAUTO_INCREMENTå°±è¡¨ç¤ºè‡ªå¢é•¿)</li>
  <li>ä½†æ˜¯æ— è®ºæ˜¯executeè¿˜æ˜¯executeUpdateéƒ½ä¸ä¼šè¿”å›è¿™ä¸ªè‡ªå¢é•¿idæ˜¯å¤šå°‘ã€‚éœ€è¦é€šè¿‡Statementçš„getGeneratedKeysè·å–è¯¥id</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
         <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"insert into hero values(null,?,?,?)"</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
        		<span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="nc">Statement</span><span class="o">.</span><span class="na">RETURN_GENERATED_KEYS</span><span class="o">);</span>           
                <span class="o">)</span> <span class="o">{</span>
 
            <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">"ç›–ä¼¦"</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setFloat</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">616</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">100</span><span class="o">);</span>
  
            <span class="c1">// æ‰§è¡Œæ’å…¥è¯­å¥</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
  
            <span class="c1">// åœ¨æ‰§è¡Œå®Œæ’å…¥è¯­å¥åï¼ŒMySQLä¼šä¸ºæ–°æ’å…¥çš„æ•°æ®åˆ†é…ä¸€ä¸ªè‡ªå¢é•¿id</span>
            <span class="c1">// JDBCé€šè¿‡getGeneratedKeysè·å–è¯¥id</span>
            <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="na">getGeneratedKeys</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
            <span class="o">}</span>
  
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
  
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="å…ƒæ•°æ®è·å–">å…ƒæ•°æ®è·å–</h3>

<ul>
  <li>å…ƒæ•°æ®æ¦‚å¿µï¼š
å’Œæ•°æ®åº“æœåŠ¡å™¨ç›¸å…³çš„æ•°æ®ï¼Œæ¯”å¦‚æ•°æ®åº“ç‰ˆæœ¬ï¼Œæœ‰å“ªäº›è¡¨ï¼Œè¡¨æœ‰å“ªäº›å­—æ®µï¼Œå­—æ®µç±»å‹æ˜¯ä»€ä¹ˆç­‰ç­‰ã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DatabaseMetaData</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);)</span> <span class="o">{</span>
 
            <span class="c1">// æŸ¥çœ‹æ•°æ®åº“å±‚é¢çš„å…ƒæ•°æ®</span>
            <span class="c1">// å³æ•°æ®åº“æœåŠ¡å™¨ç‰ˆæœ¬ï¼Œé©±åŠ¨ç‰ˆæœ¬ï¼Œéƒ½æœ‰å“ªäº›æ•°æ®åº“ç­‰ç­‰</span>
 
            <span class="nc">DatabaseMetaData</span> <span class="n">dbmd</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getMetaData</span><span class="o">();</span>
 
            <span class="c1">// è·å–æ•°æ®åº“æœåŠ¡å™¨äº§å“åç§°</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"æ•°æ®åº“äº§å“åç§°:\t"</span><span class="o">+</span><span class="n">dbmd</span><span class="o">.</span><span class="na">getDatabaseProductName</span><span class="o">());</span>
            <span class="c1">// è·å–æ•°æ®åº“æœåŠ¡å™¨äº§å“ç‰ˆæœ¬å·</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"æ•°æ®åº“äº§å“ç‰ˆæœ¬:\t"</span><span class="o">+</span><span class="n">dbmd</span><span class="o">.</span><span class="na">getDatabaseProductVersion</span><span class="o">());</span>
            <span class="c1">// è·å–æ•°æ®åº“æœåŠ¡å™¨ç”¨ä½œç±»åˆ«å’Œè¡¨åä¹‹é—´çš„åˆ†éš”ç¬¦ å¦‚test.user</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"æ•°æ®åº“å’Œè¡¨åˆ†éš”ç¬¦:\t"</span><span class="o">+</span><span class="n">dbmd</span><span class="o">.</span><span class="na">getCatalogSeparator</span><span class="o">());</span>
            <span class="c1">// è·å–é©±åŠ¨ç‰ˆæœ¬</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"é©±åŠ¨ç‰ˆæœ¬:\t"</span><span class="o">+</span><span class="n">dbmd</span><span class="o">.</span><span class="na">getDriverVersion</span><span class="o">());</span>
 
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"å¯ç”¨çš„æ•°æ®åº“åˆ—è¡¨ï¼š"</span><span class="o">);</span>
            <span class="c1">// è·å–æ•°æ®åº“åç§°</span>
            <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">dbmd</span><span class="o">.</span><span class="na">getCatalogs</span><span class="o">();</span>
 
            <span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"æ•°æ®åº“åç§°:\t"</span><span class="o">+</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
            <span class="o">}</span>
 
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
 
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/878.png" alt="" /></p>

<h2 id="äº‹åŠ¡">äº‹åŠ¡</h2>

<h3 id="å±æ€§">å±æ€§</h3>

<ul>
  <li>åŸå­æ€§ï¼šåŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚</li>
  <li>ä¸€è‡´æ€§ï¼šäº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€</li>
  <li>éš”ç¦»æ€§ï¼šäº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œä»¥åŠä½¿ç”¨çš„æ•°æ®å¯¹å¹¶å‘çš„å…¶ä»–äº‹åŠ¡æ˜¯éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°</li>
  <li>æŒä¹…æ€§ï¼šæŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œä»–å¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜æ˜¯æ°¸ä¹…æ€§çš„ï¼Œæ¥ä¸‹æ¥çš„å…¶ä»–æ“ä½œå’Œæ•°æ®åº“æ•…éšœä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“</li>
</ul>

<h3 id="å¹¶å‘é—®é¢˜">å¹¶å‘é—®é¢˜</h3>

<ul>
  <li>è„è¯»ï¼šå¯¹äºä¸¤ä¸ªäº‹åŠ¡T1,T2ã€‚T1è¯»å–äº†å·²ç»è¢«T2æ›´æ–°ä½†è¿˜æ²¡æœ‰è¢«æäº¤çš„å­—æ®µï¼Œä¹‹åï¼Œè‹¥T2å›æ»šï¼ŒT1è¯»å–çš„å†…å®¹å°±æ˜¯ä¸´æ—¶å¹¶ä¸”æ— æ•ˆçš„ï¼Œä¸€å®šè¦é¿å…è„è¯»</li>
  <li>ä¸å¯é‡å¤è¯»ï¼šå¯¹äºä¸¤ä¸ªäº‹åŠ¡T1,T2ã€‚T1è¯»å–äº†ä¸€ä¸ªå­—æ®µï¼Œç„¶åT2æ›´æ–°äº†è¿™ä¸ªå­—æ®µï¼Œä¹‹åï¼ŒT1å†æ¬¡è¯»å–åŒä¸€ä¸ªå­—æ®µï¼Œå€¼å°±ä¸åŒäº†</li>
  <li>å¹»è¯»ï¼šå¯¹äºä¸¤ä¸ªäº‹åŠ¡T1,T2ã€‚T1ä»ä¸€ä¸ªè¡¨ä¸­è¯»å–ä¸€ä¸ªå­—æ®µï¼Œç„¶åT2åœ¨è¯¥è¡¨ä¸­æ’å…¥äº†ä¸€äº›æ–°çš„è¡Œï¼Œä¹‹åï¼Œå¦‚æœT1å†æ¬¡è¯»å–åŒä¸€ä¸ªè¡¨ï¼Œå°±ä¼šå¤šå‡ºå‡ è¡Œ</li>
</ul>

<h3 id="ä¸ä½¿ç”¨">ä¸ä½¿ç”¨</h3>

<ul>
  <li>æ²¡æœ‰äº‹åŠ¡çš„å‰æä¸‹ï¼Œå‡è®¾ä¸šåŠ¡æ“ä½œæ˜¯ï¼šåŠ è¡€ï¼Œå‡è¡€å„åšä¸€æ¬¡ï¼Œç»“æŸåï¼Œè‹±é›„çš„è¡€é‡ä¸å˜ï¼Œè€Œå‡è¡€çš„SQLä¸å°å¿ƒå†™é”™å†™æˆäº† updata(è€Œéupdate)é‚£ä¹ˆæœ€åç»“æœæ˜¯è¡€é‡å¢åŠ äº†ï¼Œè€ŒéæœŸæœ›çš„ä¸å˜</li>
</ul>

<h3 id="ä½¿ç”¨äº‹åŠ¡">ä½¿ç”¨äº‹åŠ¡</h3>

<ul>
  <li>åœ¨äº‹åŠ¡ä¸­çš„å¤šä¸ªæ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥</li>
  <li>é€šè¿‡ c.setAutoCommit(false);å…³é—­è‡ªåŠ¨æäº¤</li>
  <li>ä½¿ç”¨ c.commit();è¿›è¡Œæ‰‹åŠ¨æäº¤</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
			<span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();)</span> <span class="o">{</span>
 
            <span class="c1">// æœ‰äº‹åŠ¡çš„å‰æä¸‹</span>
            <span class="c1">// åœ¨äº‹åŠ¡ä¸­çš„å¤šä¸ªæ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥</span>
 
            <span class="n">c</span><span class="o">.</span><span class="na">setAutoCommit</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
 
            <span class="c1">// åŠ è¡€çš„SQL</span>
            <span class="nc">String</span> <span class="n">sql1</span> <span class="o">=</span> <span class="s">"update hero set hp = hp +1 where id = 22"</span><span class="o">;</span>
            <span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sql1</span><span class="o">);</span>
 
            <span class="c1">// å‡è¡€çš„SQL</span>
            <span class="c1">// ä¸å°å¿ƒå†™é”™å†™æˆäº† updata(è€Œéupdate)</span>
 
            <span class="nc">String</span> <span class="n">sql2</span> <span class="o">=</span> <span class="s">"updata hero set hp = hp -1 where id = 22"</span><span class="o">;</span>
            <span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sql2</span><span class="o">);</span>
 
            <span class="c1">// æ‰‹åŠ¨æäº¤</span>
            <span class="n">c</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
 
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
 
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>åœ¨Mysqlä¸­ï¼Œåªæœ‰å½“è¡¨çš„ç±»å‹æ˜¯INNODBçš„æ—¶å€™ï¼Œæ‰æ”¯æŒäº‹åŠ¡ï¼Œæ‰€ä»¥éœ€è¦æŠŠè¡¨çš„ç±»å‹è®¾ç½®ä¸ºINNODB,å¦åˆ™æ— æ³•è§‚å¯Ÿåˆ°äº‹åŠ¡.</li>
  <li>ä¿®æ”¹è¡¨çš„ç±»å‹ä¸ºINNODBçš„SQLï¼š</li>
  <li><code class="language-plaintext highlighter-rouge">alter table hero ENGINE  = innodb;</code></li>
  <li>æŸ¥çœ‹è¡¨çš„ç±»å‹çš„SQL</li>
  <li><code class="language-plaintext highlighter-rouge">show table status from how2java; </code></li>
</ul>

<h2 id="orm">ORM</h2>

<ul>
  <li>ORM=Object Relationship Database Mapping</li>
  <li>å¯¹è±¡å’Œå…³ç³»æ•°æ®åº“çš„æ˜ å°„</li>
  <li>ç®€å•è¯´ï¼Œä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹åº”æ•°æ®åº“é‡Œçš„ä¸€æ¡è®°å½•</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Hero</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Hero</span> <span class="n">hero</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
			<span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();)</span> <span class="o">{</span>

            <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from hero where id = "</span> <span class="o">+</span> <span class="n">id</span><span class="o">;</span>
  
            <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
  
            <span class="c1">// å› ä¸ºidæ˜¯å”¯ä¸€çš„ï¼ŒResultSetæœ€å¤šåªèƒ½æœ‰ä¸€æ¡è®°å½•</span>
            <span class="c1">// æ‰€ä»¥ä½¿ç”¨ifä»£æ›¿while</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">hero</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
                <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
                <span class="kt">float</span> <span class="n">hp</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getFloat</span><span class="o">(</span><span class="s">"hp"</span><span class="o">);</span>
                <span class="kt">int</span> <span class="n">damage</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="n">hp</span><span class="o">;</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="n">damage</span><span class="o">;</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
            <span class="o">}</span>
  
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
        <span class="k">return</span> <span class="n">hero</span><span class="o">;</span>
  
    <span class="o">}</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
          
        <span class="nc">Hero</span> <span class="n">h</span> <span class="o">=</span> <span class="n">get</span><span class="o">(</span><span class="mi">22</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
  
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h2 id="dao">DAO</h2>

<ul>
  <li>DAO=DataAccess Object</li>
  <li>æ•°æ®åº“è®¿é—®å¯¹è±¡</li>
  <li>æŠŠæ•°æ®åº“ç›¸å…³çš„æ“ä½œéƒ½å°è£…åœ¨è¿™ä¸ªç±»é‡Œé¢ï¼Œå…¶ä»–åœ°æ–¹çœ‹ä¸åˆ°JDBCçš„ä»£ç </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">DAO</span><span class="o">{</span>
    <span class="c1">//å¢åŠ </span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">hero</span><span class="o">);</span>
    <span class="c1">//ä¿®æ”¹</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">hero</span><span class="o">);</span>
    <span class="c1">//åˆ é™¤</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">);</span>
    <span class="c1">//è·å–</span>
    <span class="kd">public</span> <span class="nc">Hero</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">);</span>
    <span class="c1">//æŸ¥è¯¢</span>
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Hero</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">();</span>
    <span class="c1">//åˆ†é¡µæŸ¥è¯¢</span>
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Hero</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">(</span><span class="kt">int</span> <span class="n">start</span><span class="o">,</span> <span class="kt">int</span> <span class="n">count</span><span class="o">);</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HeroDAO</span> <span class="kd">implements</span> <span class="no">DAO</span><span class="o">{</span>
 
    <span class="kd">public</span> <span class="nf">HeroDAO</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="nc">Connection</span> <span class="nf">getConnection</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span> <span class="s">"root"</span><span class="o">,</span>
                <span class="s">"admin"</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getTotal</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="n">getConnection</span><span class="o">();</span> <span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();)</span> <span class="o">{</span>
 
            <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"select count(*) from hero"</span><span class="o">;</span>
 
            <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">total</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
 
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"total:"</span> <span class="o">+</span> <span class="n">total</span><span class="o">);</span>
 
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
 
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">total</span><span class="o">;</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">hero</span><span class="o">)</span> <span class="o">{</span>
 
        <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"insert into hero values(null,?,?,?)"</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="n">getConnection</span><span class="o">();</span> <span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);)</span> <span class="o">{</span>
 
            <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">hero</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setFloat</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">hero</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">hero</span><span class="o">.</span><span class="na">damage</span><span class="o">);</span>
 
            <span class="n">ps</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
 
            <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="na">getGeneratedKeys</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
 
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">hero</span><span class="o">)</span> <span class="o">{</span>
 
        <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"update hero set name= ?, hp = ? , damage = ? where id = ?"</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="n">getConnection</span><span class="o">();</span> <span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);)</span> <span class="o">{</span>
 
            <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">hero</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setFloat</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">hero</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">hero</span><span class="o">.</span><span class="na">damage</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="n">hero</span><span class="o">.</span><span class="na">id</span><span class="o">);</span>
 
            <span class="n">ps</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
 
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
 
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
 
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
 
        <span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="n">getConnection</span><span class="o">();</span> <span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();)</span> <span class="o">{</span>
 
            <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"delete from hero where id = "</span> <span class="o">+</span> <span class="n">id</span><span class="o">;</span>
 
            <span class="n">s</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
 
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
 
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="nc">Hero</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Hero</span> <span class="n">hero</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
 
        <span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="n">getConnection</span><span class="o">();</span> <span class="nc">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();)</span> <span class="o">{</span>
 
            <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from hero where id = "</span> <span class="o">+</span> <span class="n">id</span><span class="o">;</span>
 
            <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
 
            <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">hero</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
                <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
                <span class="kt">float</span> <span class="n">hp</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getFloat</span><span class="o">(</span><span class="s">"hp"</span><span class="o">);</span>
                <span class="kt">int</span> <span class="n">damage</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="n">hp</span><span class="o">;</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="n">damage</span><span class="o">;</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
            <span class="o">}</span>
 
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
 
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hero</span><span class="o">;</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Hero</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">list</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="nc">Short</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Hero</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">(</span><span class="kt">int</span> <span class="n">start</span><span class="o">,</span> <span class="kt">int</span> <span class="n">count</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Hero</span><span class="o">&gt;</span> <span class="n">heros</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">Hero</span><span class="o">&gt;();</span>
 
        <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from hero order by id desc limit ?,? "</span><span class="o">;</span>
 
        <span class="k">try</span> <span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="n">getConnection</span><span class="o">();</span> <span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);)</span> <span class="o">{</span>
 
            <span class="n">ps</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">start</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">count</span><span class="o">);</span>
 
            <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
 
            <span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">Hero</span> <span class="n">hero</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
                <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
                <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
                <span class="kt">float</span> <span class="n">hp</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getFloat</span><span class="o">(</span><span class="s">"hp"</span><span class="o">);</span>
                <span class="kt">int</span> <span class="n">damage</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="n">hp</span><span class="o">;</span>
                <span class="n">hero</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="n">damage</span><span class="o">;</span>
                <span class="n">heros</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">hero</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
 
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">heros</span><span class="o">;</span>
    <span class="o">}</span>
 
<span class="o">}</span>

</code></pre></div></div>

<h2 id="æ•°æ®åº“è¿æ¥æ± ">æ•°æ®åº“è¿æ¥æ± </h2>

<h3 id="ä¼ ç»Ÿæ–¹å¼">ä¼ ç»Ÿæ–¹å¼</h3>

<ul>
  <li>å½“æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½éœ€è¦è¿æ¥æ•°æ®åº“æ‰§è¡ŒSQLè¯­å¥çš„è¯ï¼Œé‚£ä¹ˆæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªè¿æ¥ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨å®Œæ¯•åï¼Œå…³é—­è¿æ¥ã€‚</li>
  <li>åˆ›å»ºè¿æ¥å’Œå…³é—­è¿æ¥çš„è¿‡ç¨‹ä¹Ÿæ˜¯æ¯”è¾ƒæ¶ˆè€—æ—¶é—´çš„ï¼Œå½“å¤šçº¿ç¨‹å¹¶å‘çš„æ—¶å€™ï¼Œç³»ç»Ÿå°±ä¼šå˜å¾—å¾ˆå¡é¡¿ã€‚</li>
  <li>åŒæ—¶ï¼Œä¸€ä¸ªæ•°æ®åº“åŒæ—¶æ”¯æŒçš„è¿æ¥æ€»æ•°ä¹Ÿæ˜¯æœ‰é™çš„ï¼Œå¦‚æœå¤šçº¿ç¨‹å¹¶å‘é‡å¾ˆå¤§ï¼Œé‚£ä¹ˆæ•°æ®åº“è¿æ¥çš„æ€»æ•°å°±ä¼šè¢«æ¶ˆè€—å…‰ï¼Œåç»­çº¿ç¨‹å‘èµ·çš„æ•°æ®åº“è¿æ¥å°±ä¼šå¤±è´¥ã€‚</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/2654.png" alt="" /></p>

<h3 id="ä½¿ç”¨æ± ">ä½¿ç”¨æ± </h3>

<ul>
  <li>ä¸ä¼ ç»Ÿæ–¹å¼ä¸åŒï¼Œè¿æ¥æ± åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå°±ä¼šåˆ›å»ºå¥½ä¸€å®šæ•°é‡çš„è¿æ¥ã€‚</li>
  <li>å¦‚æœæœ‰ä»»ä½•çº¿ç¨‹éœ€è¦ä½¿ç”¨è¿æ¥ï¼Œé‚£ä¹ˆå°±ä»è¿æ¥æ± é‡Œé¢å€Ÿç”¨ï¼Œè€Œä¸æ˜¯è‡ªå·±é‡æ–°åˆ›å»º</li>
  <li>ä½¿ç”¨å®Œæ¯•åï¼ŒåˆæŠŠè¿™ä¸ªè¿æ¥å½’è¿˜ç»™è¿æ¥æ± ä¾›ä¸‹ä¸€æ¬¡æˆ–è€…å…¶ä»–çº¿ç¨‹ä½¿ç”¨</li>
  <li>å€˜è‹¥å‘ç”Ÿå¤šçº¿ç¨‹å¹¶å‘æƒ…å†µï¼Œè¿æ¥æ± é‡Œçš„è¿æ¥è¢«å€Ÿç”¨å…‰äº†ï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹å°±ä¼šä¸´æ—¶ç­‰å¾…ï¼Œç›´åˆ°æœ‰è¿æ¥è¢«å½’è¿˜å›æ¥ï¼Œå†ç»§ç»­ä½¿ç”¨</li>
  <li>æ•´ä¸ªè¿‡ç¨‹ï¼Œè¿™äº›è¿æ¥éƒ½ä¸ä¼šè¢«å…³é—­ï¼Œè€Œæ˜¯ä¸æ–­çš„è¢«å¾ªç¯ä½¿ç”¨ï¼Œä»è€ŒèŠ‚çº¦äº†å¯åŠ¨å’Œå…³é—­è¿æ¥çš„æ—¶é—´</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/2655.png" alt="" /></p>

<h3 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h3>

<ul>
  <li>ConnectionPool() æ„é€ æ–¹æ³•çº¦å®šäº†è¿™ä¸ªè¿æ¥æ± ä¸€å…±æœ‰å¤šå°‘è¿æ¥</li>
  <li>åœ¨init() åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œåˆ›å»ºäº†sizeæ¡è¿æ¥ã€‚ æ³¨æ„ï¼Œè¿™é‡Œä¸èƒ½ä½¿ç”¨try-with-resourceè¿™ç§è‡ªåŠ¨å…³é—­è¿æ¥çš„æ–¹å¼ï¼Œå› ä¸ºè¿æ¥æ°æ°éœ€è¦ä¿æŒä¸å…³é—­çŠ¶æ€ï¼Œä¾›åç»­å¾ªç¯ä½¿ç”¨</li>
  <li>getConnectionï¼Œ åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæ˜¯ç©ºçš„å°±waitç­‰å¾…ï¼Œå¦åˆ™å°±å€Ÿç”¨ä¸€æ¡è¿æ¥å‡ºå»</li>
  <li>returnConnectionï¼Œ åœ¨ä½¿ç”¨å®Œæ¯•åï¼Œå½’è¿˜è¿™ä¸ªè¿æ¥åˆ°è¿æ¥æ± ï¼Œå¹¶ä¸”åœ¨å½’è¿˜å®Œæ¯•åï¼Œè°ƒç”¨notifyAllï¼Œé€šçŸ¥é‚£äº›ç­‰å¾…çš„çº¿ç¨‹ï¼Œæœ‰æ–°çš„è¿æ¥å¯ä»¥å€Ÿç”¨äº†ã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConnectionPool</span> <span class="o">{</span>
 
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Connection</span><span class="o">&gt;</span> <span class="n">cs</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">Connection</span><span class="o">&gt;();</span>
 
    <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
 
    <span class="kd">public</span> <span class="nf">ConnectionPool</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">size</span> <span class="o">=</span> <span class="n">size</span><span class="o">;</span>
        <span class="n">init</span><span class="o">();</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
         
        <span class="c1">//è¿™é‡Œæ°æ°ä¸èƒ½ä½¿ç”¨try-with-resourceçš„æ–¹å¼ï¼Œå› ä¸ºè¿™äº›è¿æ¥éƒ½éœ€è¦æ˜¯"æ´»"çš„ï¼Œä¸è¦è¢«è‡ªåŠ¨å…³é—­äº†</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="nc">DriverManager</span>
                        <span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span><span class="o">,</span> <span class="s">"root"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
 
                <span class="n">cs</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
 
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kd">synchronized</span> <span class="nc">Connection</span> <span class="nf">getConnection</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">cs</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">wait</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">c</span><span class="o">;</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">returnConnection</span><span class="o">(</span><span class="nc">Connection</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">cs</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">notifyAll</span><span class="o">();</span>
    <span class="o">}</span>
 
<span class="o">}</span>

</code></pre></div></div>

<h3 id="æµ‹è¯•">æµ‹è¯•</h3>

<ul>
  <li>é¦–å…ˆåˆå§‹åŒ–ä¸€ä¸ªæœ‰3æ¡è¿æ¥çš„æ•°æ®åº“è¿æ¥æ± </li>
  <li>ç„¶ååˆ›å»º100ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šä»è¿æ¥æ± ä¸­å€Ÿç”¨è¿æ¥ï¼Œå¹¶ä¸”åœ¨å€Ÿç”¨ä¹‹åï¼Œå½’è¿˜è¿æ¥ã€‚ æ‹¿åˆ°è¿æ¥ä¹‹åï¼Œæ‰§è¡Œä¸€ä¸ªè€—æ—¶1ç§’çš„SQLè¯­å¥ã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">jdbc</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">jdbc.ConnectionPool</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestConnectionPool</span> <span class="o">{</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ConnectionPool</span> <span class="n">cp</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConnectionPool</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">new</span> <span class="nf">WorkingThread</span><span class="o">(</span><span class="s">"working thread"</span> <span class="o">+</span> <span class="n">i</span><span class="o">,</span> <span class="n">cp</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
        <span class="o">}</span>
  
    <span class="o">}</span>
<span class="o">}</span>
  
<span class="kd">class</span> <span class="nc">WorkingThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">ConnectionPool</span> <span class="n">cp</span><span class="o">;</span>
  
    <span class="kd">public</span> <span class="nf">WorkingThread</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">ConnectionPool</span> <span class="n">cp</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">cp</span> <span class="o">=</span> <span class="n">cp</span><span class="o">;</span>
    <span class="o">}</span>
  
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Connection</span> <span class="n">c</span> <span class="o">=</span> <span class="n">cp</span><span class="o">.</span><span class="na">getConnection</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">":\t è·å–äº†ä¸€æ ¹è¿æ¥ï¼Œå¹¶å¼€å§‹å·¥ä½œ"</span>  <span class="o">);</span>
        <span class="k">try</span> <span class="o">(</span><span class="nc">Statement</span> <span class="n">st</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">createStatement</span><span class="o">()){</span>
            
            <span class="c1">//æ¨¡æ‹Ÿæ—¶è€—ï¼‘ç§’çš„æ•°æ®åº“ï¼³ï¼±ï¼¬è¯­å¥</span>
            <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
            <span class="n">st</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="s">"select * from hero"</span><span class="o">);</span>
  
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="o">|</span> <span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="n">cp</span><span class="o">.</span><span class="na">returnConnection</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/1833.png" alt="" /></p>

<p>æœ¬æ–‡ç« å‚è€ƒè‡ªï¼šhttp://how2j.cn</p>
:ET