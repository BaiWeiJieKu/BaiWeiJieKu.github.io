I"Çş<ul id="markdown-toc">
  <li><a href="#çº¿ç¨‹å¯åŠ¨" id="markdown-toc-çº¿ç¨‹å¯åŠ¨">çº¿ç¨‹å¯åŠ¨</a>    <ul>
      <li><a href="#çº¿ç¨‹æ¦‚å¿µ" id="markdown-toc-çº¿ç¨‹æ¦‚å¿µ">çº¿ç¨‹æ¦‚å¿µ</a></li>
      <li><a href="#åˆ›å»ºçº¿ç¨‹" id="markdown-toc-åˆ›å»ºçº¿ç¨‹">åˆ›å»ºçº¿ç¨‹</a>        <ul>
          <li><a href="#runnableæ¥å£" id="markdown-toc-runnableæ¥å£">Runnableæ¥å£</a></li>
          <li><a href="#åŒ¿åç±»" id="markdown-toc-åŒ¿åç±»">åŒ¿åç±»</a></li>
          <li><a href="#ä¸‰ç§æ–¹å¼" id="markdown-toc-ä¸‰ç§æ–¹å¼">ä¸‰ç§æ–¹å¼</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#çº¿ç¨‹æ–¹æ³•" id="markdown-toc-çº¿ç¨‹æ–¹æ³•">çº¿ç¨‹æ–¹æ³•</a>    <ul>
      <li><a href="#çº¿ç¨‹æš‚åœ" id="markdown-toc-çº¿ç¨‹æš‚åœ">çº¿ç¨‹æš‚åœ</a></li>
      <li><a href="#åŠ å…¥çº¿ç¨‹" id="markdown-toc-åŠ å…¥çº¿ç¨‹">åŠ å…¥çº¿ç¨‹</a></li>
      <li><a href="#ä¼˜å…ˆçº§" id="markdown-toc-ä¼˜å…ˆçº§">ä¼˜å…ˆçº§</a></li>
      <li><a href="#ä¸´æ—¶æš‚åœ" id="markdown-toc-ä¸´æ—¶æš‚åœ">ä¸´æ—¶æš‚åœ</a></li>
      <li><a href="#å®ˆæŠ¤çº¿ç¨‹" id="markdown-toc-å®ˆæŠ¤çº¿ç¨‹">å®ˆæŠ¤çº¿ç¨‹</a></li>
    </ul>
  </li>
  <li><a href="#çº¿ç¨‹åŒæ­¥" id="markdown-toc-çº¿ç¨‹åŒæ­¥">çº¿ç¨‹åŒæ­¥</a>    <ul>
      <li><a href="#åŒæ­¥æ¡ˆä¾‹" id="markdown-toc-åŒæ­¥æ¡ˆä¾‹">åŒæ­¥æ¡ˆä¾‹</a></li>
      <li><a href="#é—®é¢˜åŸå› " id="markdown-toc-é—®é¢˜åŸå› ">é—®é¢˜åŸå› </a></li>
      <li><a href="#è§£å†³æ€è·¯" id="markdown-toc-è§£å†³æ€è·¯">è§£å†³æ€è·¯</a></li>
      <li><a href="#synchronized" id="markdown-toc-synchronized">synchronized</a></li>
    </ul>
  </li>
  <li><a href="#çº¿ç¨‹å®‰å…¨" id="markdown-toc-çº¿ç¨‹å®‰å…¨">çº¿ç¨‹å®‰å…¨</a></li>
  <li><a href="#æ­»é”" id="markdown-toc-æ­»é”">æ­»é”</a></li>
  <li><a href="#äº¤äº’" id="markdown-toc-äº¤äº’">äº¤äº’</a></li>
</ul>
<h2 id="çº¿ç¨‹å¯åŠ¨">çº¿ç¨‹å¯åŠ¨</h2>

<ul>
  <li>å¤šçº¿ç¨‹å³åœ¨åŒä¸€æ—¶é—´ï¼Œå¯ä»¥åšå¤šä»¶äº‹æƒ…ã€‚</li>
  <li>åˆ›å»ºå¤šçº¿ç¨‹æœ‰3ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯<a href="http://how2j.cn/k/thread/thread-start/353.html#step778">ç»§æ‰¿çº¿ç¨‹ç±»</a>,<a href="http://how2j.cn/k/thread/thread-start/353.html#step779">å®ç°Runnableæ¥å£</a>,<a href="http://how2j.cn/k/thread/thread-start/353.html#step780">åŒ¿åç±»</a></li>
</ul>

<h3 id="çº¿ç¨‹æ¦‚å¿µ">çº¿ç¨‹æ¦‚å¿µ</h3>

<ul>
  <li>é¦–å…ˆè¦ç†è§£è¿›ç¨‹(Processor)å’Œçº¿ç¨‹(Thread)çš„åŒºåˆ«</li>
  <li>è¿›ç¨‹ï¼šå¯åŠ¨ä¸€ä¸ªLOL.exeå°±å«ä¸€ä¸ªè¿›ç¨‹ã€‚ æ¥ç€åˆå¯åŠ¨ä¸€ä¸ªDOTA.exeï¼Œè¿™å«ä¸¤ä¸ªè¿›ç¨‹ã€‚</li>
  <li>çº¿ç¨‹ï¼šçº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹å†…éƒ¨åŒæ—¶åšçš„äº‹æƒ…ï¼Œæ¯”å¦‚åœ¨LOLé‡Œï¼Œæœ‰å¾ˆå¤šäº‹æƒ…è¦åŒæ—¶åšï¼Œæ¯”å¦‚â€ç›–ä¼¦â€ å‡»æ€â€œæè«â€ï¼ŒåŒæ—¶â€œèµé‡‘çŒäººâ€åˆåœ¨å‡»æ€â€œç›²åƒ§â€ï¼Œè¿™å°±æ˜¯ç”±å¤šçº¿ç¨‹æ¥å®ç°çš„ã€‚</li>
</ul>

<h3 id="åˆ›å»ºçº¿ç¨‹">åˆ›å»ºçº¿ç¨‹</h3>

<ul>
  <li>ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œå°±å¯ä»¥åšåˆ°ç›–ä¼¦åœ¨æ”»å‡»æè«çš„åŒæ—¶ï¼Œèµé‡‘çŒäººä¹Ÿåœ¨æ”»å‡»ç›²åƒ§</li>
  <li>è®¾è®¡ä¸€ä¸ªç±»KillThread ç»§æ‰¿Threadï¼Œå¹¶ä¸”é‡å†™runæ–¹æ³•</li>
  <li>å¯åŠ¨çº¿ç¨‹åŠæ³•ï¼š å®ä¾‹åŒ–ä¸€ä¸ªKillThreadå¯¹è±¡ï¼Œå¹¶ä¸”è°ƒç”¨å…¶startæ–¹æ³•</li>
  <li>å°±å¯ä»¥è§‚å¯Ÿåˆ° èµé‡‘çŒäººæ”»å‡»ç›²åƒ§çš„åŒæ—¶ï¼Œç›–ä¼¦ä¹Ÿåœ¨æ”»å‡»æè«</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">KillThread</span> <span class="kd">extends</span> <span class="nc">Thread</span><span class="o">{</span>
	
	<span class="kd">private</span> <span class="nc">Hero</span> <span class="n">h1</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">Hero</span> <span class="n">h2</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">KillThread</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h1</span><span class="o">,</span> <span class="nc">Hero</span> <span class="n">h2</span><span class="o">){</span>
		<span class="k">this</span><span class="o">.</span><span class="na">h1</span> <span class="o">=</span> <span class="n">h1</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">h2</span> <span class="o">=</span> <span class="n">h2</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
		<span class="k">while</span><span class="o">(!</span><span class="n">h2</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
			<span class="n">h1</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">h2</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>


</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		
		<span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›–ä¼¦"</span><span class="o">;</span>
		<span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">616</span><span class="o">;</span>
		<span class="n">gareen</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>

		<span class="nc">Hero</span> <span class="n">teemo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">teemo</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"æè«"</span><span class="o">;</span>
		<span class="n">teemo</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">300</span><span class="o">;</span>
		<span class="n">teemo</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">30</span><span class="o">;</span>
		
		<span class="nc">Hero</span> <span class="n">bh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">bh</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"èµé‡‘çŒäºº"</span><span class="o">;</span>
		<span class="n">bh</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">500</span><span class="o">;</span>
		<span class="n">bh</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">65</span><span class="o">;</span>
		
		<span class="nc">Hero</span> <span class="n">leesin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">leesin</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›²åƒ§"</span><span class="o">;</span>
		<span class="n">leesin</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">455</span><span class="o">;</span>
		<span class="n">leesin</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">80</span><span class="o">;</span>
		
		<span class="nc">KillThread</span> <span class="n">killThread1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">KillThread</span><span class="o">(</span><span class="n">gareen</span><span class="o">,</span><span class="n">teemo</span><span class="o">);</span>
		<span class="n">killThread1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		<span class="nc">KillThread</span> <span class="n">killThread2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">KillThread</span><span class="o">(</span><span class="n">bh</span><span class="o">,</span><span class="n">leesin</span><span class="o">);</span>
		<span class="n">killThread2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		
	<span class="o">}</span>
	
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/778.png" alt="" /></p>

<h4 id="runnableæ¥å£">Runnableæ¥å£</h4>

<ul>
  <li>åˆ›å»ºç±»Battleï¼Œå®ç°Runnableæ¥å£,å¯åŠ¨çš„æ—¶å€™ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªBattleå¯¹è±¡ï¼Œç„¶åå†æ ¹æ®è¯¥battleå¯¹è±¡åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œå¹¶å¯åŠ¨</li>
  <li>battle1 å¯¹è±¡å®ç°äº†Runnableæ¥å£ï¼Œæ‰€ä»¥æœ‰runæ–¹æ³•ï¼Œä½†æ˜¯ç›´æ¥è°ƒç”¨runæ–¹æ³•ï¼Œå¹¶ä¸ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚</li>
  <li>å¿…é¡»ï¼Œå€ŸåŠ©ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•ï¼Œæ‰ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚</li>
  <li>æ‰€ä»¥ï¼Œåœ¨åˆ›å»ºThreadå¯¹è±¡çš„æ—¶å€™ï¼ŒæŠŠbattle1ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°ä¼ é€’è¿›å»ï¼Œè¿™ä¸ªçº¿ç¨‹å¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šå»æ‰§è¡Œbattle1.run()æ–¹æ³•äº†ã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Battle</span> <span class="kd">implements</span> <span class="nc">Runnable</span><span class="o">{</span>
	
	<span class="kd">private</span> <span class="nc">Hero</span> <span class="n">h1</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">Hero</span> <span class="n">h2</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">Battle</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h1</span><span class="o">,</span> <span class="nc">Hero</span> <span class="n">h2</span><span class="o">){</span>
		<span class="k">this</span><span class="o">.</span><span class="na">h1</span> <span class="o">=</span> <span class="n">h1</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">h2</span> <span class="o">=</span> <span class="n">h2</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
		<span class="k">while</span><span class="o">(!</span><span class="n">h2</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
			<span class="n">h1</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">h2</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>


</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		
		<span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›–ä¼¦"</span><span class="o">;</span>
		<span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">616</span><span class="o">;</span>
		<span class="n">gareen</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>

		<span class="nc">Hero</span> <span class="n">teemo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">teemo</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"æè«"</span><span class="o">;</span>
		<span class="n">teemo</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">300</span><span class="o">;</span>
		<span class="n">teemo</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">30</span><span class="o">;</span>
		
		<span class="nc">Hero</span> <span class="n">bh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">bh</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"èµé‡‘çŒäºº"</span><span class="o">;</span>
		<span class="n">bh</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">500</span><span class="o">;</span>
		<span class="n">bh</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">65</span><span class="o">;</span>
		
		<span class="nc">Hero</span> <span class="n">leesin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">leesin</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›²åƒ§"</span><span class="o">;</span>
		<span class="n">leesin</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">455</span><span class="o">;</span>
		<span class="n">leesin</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">80</span><span class="o">;</span>
		
		<span class="nc">Battle</span> <span class="n">battle1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Battle</span><span class="o">(</span><span class="n">gareen</span><span class="o">,</span><span class="n">teemo</span><span class="o">);</span>
		
		<span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="n">battle1</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

		<span class="nc">Battle</span> <span class="n">battle2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Battle</span><span class="o">(</span><span class="n">bh</span><span class="o">,</span><span class="n">leesin</span><span class="o">);</span>
		<span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="n">battle2</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

	<span class="o">}</span>
	
<span class="o">}</span>

</code></pre></div></div>

<h4 id="åŒ¿åç±»">åŒ¿åç±»</h4>

<ul>
  <li>ä½¿ç”¨<a href="http://how2j.cn/k/interface-inheritance/interface-inheritance-inner-class/322.html#step687">åŒ¿åç±»</a>ï¼Œç»§æ‰¿Thread,é‡å†™runæ–¹æ³•ï¼Œç›´æ¥åœ¨runæ–¹æ³•ä¸­å†™ä¸šåŠ¡ä»£ç </li>
  <li>åŒ¿åç±»çš„ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥å¾ˆæ–¹ä¾¿çš„è®¿é—®å¤–éƒ¨çš„å±€éƒ¨å˜é‡ã€‚</li>
  <li>å‰ææ˜¯å¤–éƒ¨çš„å±€éƒ¨å˜é‡éœ€è¦è¢«å£°æ˜ä¸ºfinalã€‚(JDK7ä»¥åå°±ä¸éœ€è¦äº†)</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         
        <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›–ä¼¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">616</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>
 
        <span class="nc">Hero</span> <span class="n">teemo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"æè«"</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">300</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">30</span><span class="o">;</span>
         
        <span class="nc">Hero</span> <span class="n">bh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"èµé‡‘çŒäºº"</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">500</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">65</span><span class="o">;</span>
         
        <span class="nc">Hero</span> <span class="n">leesin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›²åƒ§"</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">455</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">80</span><span class="o">;</span>
         
        <span class="c1">//åŒ¿åç±»</span>
        <span class="nc">Thread</span> <span class="n">t1</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="c1">//åŒ¿åç±»ä¸­ç”¨åˆ°å¤–éƒ¨çš„å±€éƒ¨å˜é‡teemoï¼Œå¿…é¡»æŠŠteemoå£°æ˜ä¸ºfinal</span>
            	<span class="c1">//ä½†æ˜¯åœ¨JDK7ä»¥åï¼Œå°±ä¸æ˜¯å¿…é¡»åŠ finalçš„äº†</span>
                <span class="k">while</span><span class="o">(!</span><span class="n">teemo</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">teemo</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
        
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
         
        <span class="nc">Thread</span> <span class="n">t2</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(!</span><span class="n">leesin</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">bh</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">leesin</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        
    <span class="o">}</span>
     
<span class="o">}</span>

</code></pre></div></div>

<h4 id="ä¸‰ç§æ–¹å¼">ä¸‰ç§æ–¹å¼</h4>

<ul>
  <li>ç»§æ‰¿Threadç±»</li>
  <li>å®ç°Runnableæ¥å£</li>
  <li>åŒ¿åç±»çš„æ–¹å¼</li>
  <li>æ³¨ï¼š å¯åŠ¨çº¿ç¨‹æ˜¯start()æ–¹æ³•ï¼Œrun()å¹¶ä¸èƒ½å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹</li>
</ul>

<h2 id="çº¿ç¨‹æ–¹æ³•">çº¿ç¨‹æ–¹æ³•</h2>

<h3 id="çº¿ç¨‹æš‚åœ">çº¿ç¨‹æš‚åœ</h3>

<ul>
  <li>Thread.sleep(1000); è¡¨ç¤ºå½“å‰çº¿ç¨‹æš‚åœ1000æ¯«ç§’ ï¼Œå…¶ä»–çº¿ç¨‹ä¸å—å½±å“</li>
  <li>Thread.sleep(1000); ä¼šæŠ›å‡ºInterruptedException ä¸­æ–­å¼‚å¸¸ï¼Œå› ä¸ºå½“å‰çº¿ç¨‹sleepçš„æ—¶å€™ï¼Œæœ‰å¯èƒ½è¢«åœæ­¢ï¼Œè¿™æ—¶å°±ä¼šæŠ›å‡º InterruptedException</li>
  <li>çº¿ç¨‹ä¼‘çœ ï¼šæŒ‡çš„æ˜¯è®©çº¿ç¨‹æš‚ç¼“æ‰§è¡Œä¸€ä¸‹ï¼Œç­‰åˆ°äº†é¢„è®¡æ—¶é—´ä¹‹åå†æ¢å¤æ‰§è¡Œã€‚çº¿ç¨‹ä¼‘çœ ä¼šäº¤å‡ºCPUï¼Œè®©CPUå»æ‰§è¡Œå…¶ä»–çš„ä»»åŠ¡ã€‚</li>
  <li>sleepæ–¹æ³•ä¸ä¼šé‡Šæ”¾é”ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœå½“å‰çº¿ç¨‹æŒæœ‰å¯¹æŸä¸ªå¯¹è±¡çš„é”ï¼Œå³ä½¿è°ƒç”¨sleepæ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿæ— æ³•è®¿é—®è¿™ä¸ªå¯¹è±¡</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		
		<span class="nc">Thread</span> <span class="n">t1</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
				<span class="kt">int</span> <span class="n">seconds</span> <span class="o">=</span><span class="mi">0</span><span class="o">;</span>
				<span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
					<span class="k">try</span> <span class="o">{</span>
						<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
					<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
						<span class="c1">// TODO Auto-generated catch block</span>
						<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
					<span class="o">}</span>
					<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"å·²ç»ç©äº†LOL %d ç§’%n"</span><span class="o">,</span> <span class="n">seconds</span><span class="o">++);</span>
				<span class="o">}</span>				
			<span class="o">}</span>
		<span class="o">};</span>
		<span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		
	<span class="o">}</span>
	
<span class="o">}</span>

</code></pre></div></div>

<h3 id="åŠ å…¥çº¿ç¨‹">åŠ å…¥çº¿ç¨‹</h3>

<ul>
  <li>æ‰€æœ‰è¿›ç¨‹ï¼Œè‡³å°‘ä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å³ä¸»çº¿ç¨‹ï¼Œå³mainæ–¹æ³•å¼€å§‹æ‰§è¡Œï¼Œå°±ä¼šæœ‰ä¸€ä¸ªçœ‹ä¸è§çš„ä¸»çº¿ç¨‹å­˜åœ¨ã€‚</li>
  <li>å¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨joinæ–¹æ³•æ—¶å°±ä¼šè®©ä¸»çº¿ç¨‹ä¼‘çœ ï¼Œè®©è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹runæ–¹æ³•å…ˆæ‰§è¡Œå®Œæ¯•ä¹‹ååœ¨å¼€å§‹æ‰§è¡Œä¸»çº¿ç¨‹</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›–ä¼¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">616</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>
 
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">teemo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"æè«"</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">300</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">30</span><span class="o">;</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">bh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"èµé‡‘çŒäºº"</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">500</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">65</span><span class="o">;</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">leesin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›²åƒ§"</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">455</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">80</span><span class="o">;</span>
         
        <span class="nc">Thread</span> <span class="n">t1</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(!</span><span class="n">teemo</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">teemo</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
         
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

        <span class="c1">//ä»£ç æ‰§è¡Œåˆ°è¿™é‡Œï¼Œä¸€ç›´æ˜¯mainçº¿ç¨‹åœ¨è¿è¡Œ</span>
        <span class="k">try</span> <span class="o">{</span>
        	<span class="c1">//t1çº¿ç¨‹åŠ å…¥åˆ°mainçº¿ç¨‹ä¸­æ¥ï¼Œåªæœ‰t1çº¿ç¨‹è¿è¡Œç»“æŸï¼Œæ‰ä¼šç»§ç»­å¾€ä¸‹èµ°</span>
			<span class="n">t1</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

        <span class="nc">Thread</span> <span class="n">t2</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(!</span><span class="n">leesin</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">bh</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">leesin</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="c1">//ä¼šè§‚å¯Ÿåˆ°ç›–ä¼¦æŠŠæè«æ€æ‰åï¼Œæ‰è¿è¡Œt2çº¿ç¨‹</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
         
    <span class="o">}</span>
     
<span class="o">}</span>

</code></pre></div></div>

<h3 id="ä¼˜å…ˆçº§">ä¼˜å…ˆçº§</h3>

<ul>
  <li>å½“çº¿ç¨‹å¤„äºç«äº‰å…³ç³»çš„æ—¶å€™ï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ä¼šæœ‰æ›´å¤§çš„å‡ ç‡è·å¾—CPUèµ„æº</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">charactor</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hero</span><span class="o">{</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 
    <span class="kd">public</span> <span class="kt">float</span> <span class="n">hp</span><span class="o">;</span>
     
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">damage</span><span class="o">;</span>
     
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">attackHero</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h</span><span class="o">)</span> <span class="o">{</span>
    	<span class="c1">//æŠŠæš‚åœæ—¶é—´å»æ‰ï¼Œå¤šæ¡çº¿ç¨‹å„è‡ªä¼šå°½åŠ›å»å æœ‰CPUèµ„æº</span>
    	<span class="c1">//çº¿ç¨‹çš„ä¼˜å…ˆçº§æ•ˆæœæ‰å¯ä»¥çœ‹å¾—å‡ºæ¥</span>
<span class="c1">//        try {</span>
<span class="c1">//            </span>
<span class="c1">//            Thread.sleep(0);</span>
<span class="c1">//        } catch (InterruptedException e) {</span>
<span class="c1">//            // TODO Auto-generated catch block</span>
<span class="c1">//            e.printStackTrace();</span>
<span class="c1">//        }</span>
        <span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">-=</span><span class="n">damage</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s æ­£åœ¨æ”»å‡» %s, %sçš„è¡€å˜æˆäº† %.0f%n"</span><span class="o">,</span><span class="n">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
         
        <span class="k">if</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">isDead</span><span class="o">())</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span><span class="s">"æ­»äº†ï¼"</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDead</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">&gt;=</span><span class="n">hp</span><span class="o">?</span><span class="kc">true</span><span class="o">:</span><span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
 
<span class="o">}</span>


</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›–ä¼¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">6160</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
 
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">teemo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"æè«"</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">3000</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">bh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"èµé‡‘çŒäºº"</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">5000</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">leesin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›²åƒ§"</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">4505</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
         
        <span class="nc">Thread</span> <span class="n">t1</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>

                <span class="k">while</span><span class="o">(!</span><span class="n">teemo</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">teemo</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
         
        <span class="nc">Thread</span> <span class="n">t2</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(!</span><span class="n">leesin</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">bh</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">leesin</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
        
        <span class="n">t1</span><span class="o">.</span><span class="na">setPriority</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">MAX_PRIORITY</span><span class="o">);</span><span class="c1">//ä¼˜å…ˆçº§ä¸º10</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">setPriority</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">MIN_PRIORITY</span><span class="o">);</span><span class="c1">//ä¼˜å…ˆçº§ä¸º1</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
         
    <span class="o">}</span>
     
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/783.png" alt="" /></p>

<h3 id="ä¸´æ—¶æš‚åœ">ä¸´æ—¶æš‚åœ</h3>

<ul>
  <li>æš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œå…¶ä»–çº¿ç¨‹ã€‚</li>
  <li>æ„æ€å°±æ˜¯è°ƒç”¨yieldæ–¹æ³•ä¼šè®©å½“å‰çº¿ç¨‹äº¤å‡ºCPUæƒé™ï¼Œè®©CPUå»æ‰§è¡Œå…¶ä»–çš„çº¿ç¨‹ã€‚å®ƒè·Ÿsleepæ–¹æ³•ç±»ä¼¼ï¼ŒåŒæ ·ä¸ä¼šé‡Šæ”¾é”ã€‚</li>
  <li>ä½†æ˜¯yieldä¸èƒ½æ§åˆ¶å…·ä½“çš„äº¤å‡ºCPUçš„æ—¶é—´ï¼Œå¦å¤–ï¼Œyieldæ–¹æ³•åªèƒ½è®©æ‹¥æœ‰ç›¸åŒä¼˜å…ˆçº§çš„çº¿ç¨‹æœ‰è·å–CPUæ‰§è¡Œæ—¶é—´çš„æœºä¼šã€‚</li>
  <li>è°ƒç”¨yieldæ–¹æ³•å¹¶ä¸ä¼šè®©çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯è®©çº¿ç¨‹é‡å›å°±ç»ªçŠ¶æ€ï¼Œå®ƒåªéœ€è¦ç­‰å¾…é‡æ–°è·å–CPUæ‰§è¡Œæ—¶é—´</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›–ä¼¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">61600</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
 
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">teemo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"æè«"</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">30000</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">bh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"èµé‡‘çŒäºº"</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">50000</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">leesin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›²åƒ§"</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">45050</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
         
        <span class="nc">Thread</span> <span class="n">t1</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>

                <span class="k">while</span><span class="o">(!</span><span class="n">teemo</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">teemo</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
         
        <span class="nc">Thread</span> <span class="n">t2</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(!</span><span class="n">leesin</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                	<span class="c1">//ä¸´æ—¶æš‚åœï¼Œä½¿å¾—t1å¯ä»¥å ç”¨CPUèµ„æº</span>
                	<span class="nc">Thread</span><span class="o">.</span><span class="na">yield</span><span class="o">();</span>
                	
                    <span class="n">bh</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">leesin</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
        
        <span class="n">t1</span><span class="o">.</span><span class="na">setPriority</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">setPriority</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
         
    <span class="o">}</span>
     
<span class="o">}</span>

</code></pre></div></div>

<h3 id="å®ˆæŠ¤çº¿ç¨‹">å®ˆæŠ¤çº¿ç¨‹</h3>

<ul>
  <li>å®ˆæŠ¤çº¿ç¨‹çš„æ¦‚å¿µæ˜¯ï¼š å½“ä¸€ä¸ªè¿›ç¨‹é‡Œï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹çš„æ—¶å€™ï¼Œç»“æŸå½“å‰è¿›ç¨‹ã€‚</li>
  <li>å°±å¥½åƒä¸€ä¸ªå…¬å¸æœ‰é”€å”®éƒ¨ï¼Œç”Ÿäº§éƒ¨è¿™äº›å’Œä¸šåŠ¡æŒ‚é’©çš„éƒ¨é—¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰åå‹¤ï¼Œè¡Œæ”¿ç­‰è¿™äº›æ”¯æŒéƒ¨é—¨ã€‚</li>
  <li>å¦‚æœä¸€å®¶å…¬å¸é”€å”®éƒ¨ï¼Œç”Ÿäº§éƒ¨éƒ½è§£æ•£äº†ï¼Œé‚£ä¹ˆåªå‰©ä¸‹åå‹¤å’Œè¡Œæ”¿ï¼Œé‚£ä¹ˆè¿™å®¶å…¬å¸ä¹Ÿå¯ä»¥è§£æ•£äº†ã€‚</li>
  <li>å®ˆæŠ¤çº¿ç¨‹å°±ç›¸å½“äºé‚£äº›æ”¯æŒéƒ¨é—¨ï¼Œå¦‚æœä¸€ä¸ªè¿›ç¨‹åªå‰©ä¸‹å®ˆæŠ¤çº¿ç¨‹ï¼Œé‚£ä¹ˆè¿›ç¨‹å°±ä¼šè‡ªåŠ¨ç»“æŸã€‚</li>
  <li>å®ˆæŠ¤çº¿ç¨‹é€šå¸¸ä¼šè¢«ç”¨æ¥åšæ—¥å¿—ï¼Œæ€§èƒ½ç»Ÿè®¡ç­‰å·¥ä½œã€‚</li>
  <li>å®ˆæŠ¤çº¿ç¨‹çš„å”¯ä¸€ç”¨é€”æ˜¯ä¸ºå…¶ä»–çº¿ç¨‹æä¾›æœåŠ¡</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         
        <span class="nc">Thread</span> <span class="n">t1</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="kt">int</span> <span class="n">seconds</span> <span class="o">=</span><span class="mi">0</span><span class="o">;</span>
                
                <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"å·²ç»ç©äº†LOL %d ç§’%n"</span><span class="o">,</span> <span class="n">seconds</span><span class="o">++);</span>
                    
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">setDaemon</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span><span class="c1">//å°†çº¿ç¨‹è½¬ä¸ºå®ˆæŠ¤çº¿ç¨‹</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
         
    <span class="o">}</span>
     
<span class="o">}</span>

</code></pre></div></div>

<h2 id="çº¿ç¨‹åŒæ­¥">çº¿ç¨‹åŒæ­¥</h2>

<ul>
  <li>å¤šçº¿ç¨‹çš„åŒæ­¥é—®é¢˜æŒ‡çš„æ˜¯å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œå¯èƒ½å¯¼è‡´çš„é—®é¢˜</li>
  <li>å¤šçº¿ç¨‹çš„é—®é¢˜ï¼Œåˆå«Concurrency é—®é¢˜</li>
</ul>

<h3 id="åŒæ­¥æ¡ˆä¾‹">åŒæ­¥æ¡ˆä¾‹</h3>

<ul>
  <li>å‡è®¾ç›–ä¼¦æœ‰10000æ»´è¡€ï¼Œå¹¶ä¸”åœ¨åŸºåœ°é‡Œï¼ŒåŒæ—¶åˆè¢«å¯¹æ–¹å¤šä¸ªè‹±é›„æ”»å‡»</li>
  <li>å°±æ˜¯æœ‰å¤šä¸ªçº¿ç¨‹åœ¨å‡å°‘ç›–ä¼¦çš„hpï¼ŒåŒæ—¶åˆæœ‰å¤šä¸ªçº¿ç¨‹åœ¨æ¢å¤ç›–ä¼¦çš„hp</li>
  <li>å‡è®¾çº¿ç¨‹çš„æ•°é‡æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”æ¯æ¬¡æ”¹å˜çš„å€¼éƒ½æ˜¯1ï¼Œé‚£ä¹ˆæ‰€æœ‰çº¿ç¨‹ç»“æŸåï¼Œç›–ä¼¦åº”è¯¥è¿˜æ˜¯10000æ»´è¡€ã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
   
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
   
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
   
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
           
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›–ä¼¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
          
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"ç›–ä¼¦çš„åˆå§‹è¡€é‡æ˜¯ %.0f%n"</span><span class="o">,</span> <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
          
        <span class="c1">//å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜æŒ‡çš„æ˜¯å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œå¯¼è‡´çš„é—®é¢˜</span>
          
        <span class="c1">//å‡è®¾ç›–ä¼¦æœ‰10000æ»´è¡€ï¼Œå¹¶ä¸”åœ¨åŸºåœ°é‡Œï¼ŒåŒæ—¶åˆè¢«å¯¹æ–¹å¤šä¸ªè‹±é›„æ”»å‡»</span>
          
        <span class="c1">//ç”¨JAVAä»£ç æ¥è¡¨ç¤ºï¼Œå°±æ˜¯æœ‰å¤šä¸ªçº¿ç¨‹åœ¨å‡å°‘ç›–ä¼¦çš„hp</span>
        <span class="c1">//åŒæ—¶åˆæœ‰å¤šä¸ªçº¿ç¨‹åœ¨æ¢å¤ç›–ä¼¦çš„hp</span>
          
        <span class="c1">//nä¸ªçº¿ç¨‹å¢åŠ ç›–ä¼¦çš„hp</span>
          
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
  
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">addThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">reduceThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
          
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">recover</span><span class="o">();</span><span class="c1">//å›è¡€æ–¹æ³•ï¼Œæ¯æ¬¡å›1</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">addThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
              
        <span class="o">}</span>
          
        <span class="c1">//nä¸ªçº¿ç¨‹å‡å°‘ç›–ä¼¦çš„hp</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">hurt</span><span class="o">();</span><span class="c1">//æ‰è¡€æ–¹æ³•ï¼Œæ¯æ¬¡å‡1</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">reduceThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
        <span class="o">}</span>
          
        <span class="c1">//ç­‰å¾…æ‰€æœ‰å¢åŠ çº¿ç¨‹ç»“æŸ</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">addThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="c1">//ç­‰å¾…æ‰€æœ‰å‡å°‘çº¿ç¨‹ç»“æŸ</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">reduceThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
          
        <span class="c1">//ä»£ç æ‰§è¡Œåˆ°è¿™é‡Œï¼Œæ‰€æœ‰å¢åŠ å’Œå‡å°‘çº¿ç¨‹éƒ½ç»“æŸäº†</span>
          
        <span class="c1">//å¢åŠ å’Œå‡å°‘çº¿ç¨‹çš„æ•°é‡æ˜¯ä¸€æ ·çš„ï¼Œæ¯æ¬¡éƒ½å¢åŠ ï¼Œå‡å°‘1.</span>
        <span class="c1">//é‚£ä¹ˆæ‰€æœ‰çº¿ç¨‹éƒ½ç»“æŸåï¼Œç›–ä¼¦çš„hpåº”è¯¥è¿˜æ˜¯åˆå§‹å€¼</span>
          
        <span class="c1">//ä½†æ˜¯äº‹å®ä¸Šè§‚å¯Ÿåˆ°çš„æ˜¯ï¼š</span>
                  
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%dä¸ªå¢åŠ çº¿ç¨‹å’Œ%dä¸ªå‡å°‘çº¿ç¨‹ç»“æŸå%nç›–ä¼¦çš„è¡€é‡å˜æˆäº† %.0f%n"</span><span class="o">,</span> <span class="n">n</span><span class="o">,</span><span class="n">n</span><span class="o">,</span><span class="n">gareen</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
          
    <span class="o">}</span>
       
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/786.png" alt="" /></p>

<h3 id="é—®é¢˜åŸå› ">é—®é¢˜åŸå› </h3>

<ul>
  <li>å‡è®¾å¢åŠ çº¿ç¨‹å…ˆè¿›å…¥ï¼Œå¾—åˆ°çš„hpæ˜¯10000</li>
  <li>è¿›è¡Œå¢åŠ è¿ç®—</li>
  <li>æ­£åœ¨åšå¢åŠ è¿ç®—çš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰æ¥å¾—åŠä¿®æ”¹hpçš„å€¼ï¼Œå‡å°‘çº¿ç¨‹æ¥äº†</li>
  <li>å‡å°‘çº¿ç¨‹å¾—åˆ°çš„hpçš„å€¼ä¹Ÿæ˜¯10000</li>
  <li>å‡å°‘çº¿ç¨‹è¿›è¡Œå‡å°‘è¿ç®—</li>
  <li>å¢åŠ çº¿ç¨‹è¿ç®—ç»“æŸï¼Œå¾—åˆ°å€¼10001ï¼Œå¹¶æŠŠè¿™ä¸ªå€¼èµ‹äºˆhp</li>
  <li>å‡å°‘çº¿ç¨‹ä¹Ÿè¿ç®—ç»“æŸï¼Œå¾—åˆ°å€¼9999ï¼Œå¹¶æŠŠè¿™ä¸ªå€¼èµ‹äºˆhp</li>
  <li>hpï¼Œæœ€åçš„å€¼å°±æ˜¯9999 ï¼Œè¿™ä¸ªæ—¶å€™çš„å€¼9999æ˜¯ä¸€ä¸ªé”™è¯¯çš„å€¼ï¼Œåœ¨ä¸šåŠ¡ä¸Šåˆå«åšè„æ•°æ®</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/787.png" alt="" /></p>

<h3 id="è§£å†³æ€è·¯">è§£å†³æ€è·¯</h3>

<ul>
  <li>æ€»ä½“è§£å†³æ€è·¯æ˜¯ï¼š åœ¨å¢åŠ çº¿ç¨‹è®¿é—®hpæœŸé—´ï¼Œå…¶ä»–çº¿ç¨‹ä¸å¯ä»¥è®¿é—®hp</li>
  <li>å¢åŠ çº¿ç¨‹è·å–åˆ°hpçš„å€¼ï¼Œå¹¶è¿›è¡Œè¿ç®—</li>
  <li>åœ¨è¿ç®—æœŸé—´ï¼Œå‡å°‘çº¿ç¨‹è¯•å›¾æ¥è·å–hpçš„å€¼ï¼Œä½†æ˜¯ä¸è¢«å…è®¸</li>
  <li>å¢åŠ çº¿ç¨‹è¿ç®—ç»“æŸï¼Œå¹¶æˆåŠŸä¿®æ”¹hpçš„å€¼ä¸º10001</li>
  <li>å‡å°‘çº¿ç¨‹ï¼Œåœ¨å¢åŠ çº¿ç¨‹åšå®Œåï¼Œæ‰èƒ½è®¿é—®hpçš„å€¼ï¼Œå³10001</li>
  <li>å‡å°‘çº¿ç¨‹è¿ç®—ï¼Œå¹¶å¾—åˆ°æ–°çš„å€¼10000</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/788.png" alt="" /></p>

<h3 id="synchronized">synchronized</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Object</span> <span class="n">someObject</span> <span class="o">=</span><span class="k">new</span> <span class="nc">Object</span><span class="o">();</span>
<span class="kd">synchronized</span> <span class="o">(</span><span class="n">someObject</span><span class="o">){</span>
  <span class="c1">//æ­¤å¤„çš„ä»£ç åªæœ‰å æœ‰äº†someObjectåæ‰å¯ä»¥æ‰§è¡Œ</span>
<span class="o">}</span>
<span class="cm">/*
synchronizedè¡¨ç¤ºå½“å‰çº¿ç¨‹ï¼Œç‹¬å  å¯¹è±¡ someObject
å½“å‰çº¿ç¨‹ç‹¬å  äº†å¯¹è±¡someObjectï¼Œå¦‚æœæœ‰å…¶ä»–çº¿ç¨‹è¯•å›¾å æœ‰å¯¹è±¡someObjectï¼Œå°±ä¼šç­‰å¾…ï¼Œç›´åˆ°å½“å‰çº¿ç¨‹é‡Šæ”¾å¯¹someObjectçš„å ç”¨ã€‚
someObject åˆå«åŒæ­¥å¯¹è±¡ï¼Œæ‰€æœ‰çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½œä¸ºåŒæ­¥å¯¹è±¡
ä¸ºäº†è¾¾åˆ°åŒæ­¥çš„æ•ˆæœï¼Œå¿…é¡»ä½¿ç”¨åŒä¸€ä¸ªåŒæ­¥å¯¹è±¡
é‡Šæ”¾åŒæ­¥å¯¹è±¡çš„æ–¹å¼ï¼š synchronized å—è‡ªç„¶ç»“æŸï¼Œæˆ–è€…æœ‰å¼‚å¸¸æŠ›å‡º
*/</span>
</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/789.png" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
	
	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">now</span><span class="o">(){</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">SimpleDateFormat</span><span class="o">(</span><span class="s">"HH:mm:ss"</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">());</span>
	<span class="o">}</span>
	
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Object</span> <span class="n">someObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">();</span>
         
        <span class="nc">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="s">" t1 çº¿ç¨‹å·²ç»è¿è¡Œ"</span><span class="o">);</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">" è¯•å›¾å æœ‰å¯¹è±¡ï¼šsomeObject"</span><span class="o">);</span>
                    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">someObject</span><span class="o">)</span> <span class="o">{</span>
                         
                        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">" å æœ‰å¯¹è±¡ï¼šsomeObject"</span><span class="o">);</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
                        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">" é‡Šæ”¾å¯¹è±¡ï¼šsomeObject"</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">now</span><span class="o">()+</span><span class="s">" t1 çº¿ç¨‹ç»“æŸ"</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="c1">// TODO Auto-generated catch block</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">" t1"</span><span class="o">);</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="nc">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
 
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="s">" t2 çº¿ç¨‹å·²ç»è¿è¡Œ"</span><span class="o">);</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">" è¯•å›¾å æœ‰å¯¹è±¡ï¼šsomeObject"</span><span class="o">);</span>
                    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">someObject</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">" å æœ‰å¯¹è±¡ï¼šsomeObject"</span><span class="o">);</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
                        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">" é‡Šæ”¾å¯¹è±¡ï¼šsomeObject"</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">now</span><span class="o">()+</span><span class="s">" t2 çº¿ç¨‹ç»“æŸ"</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="c1">// TODO Auto-generated catch block</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">" t2"</span><span class="o">);</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>
      
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>æ‰€æœ‰éœ€è¦ä¿®æ”¹hpçš„åœ°æ–¹ï¼Œæœ‰è¦å»ºç«‹åœ¨å æœ‰someObjectçš„åŸºç¡€ä¸Šã€‚</li>
  <li>è€Œå¯¹è±¡ someObjectåœ¨åŒä¸€æ—¶é—´ï¼Œåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å æœ‰ã€‚ é—´æ¥åœ°ï¼Œå¯¼è‡´åŒä¸€æ—¶é—´ï¼Œhpåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹ã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.awt.GradientPaint</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

    	<span class="kd">final</span> <span class="nc">Object</span> <span class="n">someObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">();</span>
    	
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›–ä¼¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
         
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
 
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">addThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">reduceThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                	
                	<span class="c1">//ä»»ä½•çº¿ç¨‹è¦ä¿®æ”¹hpçš„å€¼ï¼Œå¿…é¡»å…ˆå ç”¨someObject</span>
                	<span class="kd">synchronized</span> <span class="o">(</span><span class="n">someObject</span><span class="o">)</span> <span class="o">{</span>
                		<span class="n">gareen</span><span class="o">.</span><span class="na">recover</span><span class="o">();</span>
					<span class="o">}</span>
                    
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">addThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
             
        <span class="o">}</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                	<span class="c1">//ä»»ä½•çº¿ç¨‹è¦ä¿®æ”¹hpçš„å€¼ï¼Œå¿…é¡»å…ˆå ç”¨someObject</span>
                	<span class="kd">synchronized</span> <span class="o">(</span><span class="n">someObject</span><span class="o">)</span> <span class="o">{</span>
                		<span class="n">gareen</span><span class="o">.</span><span class="na">hurt</span><span class="o">();</span>
                	<span class="o">}</span>
                	
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">reduceThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
        <span class="o">}</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">addThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">reduceThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
         
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%dä¸ªå¢åŠ çº¿ç¨‹å’Œ%dä¸ªå‡å°‘çº¿ç¨‹ç»“æŸå%nç›–ä¼¦çš„è¡€é‡æ˜¯ %.0f%n"</span><span class="o">,</span> <span class="n">n</span><span class="o">,</span><span class="n">n</span><span class="o">,</span><span class="n">gareen</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
         
    <span class="o">}</span>
      
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/790.png" alt="" /></p>

<ul>
  <li>æ—¢ç„¶ä»»æ„å¯¹è±¡éƒ½å¯ä»¥ç”¨æ¥ä½œä¸ºåŒæ­¥å¯¹è±¡ï¼Œè€Œæ‰€æœ‰çš„çº¿ç¨‹è®¿é—®çš„éƒ½æ˜¯åŒä¸€ä¸ªheroå¯¹è±¡ï¼Œç´¢æ€§å°±ä½¿ç”¨gareenæ¥ä½œä¸ºåŒæ­¥å¯¹è±¡</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">charactor</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hero</span><span class="o">{</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 
    <span class="kd">public</span> <span class="kt">float</span> <span class="n">hp</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">damage</span><span class="o">;</span>
    
    <span class="c1">//å›è¡€</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">recover</span><span class="o">(){</span>
    	<span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">//æ‰è¡€</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hurt</span><span class="o">(){</span>
    	<span class="c1">//ä½¿ç”¨thisä½œä¸ºåŒæ­¥å¯¹è±¡</span>
    	<span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
    		<span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span>	
		<span class="o">}</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">attackHero</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">-=</span><span class="n">damage</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s æ­£åœ¨æ”»å‡» %s, %sçš„è¡€å˜æˆäº† %.0f%n"</span><span class="o">,</span><span class="n">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">isDead</span><span class="o">())</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span><span class="s">"æ­»äº†ï¼"</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDead</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">&gt;=</span><span class="n">hp</span><span class="o">?</span><span class="kc">true</span><span class="o">:</span><span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
 
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.awt.GradientPaint</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›–ä¼¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
         
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
 
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">addThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">reduceThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                	
                	<span class="c1">//ä½¿ç”¨gareenä½œä¸ºsynchronized</span>
                	<span class="kd">synchronized</span> <span class="o">(</span><span class="n">gareen</span><span class="o">)</span> <span class="o">{</span>
                		<span class="n">gareen</span><span class="o">.</span><span class="na">recover</span><span class="o">();</span>
					<span class="o">}</span>
                    
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">addThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
             
        <span class="o">}</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                	<span class="c1">//ä½¿ç”¨gareenä½œä¸ºsynchronized</span>
                	<span class="c1">//åœ¨æ–¹æ³•hurtä¸­æœ‰synchronized(this)</span>
                	<span class="n">gareen</span><span class="o">.</span><span class="na">hurt</span><span class="o">();</span>
                    
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">reduceThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
        <span class="o">}</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">addThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">reduceThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
         
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%dä¸ªå¢åŠ çº¿ç¨‹å’Œ%dä¸ªå‡å°‘çº¿ç¨‹ç»“æŸå%nç›–ä¼¦çš„è¡€é‡æ˜¯ %.0f%n"</span><span class="o">,</span> <span class="n">n</span><span class="o">,</span><span class="n">n</span><span class="o">,</span><span class="n">gareen</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
         
    <span class="o">}</span>
      
<span class="o">}</span>


</code></pre></div></div>

<ul>
  <li>åœ¨recoverå‰ï¼Œç›´æ¥åŠ ä¸Šsynchronized ï¼Œå…¶æ‰€å¯¹åº”çš„åŒæ­¥å¯¹è±¡ï¼Œå°±æ˜¯this</li>
  <li>å’Œhurtæ–¹æ³•è¾¾åˆ°çš„æ•ˆæœæ˜¯ä¸€æ ·
å¤–éƒ¨çº¿ç¨‹è®¿é—®gareençš„æ–¹æ³•ï¼Œå°±ä¸éœ€è¦é¢å¤–ä½¿ç”¨synchronized äº†</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">charactor</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hero</span><span class="o">{</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 
    <span class="kd">public</span> <span class="kt">float</span> <span class="n">hp</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">damage</span><span class="o">;</span>
    
    <span class="c1">//å›è¡€</span>
    <span class="c1">//ç›´æ¥åœ¨æ–¹æ³•å‰åŠ ä¸Šä¿®é¥°ç¬¦synchronized</span>
    <span class="c1">//å…¶æ‰€å¯¹åº”çš„åŒæ­¥å¯¹è±¡ï¼Œå°±æ˜¯this</span>
    <span class="c1">//å’Œhurtæ–¹æ³•è¾¾åˆ°çš„æ•ˆæœä¸€æ ·</span>
    <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">recover</span><span class="o">(){</span>
    	<span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">//æ‰è¡€</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hurt</span><span class="o">(){</span>
    	<span class="c1">//ä½¿ç”¨thisä½œä¸ºåŒæ­¥å¯¹è±¡</span>
    	<span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
    		<span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span>	
		<span class="o">}</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">attackHero</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">-=</span><span class="n">damage</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s æ­£åœ¨æ”»å‡» %s, %sçš„è¡€å˜æˆäº† %.0f%n"</span><span class="o">,</span><span class="n">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">isDead</span><span class="o">())</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span><span class="s">"æ­»äº†ï¼"</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDead</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">&gt;=</span><span class="n">hp</span><span class="o">?</span><span class="kc">true</span><span class="o">:</span><span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
 
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.awt.GradientPaint</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›–ä¼¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
         
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
 
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">addThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">reduceThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                	
                	<span class="c1">//recoverè‡ªå¸¦synchronized</span>
               		<span class="n">gareen</span><span class="o">.</span><span class="na">recover</span><span class="o">();</span>
                    
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">addThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
             
        <span class="o">}</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                	<span class="c1">//hurtè‡ªå¸¦synchronized</span>
                	<span class="n">gareen</span><span class="o">.</span><span class="na">hurt</span><span class="o">();</span>
                    
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">reduceThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
        <span class="o">}</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">addThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">reduceThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
         
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%dä¸ªå¢åŠ çº¿ç¨‹å’Œ%dä¸ªå‡å°‘çº¿ç¨‹ç»“æŸå%nç›–ä¼¦çš„è¡€é‡æ˜¯ %.0f%n"</span><span class="o">,</span> <span class="n">n</span><span class="o">,</span><span class="n">n</span><span class="o">,</span><span class="n">gareen</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
         
    <span class="o">}</span>
      
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>å¦‚æœä¸€ä¸ªç±»ï¼Œå…¶æ–¹æ³•éƒ½æ˜¯æœ‰synchronizedä¿®é¥°çš„ï¼Œé‚£ä¹ˆè¯¥ç±»å°±å«åšçº¿ç¨‹å®‰å…¨çš„ç±»</li>
  <li>åŒä¸€æ—¶é—´ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè¿›å…¥ è¿™ç§ç±»çš„ä¸€ä¸ªå®ä¾‹ çš„å»ä¿®æ”¹æ•°æ®ï¼Œè¿›è€Œä¿è¯äº†è¿™ä¸ªå®ä¾‹ä¸­çš„æ•°æ®çš„å®‰å…¨(ä¸ä¼šåŒæ—¶è¢«å¤šçº¿ç¨‹ä¿®æ”¹è€Œå˜æˆè„æ•°æ®)</li>
  <li>StringBufferçš„æ–¹æ³•éƒ½æ˜¯æœ‰synchronizedä¿®é¥°çš„ï¼ŒStringBufferå°±å«åšçº¿ç¨‹å®‰å…¨çš„ç±»,è€ŒStringBuilderå°±ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ç±»</li>
</ul>

<h2 id="çº¿ç¨‹å®‰å…¨">çº¿ç¨‹å®‰å…¨</h2>

<ul>
  <li>HashMapå’ŒHashtableéƒ½å®ç°äº†Mapæ¥å£ï¼Œéƒ½æ˜¯é”®å€¼å¯¹ä¿å­˜æ•°æ®çš„æ–¹å¼</li>
  <li>åŒºåˆ«1ï¼š 
HashMapå¯ä»¥å­˜æ”¾ null
Hashtableä¸èƒ½å­˜æ”¾null</li>
  <li>åˆ«2ï¼š
HashMapä¸æ˜¯<a href="http://how2j.cn/k/thread/thread-synchronized/355.html#step793">çº¿ç¨‹å®‰å…¨çš„ç±»</a>
Hashtableæ˜¯çº¿ç¨‹å®‰å…¨çš„ç±»</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/2595.png" alt="" /></p>

<ul>
  <li>StringBuffer æ˜¯çº¿ç¨‹å®‰å…¨çš„,StringBuilder æ˜¯éçº¿ç¨‹å®‰å…¨çš„</li>
  <li>æ‰€ä»¥å½“è¿›è¡Œå¤§é‡å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œçš„æ—¶å€™ï¼Œå¦‚æœæ˜¯å•çº¿ç¨‹å°±ç”¨StringBuilderä¼šæ›´å¿«äº›ï¼Œå¦‚æœæ˜¯å¤šçº¿ç¨‹ï¼Œå°±éœ€è¦ç”¨StringBuffer ä¿è¯æ•°æ®çš„å®‰å…¨æ€§</li>
  <li>éçº¿ç¨‹å®‰å…¨çš„ä¸ºä»€ä¹ˆä¼šæ¯”çº¿ç¨‹å®‰å…¨çš„ å¿«ï¼Ÿ å› ä¸ºä¸éœ€è¦åŒæ­¥å˜›ï¼Œçœç•¥äº†äº›æ—¶é—´</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/2596.png" alt="" /></p>

<ul>
  <li>Vectoræ˜¯çº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œè€ŒArrayListæ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚</li>
  <li>ArrayListæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œæ¢å¥è¯è¯´ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è¿›å…¥ä¸€ä¸ªArrayListå¯¹è±¡çš„addæ–¹æ³•</li>
  <li>å€ŸåŠ©Collections.synchronizedListï¼Œå¯ä»¥æŠŠArrayListè½¬æ¢ä¸ºçº¿ç¨‹å®‰å…¨çš„Listã€‚</li>
  <li>ä¸æ­¤ç±»ä¼¼çš„ï¼Œè¿˜æœ‰HashSet,LinkedList,HashMapç­‰ç­‰éçº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œéƒ½é€šè¿‡<a href="http://how2j.cn/k/collection/collection-collections/369.html">å·¥å…·ç±»Collections</a>è½¬æ¢ä¸ºçº¿ç¨‹å®‰å…¨çš„</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collections</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
   
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    	<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    	<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list2</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">synchronizedList</span><span class="o">(</span><span class="n">list1</span><span class="o">);</span>
    <span class="o">}</span>
       
<span class="o">}</span>

</code></pre></div></div>

<h2 id="æ­»é”">æ­»é”</h2>

<ul>
  <li>å½“ä¸šåŠ¡æ¯”è¾ƒå¤æ‚ï¼Œå¤šçº¿ç¨‹åº”ç”¨é‡Œæœ‰å¯èƒ½ä¼šå‘ç”Ÿæ­»é”</li>
  <li>çº¿ç¨‹1 é¦–å…ˆå æœ‰å¯¹è±¡1ï¼Œæ¥ç€è¯•å›¾å æœ‰å¯¹è±¡2</li>
  <li>çº¿ç¨‹2 é¦–å…ˆå æœ‰å¯¹è±¡2ï¼Œæ¥ç€è¯•å›¾å æœ‰å¯¹è±¡1</li>
  <li>çº¿ç¨‹1 ç­‰å¾…çº¿ç¨‹2é‡Šæ”¾å¯¹è±¡2</li>
  <li>ä¸æ­¤åŒæ—¶ï¼Œçº¿ç¨‹2ç­‰å¾…çº¿ç¨‹1é‡Šæ”¾å¯¹è±¡1</li>
  <li>å°±ä¼šã€‚ã€‚ã€‚ä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œç›´åˆ°å¤©è’åœ°è€ï¼Œæµ·æ¯çŸ³çƒ‚ï¼Œå±±æ— æ£± ï¼Œå¤©åœ°åˆã€‚ã€‚ã€‚</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/794.png" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DeadlockTest</span> <span class="o">{</span>
	<span class="c1">//å®šä¹‰2ä¸ªèµ„æº</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Integer</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Integer</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//å¯åŠ¨2ä¸ªçº¿ç¨‹,åˆ†åˆ«è°ƒç”¨getA()å’ŒgetB()</span>
        <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="nl">DeadlockTest:</span><span class="o">:</span><span class="n">getA</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
        <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="nl">DeadlockTest:</span><span class="o">:</span><span class="n">getB</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>
	<span class="kd">static</span> <span class="kt">void</span> <span class="nf">getA</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">//ç”¨synchronized å¯¹aå¯¹è±¡åŠ é”</span>
        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"è·å–åˆ°Aé”"</span><span class="o">);</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="c1">//ç­‰å¾…500ms,å†å»è·å–Bèµ„æºé”,è®©å¦ä¸€ä¸ªçº¿ç¨‹æœ‰æ—¶é—´å»ç‹¬å b</span>
                <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span>
                <span class="n">getB</span><span class="o">();</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"è·å–åˆ°Bé”"</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">getB</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">b</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"è·å–åˆ°Bé”"</span><span class="o">);</span>
             <span class="k">try</span> <span class="o">{</span>
                <span class="c1">//ç­‰å¾…500ms,å†å»è·å–Aèµ„æºé”,è®©å¦ä¸€ä¸ªçº¿ç¨‹æœ‰æ—¶é—´å»ç‹¬å a</span>
                <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span>
            	<span class="n">getA</span><span class="o">();</span>
            	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"è·å–åˆ°Aé”"</span><span class="o">);</span>
             <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
Thread-0è·å–åˆ°Aé”
Thread-1è·å–åˆ°Bé”

Thread-0åœ¨æ‹¿åˆ°aå¯¹è±¡çš„ç›‘è§†å™¨é”ï¼ˆåæ–‡ç®€ç§°â€œAé”â€ï¼‰ä¹‹åï¼Œåˆè¦å»æ‹¿bå¯¹è±¡çš„ç›‘è§†å™¨é”ï¼ˆç®€ç§°â€œBé”â€ï¼‰ï¼Œè€Œæ­¤æ—¶Bé”åœ¨Thread-1æ‰‹ä¸­ï¼Œäºæ˜¯Thread-0åªèƒ½é˜»å¡ï¼Œç­‰å¾…Bé”è¢«Thread-1é‡Šæ”¾ã€‚å¯¹Thread-1è€Œè¨€ï¼Œäº¦æ˜¯å¦‚æ­¤ï¼Œæ­»é”äº§ç”Ÿã€‚

äº’æ–¥æ¡ä»¶:åœ¨ä¸Šé¢ä»£ç ä¸­å°±æ˜¯é€šè¿‡synchronizedåŠ é”ï¼Œè¯¥é”æ˜¯ç‹¬å çš„ã€æ’å®ƒçš„ã€‚ä¸€ä¸ªçº¿ç¨‹è·å–åˆ°ä¹‹åï¼Œä¸å…è®¸ç¬¬äºŒä¸ªçº¿ç¨‹åŒæ—¶è·å–ã€‚

è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼šThread-0æ‹¿åˆ°Aé”çš„åŒæ—¶ï¼Œåˆè¦è¯·æ±‚Bé”ï¼Œä½†Bé”è¢« Thread-1å æœ‰ï¼Œæ‰€ä»¥è¦é˜»å¡è‡ªå·±ï¼Œç­‰å¾…Bèµ„æºã€‚

ä¸å‰¥å¤ºæ¡ä»¶ï¼šThread-0ä¸èƒ½æŠ¢å Thread-1å·²æ‹¥æœ‰çš„èµ„æºï¼Œåªèƒ½ç­‰å¾…å…¶ä¸»åŠ¨é‡Šæ”¾ã€‚

ç¯è·¯ç­‰å¾…æ¡ä»¶ï¼šhread-0ç­‰å¾…Thread-1å ç”¨çš„èµ„æºBï¼ŒThread-1ç­‰å¾…Thread-0å ç”¨çš„èµ„æºAï¼Œå½¢æˆç¯è·¯ç­‰å¾…æ¡ä»¶ã€‚
*/</span>
</code></pre></div></div>

<h2 id="äº¤äº’">äº¤äº’</h2>

<ul>
  <li>çº¿ç¨‹ä¹‹é—´æœ‰äº¤äº’é€šçŸ¥çš„éœ€æ±‚ï¼Œè€ƒè™‘å¦‚ä¸‹æƒ…å†µï¼š</li>
  <li>æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œå¤„ç†åŒä¸€ä¸ªè‹±é›„ã€‚ ä¸€ä¸ªåŠ è¡€ï¼Œä¸€ä¸ªå‡è¡€ã€‚å‡è¡€çš„çº¿ç¨‹ï¼Œå‘ç°è¡€é‡=1ï¼Œå°±åœæ­¢å‡è¡€ï¼Œç›´åˆ°åŠ è¡€çš„çº¿ç¨‹ä¸ºè‹±é›„åŠ äº†è¡€ï¼Œæ‰å¯ä»¥ç»§ç»­å‡è¡€</li>
  <li>åœ¨Heroç±»ä¸­ï¼šhurt()å‡è¡€æ–¹æ³•ï¼šå½“hp=1çš„æ—¶å€™ï¼Œæ‰§è¡Œthis.wait().</li>
  <li>this.wait()è¡¨ç¤º è®©å æœ‰thisçš„çº¿ç¨‹ç­‰å¾…ï¼Œå¹¶ä¸´æ—¶é‡Šæ”¾å æœ‰</li>
  <li>è¿›å…¥hurtæ–¹æ³•çš„çº¿ç¨‹å¿…ç„¶æ˜¯å‡è¡€çº¿ç¨‹ï¼Œthis.wait()ä¼šè®©å‡è¡€çº¿ç¨‹ä¸´æ—¶é‡Šæ”¾å¯¹thisçš„å æœ‰ã€‚ è¿™æ ·åŠ è¡€çº¿ç¨‹ï¼Œå°±æœ‰æœºä¼šè¿›å…¥recover()åŠ è¡€æ–¹æ³•äº†ã€‚</li>
  <li>recover() åŠ è¡€æ–¹æ³•ï¼šå¢åŠ äº†è¡€é‡ï¼Œæ‰§è¡Œthis.notify();</li>
  <li>this.notify() è¡¨ç¤ºé€šçŸ¥é‚£äº›ç­‰å¾…åœ¨thisçš„çº¿ç¨‹ï¼Œå¯ä»¥è‹é†’è¿‡æ¥äº†ã€‚ ç­‰å¾…åœ¨thisçš„çº¿ç¨‹ï¼Œæ°æ°å°±æ˜¯å‡è¡€çº¿ç¨‹ã€‚ ä¸€æ—¦recover()ç»“æŸï¼Œ åŠ è¡€çº¿ç¨‹é‡Šæ”¾äº†thisï¼Œå‡è¡€çº¿ç¨‹ï¼Œå°±å¯ä»¥é‡æ–°å æœ‰thisï¼Œå¹¶æ‰§è¡Œåé¢çš„å‡è¡€å·¥ä½œã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">charactor</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hero</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kt">float</span> <span class="n">hp</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kt">int</span> <span class="n">damage</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">recover</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">hp</span> <span class="o">=</span> <span class="n">hp</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%s å›è¡€1ç‚¹,å¢åŠ è¡€åï¼Œ%sçš„è¡€é‡æ˜¯%.0f%n"</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">hp</span><span class="o">);</span>
		<span class="c1">// é€šçŸ¥é‚£äº›ç­‰å¾…åœ¨thiså¯¹è±¡ä¸Šçš„çº¿ç¨‹ï¼Œå¯ä»¥é†’è¿‡æ¥äº†ï¼Œå¦‚ç¬¬20è¡Œï¼Œç­‰å¾…ç€çš„å‡è¡€çº¿ç¨‹ï¼Œè‹é†’è¿‡æ¥</span>
		<span class="k">this</span><span class="o">.</span><span class="na">notify</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">hurt</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">hp</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">try</span> <span class="o">{</span>
				<span class="c1">// è®©å æœ‰thisçš„å‡è¡€çº¿ç¨‹ï¼Œæš‚æ—¶é‡Šæ”¾å¯¹thisçš„å æœ‰ï¼Œå¹¶ç­‰å¾…</span>
				<span class="k">this</span><span class="o">.</span><span class="na">wait</span><span class="o">();</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">// TODO Auto-generated catch block</span>
				<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span>

		<span class="n">hp</span> <span class="o">=</span> <span class="n">hp</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%s å‡è¡€1ç‚¹,å‡å°‘è¡€åï¼Œ%sçš„è¡€é‡æ˜¯%.0f%n"</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">hp</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">attackHero</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">h</span><span class="o">.</span><span class="na">hp</span> <span class="o">-=</span> <span class="n">damage</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s æ­£åœ¨æ”»å‡» %s, %sçš„è¡€å˜æˆäº† %.0f%n"</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">isDead</span><span class="o">())</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span> <span class="s">"æ­»äº†ï¼"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDead</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="mi">0</span> <span class="o">&gt;=</span> <span class="n">hp</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span> <span class="kc">false</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span>


</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
     
<span class="kn">import</span> <span class="nn">java.awt.GradientPaint</span><span class="o">;</span>
   
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
     
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
     
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
   
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"ç›–ä¼¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">616</span><span class="o">;</span>
            
        <span class="nc">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
                      
                    <span class="c1">//æ— éœ€å¾ªç¯åˆ¤æ–­</span>
<span class="c1">//                    while(gareen.hp==1){</span>
<span class="c1">//                        continue;</span>
<span class="c1">//                    }</span>
                      
                    <span class="n">gareen</span><span class="o">.</span><span class="na">hurt</span><span class="o">();</span>
                    
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
  
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
  
        <span class="nc">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">recover</span><span class="o">();</span>
  
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
  
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            
    <span class="o">}</span>
         
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/796.png" alt="" /></p>

<ul>
  <li>è¿™é‡Œéœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œwaitæ–¹æ³•å’Œnotifyæ–¹æ³•ï¼Œå¹¶ä¸æ˜¯Threadçº¿ç¨‹ä¸Šçš„æ–¹æ³•ï¼Œå®ƒä»¬æ˜¯Objectä¸Šçš„æ–¹æ³•ã€‚</li>
  <li>å› ä¸ºæ‰€æœ‰çš„Objectéƒ½å¯ä»¥è¢«ç”¨æ¥ä½œä¸ºåŒæ­¥å¯¹è±¡ï¼Œæ‰€ä»¥å‡†ç¡®çš„è®²ï¼Œwaitå’Œnotifyæ˜¯åŒæ­¥å¯¹è±¡ä¸Šçš„æ–¹æ³•ã€‚</li>
  <li>wait()çš„æ„æ€æ˜¯ï¼š è®©å ç”¨äº†è¿™ä¸ªåŒæ­¥å¯¹è±¡çš„çº¿ç¨‹ï¼Œä¸´æ—¶é‡Šæ”¾å½“å‰çš„å ç”¨ï¼Œå¹¶ä¸”ç­‰å¾…ã€‚ æ‰€ä»¥è°ƒç”¨waitæ˜¯æœ‰å‰ææ¡ä»¶çš„ï¼Œä¸€å®šæ˜¯åœ¨synchronizedå—é‡Œï¼Œå¦åˆ™å°±ä¼šå‡ºé”™ã€‚</li>
  <li>notify() çš„æ„æ€æ˜¯ï¼Œé€šçŸ¥ä¸€ä¸ªç­‰å¾…åœ¨è¿™ä¸ªåŒæ­¥å¯¹è±¡ä¸Šçš„çº¿ç¨‹ï¼Œä½ å¯ä»¥è‹é†’è¿‡æ¥äº†ï¼Œæœ‰æœºä¼šé‡æ–°å ç”¨å½“å‰å¯¹è±¡äº†ã€‚</li>
  <li>notifyAll() çš„æ„æ€æ˜¯ï¼Œé€šçŸ¥æ‰€æœ‰çš„ç­‰å¾…åœ¨è¿™ä¸ªåŒæ­¥å¯¹è±¡ä¸Šçš„çº¿ç¨‹ï¼Œä½ ä»¬å¯ä»¥è‹é†’è¿‡æ¥äº†ï¼Œæœ‰æœºä¼šé‡æ–°å ç”¨å½“å‰å¯¹è±¡äº†ã€‚</li>
</ul>
:ET