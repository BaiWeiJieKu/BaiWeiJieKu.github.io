I"’!<ul id="markdown-toc">
  <li><a href="#åœºæ™¯" id="markdown-toc-åœºæ™¯">åœºæ™¯</a></li>
  <li><a href="#æ ¸å¿ƒ" id="markdown-toc-æ ¸å¿ƒ">æ ¸å¿ƒ</a></li>
  <li><a href="#ç»“æ„" id="markdown-toc-ç»“æ„">ç»“æ„</a></li>
  <li><a href="#æ¡ˆä¾‹" id="markdown-toc-æ¡ˆä¾‹">æ¡ˆä¾‹</a>    <ul>
      <li><a href="#çŠ¶æ€æ¥å£" id="markdown-toc-çŠ¶æ€æ¥å£">çŠ¶æ€æ¥å£</a></li>
      <li><a href="#ç©ºé—²çŠ¶æ€" id="markdown-toc-ç©ºé—²çŠ¶æ€">ç©ºé—²çŠ¶æ€</a></li>
      <li><a href="#é¢„å®šçŠ¶æ€" id="markdown-toc-é¢„å®šçŠ¶æ€">é¢„å®šçŠ¶æ€</a></li>
      <li><a href="#å…¥ä½çŠ¶æ€" id="markdown-toc-å…¥ä½çŠ¶æ€">å…¥ä½çŠ¶æ€</a></li>
      <li><a href="#æˆ¿é—´å¯¹è±¡" id="markdown-toc-æˆ¿é—´å¯¹è±¡">æˆ¿é—´å¯¹è±¡</a></li>
      <li><a href="#æµ‹è¯•" id="markdown-toc-æµ‹è¯•">æµ‹è¯•</a></li>
      <li><a href="#ç»“æ„å›¾" id="markdown-toc-ç»“æ„å›¾">ç»“æ„å›¾</a></li>
    </ul>
  </li>
  <li><a href="#ä½¿ç”¨åœºæ™¯" id="markdown-toc-ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</a></li>
</ul>
<h3 id="åœºæ™¯">åœºæ™¯</h3>

<ul>
  <li>â€“é…’åº—ç³»ç»Ÿä¸­ï¼Œæˆ¿é—´çš„çŠ¶æ€å˜åŒ–ï¼šå·²é¢„è®¢ï¼Œå·²å…¥ä½ï¼Œç©ºé—²</li>
</ul>

<h3 id="æ ¸å¿ƒ">æ ¸å¿ƒ</h3>

<ul>
  <li>ç”¨äºè§£å†³ç³»ç»Ÿä¸­å¤æ‚å¯¹è±¡çš„çŠ¶æ€è½¬æ¢ä»¥åŠä¸åŒçŠ¶æ€ä¸‹è¡Œä¸ºçš„å°è£…é—®é¢˜</li>
</ul>

<h3 id="ç»“æ„">ç»“æ„</h3>

<ul>
  <li>Contextç¯å¢ƒç±»ï¼šç¯å¢ƒç±»ä¸­ç»´æŠ¤ä¸€ä¸ªStateå¯¹è±¡ï¼Œä»–æ˜¯å®šä¹‰äº†å½“å‰çš„çŠ¶æ€</li>
  <li>StateæŠ½è±¡çŠ¶æ€ç±»</li>
  <li>ConcreteStateå…·ä½“çŠ¶æ€ç±»ï¼šæ¯ä¸€ä¸ªç±»å°è£…äº†ä¸€ä¸ªçŠ¶æ€å¯¹åº”çš„è¡Œä¸º</li>
</ul>

<h3 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h3>

<h4 id="çŠ¶æ€æ¥å£">çŠ¶æ€æ¥å£</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.state</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">State</span> <span class="o">{</span>
	<span class="kt">void</span> <span class="nf">handle</span><span class="o">();</span>
<span class="o">}</span>

</code></pre></div></div>

<h4 id="ç©ºé—²çŠ¶æ€">ç©ºé—²çŠ¶æ€</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.state</span><span class="o">;</span>

<span class="cm">/**
 * ç©ºé—²çŠ¶æ€
 * @author Administrator
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FreeState</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"æˆ¿é—´ç©ºé—²ï¼ï¼ï¼æ²¡äººä½ï¼"</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<h4 id="é¢„å®šçŠ¶æ€">é¢„å®šçŠ¶æ€</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.state</span><span class="o">;</span>

<span class="cm">/**
 * å·²é¢„è®¢çŠ¶æ€
 * @author Administrator
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookedState</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"æˆ¿é—´å·²é¢„è®¢ï¼åˆ«äººä¸èƒ½å®šï¼"</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<h4 id="å…¥ä½çŠ¶æ€">å…¥ä½çŠ¶æ€</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.state</span><span class="o">;</span>

<span class="cm">/**
 * å·²å…¥ä½çŠ¶æ€
 * @author Administrator
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CheckedInState</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"æˆ¿é—´å·²å…¥ä½ï¼è¯·å‹¿æ‰“æ‰°ï¼"</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<h4 id="æˆ¿é—´å¯¹è±¡">æˆ¿é—´å¯¹è±¡</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.state</span><span class="o">;</span>


<span class="cm">/**
 * æˆ¿é—´å¯¹è±¡
 * @author Administrator
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeContext</span> <span class="o">{</span>
	<span class="c1">//å¦‚æœæ˜¯é“¶è¡Œç³»ç»Ÿï¼Œè¿™ä¸ªContextç±»å°±æ˜¯è´¦å·ã€‚æ ¹æ®é‡‘é¢ä¸åŒï¼Œåˆ‡æ¢ä¸åŒçš„çŠ¶æ€ï¼</span>
	
	<span class="kd">private</span> <span class="nc">State</span> <span class="n">state</span><span class="o">;</span>
	
	
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setState</span><span class="o">(</span><span class="nc">State</span> <span class="n">s</span><span class="o">){</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ä¿®æ”¹çŠ¶æ€ï¼"</span><span class="o">);</span>
		<span class="n">state</span> <span class="o">=</span> <span class="n">s</span><span class="o">;</span>
		<span class="n">state</span><span class="o">.</span><span class="na">handle</span><span class="o">();</span>
	<span class="o">}</span>
	
<span class="o">}</span>

</code></pre></div></div>

<h4 id="æµ‹è¯•">æµ‹è¯•</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.state</span><span class="o">;</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">HomeContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HomeContext</span><span class="o">();</span>
		
		<span class="n">ctx</span><span class="o">.</span><span class="na">setState</span><span class="o">(</span><span class="k">new</span> <span class="nc">FreeState</span><span class="o">());</span>
		<span class="n">ctx</span><span class="o">.</span><span class="na">setState</span><span class="o">(</span><span class="k">new</span> <span class="nc">BookedState</span><span class="o">());</span>
		
	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ä¿®æ”¹çŠ¶æ€ï¼
æˆ¿é—´ç©ºé—²ï¼ï¼ï¼æ²¡äººä½ï¼
ä¿®æ”¹çŠ¶æ€ï¼
æˆ¿é—´å·²é¢„è®¢ï¼åˆ«äººä¸èƒ½å®šï¼
</code></pre></div></div>

<h4 id="ç»“æ„å›¾">ç»“æ„å›¾</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ç©ºé—²---&gt;é¢„å®š---&gt;å·²é¢„è®¢
å·²é¢„è®¢---&gt;é€€è®¢---&gt;ç©ºé—²

å·²é¢„è®¢---&gt;ä½å…¥---&gt;å·²å…¥ä½
å·²å…¥ä½---&gt;ç»­è´¹---&gt;å·²é¢„è®¢

å·²å…¥ä½---&gt;é€€æˆ¿---&gt;ç©ºé—²
ç©ºé—²---&gt;ä½å…¥---&gt;å·²å…¥ä½
</code></pre></div></div>

<h3 id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</h3>

<ul>
  <li>é“¶è¡Œç³»ç»Ÿä¸­è´¦å·çŠ¶æ€çš„ç®¡ç†</li>
  <li>OAç³»ç»Ÿä¸­å…¬æ–‡çŠ¶æ€çš„ç®¡ç†</li>
  <li>é…’åº—ç³»ç»Ÿä¸­ï¼Œæˆ¿é—´çŠ¶æ€çš„ç®¡ç†</li>
  <li>çº¿ç¨‹å¯¹è±¡å„çŠ¶æ€ä¹‹é—´çš„åˆ‡æ¢</li>
</ul>
:ET