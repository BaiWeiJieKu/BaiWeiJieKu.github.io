I"”‚<ul id="markdown-toc">
  <li><a href="#è·å–ç±»å¯¹è±¡" id="markdown-toc-è·å–ç±»å¯¹è±¡">è·å–ç±»å¯¹è±¡</a>    <ul>
      <li><a href="#ç±»å¯¹è±¡" id="markdown-toc-ç±»å¯¹è±¡">ç±»å¯¹è±¡</a></li>
      <li><a href="#è·å–" id="markdown-toc-è·å–">è·å–</a></li>
    </ul>
  </li>
  <li><a href="#åˆ›å»ºå¯¹è±¡" id="markdown-toc-åˆ›å»ºå¯¹è±¡">åˆ›å»ºå¯¹è±¡</a></li>
  <li><a href="#è®¿é—®å±æ€§" id="markdown-toc-è®¿é—®å±æ€§">è®¿é—®å±æ€§</a>    <ul>
      <li><a href="#è®¿é—®ç§æœ‰å±æ€§" id="markdown-toc-è®¿é—®ç§æœ‰å±æ€§">è®¿é—®ç§æœ‰å±æ€§</a></li>
    </ul>
  </li>
  <li><a href="#è°ƒç”¨æ–¹æ³•" id="markdown-toc-è°ƒç”¨æ–¹æ³•">è°ƒç”¨æ–¹æ³•</a></li>
  <li><a href="#è¯¦ç»†æ–‡ç« " id="markdown-toc-è¯¦ç»†æ–‡ç« ">è¯¦ç»†æ–‡ç« </a></li>
  <li><a href="#é¢è¯•é¢˜" id="markdown-toc-é¢è¯•é¢˜">é¢è¯•é¢˜</a>    <ul>
      <li><a href="#å®ç°è¿‡ç¨‹å’Œä½œç”¨" id="markdown-toc-å®ç°è¿‡ç¨‹å’Œä½œç”¨">å®ç°è¿‡ç¨‹å’Œä½œç”¨</a></li>
    </ul>
  </li>
</ul>
<h3 id="è·å–ç±»å¯¹è±¡">è·å–ç±»å¯¹è±¡</h3>

<h4 id="ç±»å¯¹è±¡">ç±»å¯¹è±¡</h4>

<ul>
  <li>garenå’Œteemoéƒ½æ˜¯<strong>Heroå¯¹è±¡</strong>ï¼Œä»–ä»¬çš„åŒºåˆ«åœ¨äºï¼Œå„è‡ªæœ‰<strong>ä¸åŒçš„åç§°ï¼Œè¡€é‡ï¼Œä¼¤å®³å€¼</strong></li>
  <li>Heroå’ŒIteméƒ½æ˜¯ç±»ï¼Œä»–ä»¬çš„åŒºåˆ«åœ¨äºæœ‰<strong>ä¸åŒçš„æ–¹æ³•ï¼Œä¸åŒçš„å±æ€§</strong>ã€‚</li>
  <li><strong>ç±»å¯¹è±¡</strong>ï¼Œå°±æ˜¯ç”¨äºæè¿°è¿™ç§ç±»ï¼Œéƒ½æœ‰ä»€ä¹ˆå±æ€§ï¼Œä»€ä¹ˆæ–¹æ³•çš„</li>
</ul>

<h4 id="è·å–">è·å–</h4>

<ul>
  <li>åœ¨ä¸€ä¸ªJVMä¸­ï¼Œä¸€ç§ç±»ï¼Œåªä¼šæœ‰ä¸€ä¸ªç±»å¯¹è±¡å­˜åœ¨ã€‚</li>
  <li>å‡†ç¡®çš„è®²æ˜¯ä¸€ä¸ªClassLoaderä¸‹ï¼Œä¸€ç§ç±»ï¼Œåªä¼šæœ‰ä¸€ä¸ªç±»å¯¹è±¡å­˜åœ¨ã€‚é€šå¸¸ä¸€ä¸ªJVMä¸‹ï¼Œåªä¼šæœ‰ä¸€ä¸ªClassLoaderã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">reflection</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestReflection</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
			<span class="nc">String</span> <span class="n">className</span> <span class="o">=</span> <span class="s">"charactor.Hero"</span><span class="o">;</span>
			<span class="k">try</span> <span class="o">{</span>
                <span class="c1">//æ–¹å¼ä¸€</span>
				<span class="nc">Class</span> <span class="n">pClass1</span><span class="o">=</span><span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">className</span><span class="o">);</span>
                <span class="c1">//æ–¹å¼äºŒ</span>
				<span class="nc">Class</span> <span class="n">pClass2</span><span class="o">=</span><span class="nc">Hero</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
                <span class="c1">//æ–¹å¼ä¸‰</span>
				<span class="nc">Class</span> <span class="n">pClass3</span><span class="o">=</span><span class="k">new</span> <span class="nc">Hero</span><span class="o">().</span><span class="na">getClass</span><span class="o">();</span>
				<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">pClass1</span><span class="o">==</span><span class="n">pClass2</span><span class="o">);</span>
				<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">pClass1</span><span class="o">==</span><span class="n">pClass3</span><span class="o">);</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">// TODO Auto-generated catch block</span>
				<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
			<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>æ— è®ºä»€ä¹ˆé€”å¾„è·å–ç±»å¯¹è±¡ï¼Œéƒ½ä¼šå¯¼è‡´é™æ€å±æ€§è¢«åˆå§‹åŒ–ï¼Œè€Œä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚ï¼ˆé™¤äº†ç›´æ¥ä½¿ç”¨ Class c = Hero.class è¿™ç§æ–¹å¼ï¼Œè¿™ç§æ–¹å¼ä¸ä¼šå¯¼è‡´é™æ€å±æ€§è¢«åˆå§‹åŒ–ï¼‰</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">charactor</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hero</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kt">float</span> <span class="n">hp</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="n">damage</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>

	<span class="kd">static</span> <span class="nc">String</span> <span class="n">copyright</span><span class="o">;</span>

	<span class="kd">static</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"åˆå§‹åŒ– copyright"</span><span class="o">);</span>
		<span class="n">copyright</span> <span class="o">=</span> <span class="s">"ç‰ˆæƒç”±Riot Gameså…¬å¸æ‰€æœ‰"</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<h3 id="åˆ›å»ºå¯¹è±¡">åˆ›å»ºå¯¹è±¡</h3>

<ul>
  <li>ä¸ä¼ ç»Ÿçš„é€šè¿‡new æ¥è·å–å¯¹è±¡çš„æ–¹å¼ä¸åŒ</li>
  <li>åå°„æœºåˆ¶ï¼Œä¼šå…ˆæ‹¿åˆ°Heroçš„â€œç±»å¯¹è±¡â€,ç„¶åé€šè¿‡ç±»å¯¹è±¡è·å–â€œæ„é€ å™¨å¯¹è±¡â€</li>
  <li>å†é€šè¿‡æ„é€ å™¨å¯¹è±¡åˆ›å»ºä¸€ä¸ªå¯¹è±¡</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">reflection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Constructor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestReflection</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    	<span class="c1">//ä¼ ç»Ÿçš„ä½¿ç”¨newçš„æ–¹å¼åˆ›å»ºå¯¹è±¡</span>
        <span class="nc">Hero</span> <span class="n">h1</span> <span class="o">=</span><span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">h1</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"teemo"</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h1</span><span class="o">);</span>
         
        <span class="k">try</span> <span class="o">{</span>
        	<span class="c1">//ä½¿ç”¨åå°„çš„æ–¹å¼åˆ›å»ºå¯¹è±¡</span>
            <span class="nc">String</span> <span class="n">className</span> <span class="o">=</span> <span class="s">"charactor.Hero"</span><span class="o">;</span>
            <span class="c1">//ç±»å¯¹è±¡</span>
            <span class="nc">Class</span> <span class="n">pClass</span><span class="o">=</span><span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">className</span><span class="o">);</span>
            <span class="c1">//æ„é€ å™¨</span>
            <span class="nc">Constructor</span> <span class="n">c</span><span class="o">=</span> <span class="n">pClass</span><span class="o">.</span><span class="na">getConstructor</span><span class="o">();</span>
            <span class="c1">//é€šè¿‡æ„é€ å™¨å®ä¾‹åŒ–</span>
            <span class="nc">Hero</span> <span class="n">h2</span><span class="o">=</span> <span class="o">(</span><span class="nc">Hero</span><span class="o">)</span> <span class="n">c</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
            <span class="n">h2</span><span class="o">.</span><span class="na">name</span><span class="o">=</span><span class="s">"gareen"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h2</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="è®¿é—®å±æ€§">è®¿é—®å±æ€§</h3>

<ul>
  <li>
    <p>ä¸ºäº†è®¿é—®å±æ€§ï¼ŒæŠŠnameä¿®æ”¹ä¸ºpublicã€‚</p>
  </li>
  <li>
    <p>å¯¹äºprivateä¿®é¥°çš„æˆå‘˜ï¼Œéœ€è¦ä½¿ç”¨setAccessible(true)æ‰èƒ½è®¿é—®å’Œä¿®æ”¹ã€‚</p>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">charactor</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hero</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kt">float</span> <span class="n">hp</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="n">damage</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
	
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nf">Hero</span><span class="o">(){</span>
		
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nf">Hero</span><span class="o">(</span><span class="nc">String</span> <span class="n">string</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">name</span> <span class="o">=</span><span class="n">string</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="s">"Hero [name="</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">"]"</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDead</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">// TODO Auto-generated method stub</span>
		<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">attackHero</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h2</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">+</span> <span class="s">" æ­£åœ¨æ”»å‡» "</span> <span class="o">+</span> <span class="n">h2</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
	<span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">reflection</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.Field</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestReflection</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">Hero</span> <span class="n">h</span> <span class="o">=</span><span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
            <span class="c1">//ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼ä¿®æ”¹nameçš„å€¼ä¸ºgaren</span>
            <span class="n">h</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"garen"</span><span class="o">;</span>
            <span class="k">try</span> <span class="o">{</span>
            	<span class="c1">//è·å–ç±»Heroçš„åå­—å«åšnameçš„å­—æ®µ</span>
                <span class="nc">Field</span> <span class="n">f1</span><span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>
                <span class="c1">//ä¿®æ”¹è¿™ä¸ªå­—æ®µçš„å€¼</span>
                <span class="n">f1</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">h</span><span class="o">,</span> <span class="s">"teemo"</span><span class="o">);</span>
                <span class="c1">//æ‰“å°è¢«ä¿®æ”¹åçš„å€¼</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
                
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>getField <strong>åªèƒ½è·å–</strong>publicçš„ï¼ŒåŒ…æ‹¬<strong>ä»çˆ¶ç±»ç»§æ‰¿</strong>æ¥çš„å­—æ®µã€‚</li>
  <li>getDeclaredField å¯ä»¥è·å–æœ¬ç±»æ‰€æœ‰çš„å­—æ®µï¼Œ<strong>åŒ…æ‹¬private</strong>çš„ï¼Œä½†æ˜¯<strong>ä¸èƒ½è·å–ç»§æ‰¿</strong>æ¥çš„å­—æ®µã€‚ (<strong>æ³¨</strong>ï¼š è¿™é‡Œåªèƒ½è·å–åˆ°privateçš„<strong>å­—æ®µ</strong>ï¼Œä½†å¹¶ä¸èƒ½è®¿é—®è¯¥privateå­—æ®µçš„<strong>å€¼</strong>,é™¤éåŠ ä¸Š<strong>setAccessible(true)</strong>)</li>
</ul>

<h4 id="è®¿é—®ç§æœ‰å±æ€§">è®¿é—®ç§æœ‰å±æ€§</h4>

<ul>
  <li>å¯ä»¥é€šè¿‡ç±»å¯¹è±¡çš„getDeclaredField()æ–¹æ³•è·å–å­—æ®µï¼ˆFieldï¼‰å¯¹è±¡ï¼Œç„¶åå†é€šè¿‡å­—æ®µå¯¹è±¡çš„setAccessible(true)å°†å…¶è®¾ç½®ä¸ºå¯ä»¥è®¿é—®ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥é€šè¿‡get/setæ–¹æ³•æ¥è·å–/è®¾ç½®å­—æ®µçš„å€¼äº†ã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">chimomo.learning.java.code.reflection</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.lang.reflect.Constructor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Field</span><span class="o">;</span>
 
<span class="cm">/**
 * @author Created by Chimomo
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReflectionUtil</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nf">ReflectionUtil</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">AssertionError</span><span class="o">();</span>
    <span class="o">}</span>
 
    <span class="cm">/**
     * é€šè¿‡åå°„å–å¯¹è±¡æŒ‡å®šå­—æ®µ(å±æ€§)çš„å€¼
     *
     * @param target    ç›®æ ‡å¯¹è±¡
     * @param fieldName å­—æ®µçš„åå­—
     * @return å­—æ®µçš„å€¼
     * @throws å¦‚æœå–ä¸åˆ°å¯¹è±¡æŒ‡å®šå­—æ®µçš„å€¼åˆ™æŠ›å‡ºå¼‚å¸¸
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="nf">getValue</span><span class="o">(</span><span class="nc">Object</span> <span class="n">target</span><span class="o">,</span> <span class="nc">String</span> <span class="n">fieldName</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">clazz</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
        <span class="nc">String</span><span class="o">[]</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">"\\."</span><span class="o">);</span>
 
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">fs</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="nc">Field</span> <span class="n">f</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="n">fs</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
                <span class="n">f</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
                <span class="n">target</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">target</span><span class="o">);</span>
                <span class="n">clazz</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
            <span class="o">}</span>
 
            <span class="nc">Field</span> <span class="n">f</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="n">fs</span><span class="o">[</span><span class="n">fs</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]);</span>
            <span class="n">f</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
            <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">target</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
 
    <span class="cm">/**
     * é€šè¿‡åå°„ç»™å¯¹è±¡çš„æŒ‡å®šå­—æ®µèµ‹å€¼
     *
     * @param target    ç›®æ ‡å¯¹è±¡
     * @param fieldName å­—æ®µçš„åç§°
     * @param value     å€¼
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setValue</span><span class="o">(</span><span class="nc">Object</span> <span class="n">target</span><span class="o">,</span> <span class="nc">String</span> <span class="n">fieldName</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">clazz</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
        <span class="nc">String</span><span class="o">[]</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">"\\."</span><span class="o">);</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">fs</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="nc">Field</span> <span class="n">f</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="n">fs</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
                <span class="n">f</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
                <span class="nc">Object</span> <span class="n">val</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">target</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">val</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nc">Constructor</span><span class="o">&lt;?&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="na">getType</span><span class="o">().</span><span class="na">getDeclaredConstructor</span><span class="o">();</span>
                    <span class="n">c</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
                    <span class="n">f</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">target</span><span class="o">,</span> <span class="n">val</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">target</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span>
                <span class="n">clazz</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
            <span class="o">}</span>
 
            <span class="nc">Field</span> <span class="n">f</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="n">fs</span><span class="o">[</span><span class="n">fs</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]);</span>
            <span class="n">f</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
            <span class="n">f</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">target</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="è°ƒç”¨æ–¹æ³•">è°ƒç”¨æ–¹æ³•</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">charactor</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hero</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kt">float</span> <span class="n">hp</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="n">damage</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
	
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nf">Hero</span><span class="o">(){</span>
		
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nf">Hero</span><span class="o">(</span><span class="nc">String</span> <span class="n">string</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">name</span> <span class="o">=</span><span class="n">string</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="s">"Hero [name="</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">"]"</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDead</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">// TODO Auto-generated method stub</span>
		<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">attackHero</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h2</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">// TODO Auto-generated method stub</span>
		
	<span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">reflection</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestReflection</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Hero</span> <span class="n">h</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>

		<span class="k">try</span> <span class="o">{</span>
			<span class="c1">// è·å–è¿™ä¸ªåå­—å«åšsetNameï¼Œå‚æ•°ç±»å‹æ˜¯Stringçš„æ–¹æ³•</span>
			<span class="nc">Method</span> <span class="n">m</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"setName"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
			<span class="c1">// å¯¹hå¯¹è±¡ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•</span>
			<span class="n">m</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">h</span><span class="o">,</span> <span class="s">"ç›–ä¼¦"</span><span class="o">);</span>
			<span class="c1">// ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼ï¼Œè°ƒç”¨getNameæ–¹æ³•</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>

		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="è¯¦ç»†æ–‡ç« ">è¯¦ç»†æ–‡ç« </h3>

<p><a href="https://blog.csdn.net/lwl20140904/article/details/80163880">é€šä¿—æ˜“æ‡‚çš„è®²åå°„</a></p>

<h3 id="é¢è¯•é¢˜">é¢è¯•é¢˜</h3>

<h4 id="å®ç°è¿‡ç¨‹å’Œä½œç”¨">å®ç°è¿‡ç¨‹å’Œä½œç”¨</h4>

<ul>
  <li>JAVAè¯­è¨€ç¼–è¯‘ä¹‹åä¼šç”Ÿæˆä¸€ä¸ª.classæ–‡ä»¶ï¼Œåå°„å°±æ˜¯é€šè¿‡å­—èŠ‚ç æ–‡ä»¶æ‰¾åˆ°æŸä¸€ä¸ªç±»ã€ç±»ä¸­çš„æ–¹æ³•ä»¥åŠå±æ€§ç­‰</li>
  <li>åå°„çš„å®ç°ä¸»è¦å€ŸåŠ©ä»¥ä¸‹å››ä¸ªç±»ï¼šClassï¼šç±»çš„å¯¹è±¡ï¼ŒConstructorï¼šç±»çš„æ„é€ æ–¹æ³•ï¼ŒFieldï¼šç±»ä¸­çš„å±æ€§å¯¹è±¡ï¼ŒMethodï¼šç±»ä¸­çš„æ–¹æ³•å¯¹è±¡ã€‚</li>
  <li>ä½œç”¨ï¼šåå°„æœºåˆ¶æŒ‡çš„æ˜¯ç¨‹åºåœ¨è¿è¡Œæ—¶èƒ½å¤Ÿè·å–è‡ªèº«çš„ä¿¡æ¯ã€‚åœ¨JAVAä¸­ï¼Œåªè¦ç»™å®šç±»çš„åå­—ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡åå°„æœºåˆ¶æ¥è·å–ç±»çš„æ‰€æœ‰ä¿¡æ¯ã€‚</li>
</ul>
:ET