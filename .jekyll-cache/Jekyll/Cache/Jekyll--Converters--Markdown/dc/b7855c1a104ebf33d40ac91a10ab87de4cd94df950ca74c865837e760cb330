I"cˆ<ul id="markdown-toc">
  <li><a href="#åœºæ™¯" id="markdown-toc-åœºæ™¯">åœºæ™¯</a></li>
  <li><a href="#ä»‹ç»" id="markdown-toc-ä»‹ç»">ä»‹ç»</a></li>
  <li><a href="#å®ç°æ–¹å¼" id="markdown-toc-å®ç°æ–¹å¼">å®ç°æ–¹å¼</a></li>
  <li><a href="#æµ…å…‹éš†" id="markdown-toc-æµ…å…‹éš†">æµ…å…‹éš†</a></li>
  <li><a href="#æ·±å…‹éš†" id="markdown-toc-æ·±å…‹éš†">æ·±å…‹éš†</a>    <ul>
      <li><a href="#ä½¿ç”¨åºåˆ—åŒ–" id="markdown-toc-ä½¿ç”¨åºåˆ—åŒ–">ä½¿ç”¨åºåˆ—åŒ–</a></li>
    </ul>
  </li>
  <li><a href="#æ€§èƒ½æµ‹è¯•" id="markdown-toc-æ€§èƒ½æµ‹è¯•">æ€§èƒ½æµ‹è¯•</a></li>
  <li><a href="#åº”ç”¨åœºæ™¯" id="markdown-toc-åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</a></li>
  <li><a href="#æ€»ç»“" id="markdown-toc-æ€»ç»“">æ€»ç»“</a></li>
</ul>
<h3 id="åœºæ™¯">åœºæ™¯</h3>

<ul>
  <li>æ€è€ƒä¸€ä¸‹ï¼šå…‹éš†æŠ€æœ¯æ˜¯æ€ä¹ˆæ ·çš„è¿‡ç¨‹? å…‹éš†ç¾Šå¤šåˆ©å¤§å®¶è¿˜è®°å¾—å—?</li>
  <li>javascriptè¯­è¨€ä¸­çš„ï¼Œç»§æ‰¿æ€ä¹ˆå®ç°?é‚£é‡Œé¢ä¹Ÿæœ‰prototype</li>
  <li><strong>åŸå‹æ¨¡å¼å«prototype</strong></li>
</ul>

<h3 id="ä»‹ç»">ä»‹ç»</h3>

<ul>
  <li>é€šè¿‡newäº§ç”Ÿä¸€ä¸ªå¯¹è±¡éœ€è¦éå¸¸ç¹ççš„æ•°æ®å‡†å¤‡æˆ–è®¿é—®æƒé™ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŸå‹æ¨¡å¼ã€‚</li>
  <li>å°±æ˜¯javaä¸­çš„å…‹éš†æŠ€æœ¯ï¼Œä»¥æŸä¸ªå¯¹è±¡ä¸ºåŸå‹ï¼Œå¤åˆ¶å‡ºæ–°çš„å¯¹è±¡ã€‚æ˜¾ç„¶ï¼Œæ–°çš„å¯¹è±¡å…·å¤‡åŸå‹å¯¹è±¡çš„ç‰¹ç‚¹</li>
  <li>ä¼˜åŠ¿æœ‰ï¼šæ•ˆç‡é«˜(ç›´æ¥å…‹éš†ï¼Œé¿å…äº†é‡æ–°æ‰§è¡Œæ„é€ è¿‡ç¨‹æ­¥éª¤)ã€â€œæ¥å£é€ æ¥å£â€ã€‚</li>
  <li>å…‹éš†ç±»ä¼¼äºnewï¼Œä½†æ˜¯ä¸åŒäºnewã€‚newåˆ›å»ºæ–°çš„å¯¹è±¡å±æ€§é‡‡ç”¨çš„æ˜¯é»˜è®¤å€¼ã€‚å…‹éš†å‡ºçš„å¯¹è±¡çš„å±æ€§å€¼å®Œå…¨å’ŒåŸå‹å¯¹è±¡ç›¸åŒã€‚å¹¶ä¸”å…‹éš†å‡ºçš„æ–°å¯¹è±¡æ”¹å˜ä¸ä¼šå½±å“åŸå‹å¯¹è±¡ã€‚ç„¶åï¼Œå†ä¿®æ”¹å…‹éš†å¯¹è±¡çš„å€¼ã€‚</li>
</ul>

<h3 id="å®ç°æ–¹å¼">å®ç°æ–¹å¼</h3>

<ul>
  <li>Cloneableæ¥å£å’Œcloneæ–¹æ³•</li>
  <li>Prototypeæ¨¡å¼ä¸­å®ç°èµ·æ¥æœ€å›°éš¾çš„åœ°æ–¹å°±æ˜¯å†…å­˜å¤åˆ¶æ“ä½œï¼Œæ‰€å¹¸åœ¨Javaä¸­æä¾›äº†clone()æ–¹æ³•æ›¿æˆ‘ä»¬åšäº†ç»å¤§éƒ¨åˆ†äº‹æƒ…ã€‚</li>
</ul>

<h3 id="æµ…å…‹éš†">æµ…å…‹éš†</h3>

<ul>
  <li>é—®é¢˜ï¼šè¢«å¤åˆ¶çš„å¯¹è±¡çš„æ‰€æœ‰å˜é‡éƒ½å«æœ‰ä¸åŸæ¥çš„å¯¹è±¡ç›¸åŒçš„å€¼ï¼Œè€Œæ‰€æœ‰çš„å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨éƒ½
ä»ç„¶æŒ‡å‘åŸæ¥çš„å¯¹è±¡ã€‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.prototype</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="cm">/**
 * æµ‹è¯•æµ…å¤åˆ¶
 * @author Administrator
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Sheep</span> <span class="kd">implements</span> <span class="nc">Cloneable</span><span class="o">,</span><span class="nc">Serializable</span> <span class="o">{</span>   <span class="c1">//1997,è‹±å›½çš„å…‹éš†ç¾Šï¼Œå¤šåˆ©ï¼</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">sname</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">Date</span> <span class="n">birthday</span><span class="o">;</span>
	
	<span class="cm">/**
	 * Objectç±»ä¸­çš„å…‹éš†æ–¹æ³•
	 */</span>
	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="nc">Object</span> <span class="nf">clone</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">CloneNotSupportedException</span> <span class="o">{</span>
		<span class="c1">//ç›´æ¥è°ƒç”¨objectå¯¹è±¡çš„clone()æ–¹æ³•ï¼</span>
		<span class="nc">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="kd">super</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>  
		<span class="k">return</span> <span class="n">obj</span><span class="o">;</span>
	<span class="o">}</span>


	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getSname</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">sname</span><span class="o">;</span>
	<span class="o">}</span>


	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSname</span><span class="o">(</span><span class="nc">String</span> <span class="n">sname</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">sname</span> <span class="o">=</span> <span class="n">sname</span><span class="o">;</span>
	<span class="o">}</span>


	<span class="kd">public</span> <span class="nc">Date</span> <span class="nf">getBirthday</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">birthday</span><span class="o">;</span>
	<span class="o">}</span>


	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBirthday</span><span class="o">(</span><span class="nc">Date</span> <span class="n">birthday</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">birthday</span> <span class="o">=</span> <span class="n">birthday</span><span class="o">;</span>
	<span class="o">}</span>


	<span class="kd">public</span> <span class="nf">Sheep</span><span class="o">(</span><span class="nc">String</span> <span class="n">sname</span><span class="o">,</span> <span class="nc">Date</span> <span class="n">birthday</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">sname</span> <span class="o">=</span> <span class="n">sname</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">birthday</span> <span class="o">=</span> <span class="n">birthday</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">public</span> <span class="nf">Sheep</span><span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>
	
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.prototype</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="cm">/**
 * æµ‹è¯•åŸå‹æ¨¡å¼(æµ…å…‹éš†)
 * @author å°šå­¦å ‚é«˜æ·‡ www.sxt.cn
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
		<span class="nc">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="mi">12312321331L</span><span class="o">);</span>
		<span class="nc">Sheep</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Sheep</span><span class="o">(</span><span class="s">"å°‘åˆ©"</span><span class="o">,</span><span class="n">date</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">getSname</span><span class="o">());</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">getBirthday</span><span class="o">());</span>
		<span class="c1">//ä¿®æ”¹æ—¶é—´å±æ€§</span>
		<span class="n">date</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="mi">23432432423L</span><span class="o">);</span>
		<span class="c1">//æ˜¾ç¤ºä¿®æ”¹åçš„æ—¶é—´</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">getBirthday</span><span class="o">());</span>
		<span class="c1">//s2é€šè¿‡å…‹éš†s1å¾—åˆ°,å…¶ä¸­æ—¶é—´å±æ€§æ˜¾ç¤ºçš„æ˜¯æœ€æ–°çš„ä¿®æ”¹ä¹‹åçš„æ—¶é—´</span>
		<span class="nc">Sheep</span> <span class="n">s2</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Sheep</span><span class="o">)</span> <span class="n">s1</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
		<span class="n">s2</span><span class="o">.</span><span class="na">setSname</span><span class="o">(</span><span class="s">"å¤šåˆ©"</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"å…‹éš†ä¹‹å"</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span><span class="o">.</span><span class="na">getSname</span><span class="o">());</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span><span class="o">.</span><span class="na">getBirthday</span><span class="o">());</span>
		
		
	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>com.bjsxt.prototype.Sheep@65690726
å°‘åˆ©
Sat May 23 20:05:21 CST 1970
Tue Sep 29 13:00:32 CST 1970
å…‹éš†ä¹‹å
com.bjsxt.prototype.Sheep@4ce86da0
å¤šåˆ©
Tue Sep 29 13:00:32 CST 1970
</code></pre></div></div>

<h3 id="æ·±å…‹éš†">æ·±å…‹éš†</h3>

<ul>
  <li>æ·±å…‹éš†æŠŠå¼•ç”¨çš„å˜é‡æŒ‡å‘å¤åˆ¶è¿‡çš„æ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯åŸæœ‰çš„è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚</li>
  <li>æ·±å…‹éš†ï¼šè®©å·²å®ç°Clonableæ¥å£çš„ç±»ä¸­çš„å±æ€§ä¹Ÿå®ç°Clonableæ¥å£</li>
  <li>åŸºæœ¬æ•°æ®ç±»å‹èƒ½å¤Ÿè‡ªåŠ¨å®ç°æ·±åº¦å…‹éš†ï¼ˆå€¼çš„å¤åˆ¶ï¼‰</li>
  <li>æœ‰æ—¶å€™å¢åŠ å…‹éš†çš„ä»£ç æ¯”è¾ƒéº»çƒ¦ï¼</li>
  <li>å¯ä»¥åˆ©ç”¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–å®ç°æ·±å…‹éš†ï¼</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.prototype</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>


<span class="c1">//æµ‹è¯•æ·±å¤åˆ¶</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Sheep2</span> <span class="kd">implements</span> <span class="nc">Cloneable</span> <span class="o">{</span>   <span class="c1">//1997,è‹±å›½çš„å…‹éš†ç¾Šï¼Œå¤šåˆ©ï¼</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">sname</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">Date</span> <span class="n">birthday</span><span class="o">;</span>
	
	
	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="nc">Object</span> <span class="nf">clone</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">CloneNotSupportedException</span> <span class="o">{</span>
		<span class="c1">//ç›´æ¥è°ƒç”¨objectå¯¹è±¡çš„clone()æ–¹æ³•ï¼</span>
		<span class="nc">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="kd">super</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>  
		
		<span class="c1">//æ·»åŠ å¦‚ä¸‹ä»£ç å®ç°æ·±å¤åˆ¶(deep Clone)</span>
		<span class="nc">Sheep2</span> <span class="n">s</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Sheep2</span><span class="o">)</span> <span class="n">obj</span><span class="o">;</span>
        <span class="c1">//æŠŠå±æ€§ä¹Ÿè¿›è¡Œå…‹éš†ï¼</span>
		<span class="n">s</span><span class="o">.</span><span class="na">birthday</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Date</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">birthday</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>  
		<span class="k">return</span> <span class="n">obj</span><span class="o">;</span>
	<span class="o">}</span>


	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getSname</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">sname</span><span class="o">;</span>
	<span class="o">}</span>


	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSname</span><span class="o">(</span><span class="nc">String</span> <span class="n">sname</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">sname</span> <span class="o">=</span> <span class="n">sname</span><span class="o">;</span>
	<span class="o">}</span>


	<span class="kd">public</span> <span class="nc">Date</span> <span class="nf">getBirthday</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">birthday</span><span class="o">;</span>
	<span class="o">}</span>


	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBirthday</span><span class="o">(</span><span class="nc">Date</span> <span class="n">birthday</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">birthday</span> <span class="o">=</span> <span class="n">birthday</span><span class="o">;</span>
	<span class="o">}</span>


	<span class="kd">public</span> <span class="nf">Sheep2</span><span class="o">(</span><span class="nc">String</span> <span class="n">sname</span><span class="o">,</span> <span class="nc">Date</span> <span class="n">birthday</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">sname</span> <span class="o">=</span> <span class="n">sname</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">birthday</span> <span class="o">=</span> <span class="n">birthday</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">public</span> <span class="nf">Sheep2</span><span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>
	
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.prototype</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="cm">/**
 * åŸå‹æ¨¡å¼(æ·±å¤åˆ¶)
 * @author å°šå­¦å ‚é«˜æ·‡www.sxt.cn
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client2</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">CloneNotSupportedException</span> <span class="o">{</span>
		<span class="nc">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="mi">12312321331L</span><span class="o">);</span>
		<span class="nc">Sheep2</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Sheep2</span><span class="o">(</span><span class="s">"å°‘åˆ©"</span><span class="o">,</span><span class="n">date</span><span class="o">);</span>
		<span class="c1">//å®ç°æ·±å¤åˆ¶ã€‚s2å¯¹è±¡çš„birthdayæ˜¯ä¸€ä¸ªæ–°å¯¹è±¡ï¼</span>
		<span class="nc">Sheep2</span> <span class="n">s2</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Sheep2</span><span class="o">)</span> <span class="n">s1</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>   
		
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">getSname</span><span class="o">());</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">getBirthday</span><span class="o">());</span>
		<span class="c1">//ä¿®æ”¹æ—¶é—´å€¼</span>
		<span class="n">date</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="mi">23432432423L</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">getBirthday</span><span class="o">());</span>
		
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"æ·±å…‹éš†ä¹‹åçš„å¯¹è±¡ï¼Œæ—¶é—´å±æ€§æ˜¾ç¤ºä¸ºæœªä¿®æ”¹ä¹‹å‰çš„æ—¶é—´"</span><span class="o">);</span>
		<span class="n">s2</span><span class="o">.</span><span class="na">setSname</span><span class="o">(</span><span class="s">"å¤šåˆ©"</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span><span class="o">.</span><span class="na">getSname</span><span class="o">());</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span><span class="o">.</span><span class="na">getBirthday</span><span class="o">());</span>

	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>com.bjsxt.prototype.Sheep2@65690726
å°‘åˆ©
Sat May 23 20:05:21 CST 1970
Tue Sep 29 13:00:32 CST 1970
æ·±å…‹éš†ä¹‹åçš„å¯¹è±¡ï¼Œæ—¶é—´å±æ€§æ˜¾ç¤ºä¸ºæœªä¿®æ”¹ä¹‹å‰çš„æ—¶é—´
com.bjsxt.prototype.Sheep2@4ce86da0
å¤šåˆ©
Sat May 23 20:05:21 CST 1970
</code></pre></div></div>

<h4 id="ä½¿ç”¨åºåˆ—åŒ–">ä½¿ç”¨åºåˆ—åŒ–</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.prototype</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.ByteArrayInputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.ByteArrayOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.ObjectInputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.ObjectOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="cm">/**
 * åŸå‹æ¨¡å¼(æ·±å¤åˆ¶,ä½¿ç”¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹å¼å®ç°æ·±å¤åˆ¶)
 * @author å°šå­¦å ‚é«˜æ·‡www.sxt.cn
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client3</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">CloneNotSupportedException</span><span class="o">,</span> <span class="nc">Exception</span> <span class="o">{</span>
		<span class="nc">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="mi">12312321331L</span><span class="o">);</span>
		<span class="nc">Sheep</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Sheep</span><span class="o">(</span><span class="s">"å°‘åˆ©"</span><span class="o">,</span><span class="n">date</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">getSname</span><span class="o">());</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">getBirthday</span><span class="o">());</span>

		
		<span class="c1">//ä½¿ç”¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–å®ç°æ·±å¤åˆ¶</span>
		<span class="nc">ByteArrayOutputStream</span> <span class="n">bos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ByteArrayOutputStream</span><span class="o">();</span>
		<span class="nc">ObjectOutputStream</span>    <span class="n">oos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectOutputStream</span><span class="o">(</span><span class="n">bos</span><span class="o">);</span>
		<span class="n">oos</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">s1</span><span class="o">);</span>
		<span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="n">bos</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">();</span>
		
		<span class="nc">ByteArrayInputStream</span>  <span class="n">bis</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ByteArrayInputStream</span><span class="o">(</span><span class="n">bytes</span><span class="o">);</span>
		<span class="nc">ObjectInputStream</span>	  <span class="n">ois</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectInputStream</span><span class="o">(</span><span class="n">bis</span><span class="o">);</span>
		
		<span class="nc">Sheep</span> <span class="n">s2</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Sheep</span><span class="o">)</span> <span class="n">ois</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>   <span class="c1">//å…‹éš†å¥½çš„å¯¹è±¡ï¼</span>
		
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ä¿®æ”¹åŸå‹å¯¹è±¡çš„å±æ€§å€¼"</span><span class="o">);</span>  
		<span class="n">date</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="mi">23432432423L</span><span class="o">);</span>
		
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">getBirthday</span><span class="o">());</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ç»è¿‡åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¹‹åçš„å¯¹è±¡ï¼š"</span><span class="o">);</span>
		<span class="n">s2</span><span class="o">.</span><span class="na">setSname</span><span class="o">(</span><span class="s">"å¤šåˆ©"</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span><span class="o">.</span><span class="na">getSname</span><span class="o">());</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span><span class="o">.</span><span class="na">getBirthday</span><span class="o">());</span>
		
		
	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>å°‘åˆ©
Sat May 23 20:05:21 CST 1970
ä¿®æ”¹åŸå‹å¯¹è±¡çš„å±æ€§å€¼
Tue Sep 29 13:00:32 CST 1970
ç»è¿‡åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¹‹åçš„å¯¹è±¡ï¼š
com.bjsxt.prototype.Sheep@71f6f0bf
å¤šåˆ©
Sat May 23 20:05:21 CST 1970
</code></pre></div></div>

<h3 id="æ€§èƒ½æµ‹è¯•">æ€§èƒ½æµ‹è¯•</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.prototype</span><span class="o">;</span>

<span class="cm">/**
 * æµ‹è¯•æ™®é€šnewæ–¹å¼åˆ›å»ºå¯¹è±¡å’Œcloneæ–¹å¼åˆ›å»ºå¯¹è±¡çš„æ•ˆç‡å·®å¼‚ï¼
 * å¦‚æœéœ€è¦çŸ­æ—¶é—´åˆ›å»ºå¤§é‡å¯¹è±¡ï¼Œå¹¶ä¸”newçš„è¿‡ç¨‹æ¯”è¾ƒè€—æ—¶ã€‚åˆ™å¯ä»¥è€ƒè™‘ä½¿ç”¨åŸå‹æ¨¡å¼ï¼
 * @author å°šå­¦å ‚é«˜æ·‡ www.sxt.cn
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client4</span> <span class="o">{</span>
	
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">testNew</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">){</span>
		<span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
		<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
			<span class="nc">Laptop</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Laptop</span><span class="o">();</span>
		<span class="o">}</span>
		<span class="kt">long</span> <span class="n">end</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"newçš„æ–¹å¼åˆ›å»ºè€—æ—¶ï¼š"</span><span class="o">+(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="o">));</span>
	<span class="o">}</span>
	
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">testClone</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">CloneNotSupportedException</span><span class="o">{</span>
		<span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
		<span class="nc">Laptop</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Laptop</span><span class="o">();</span>
		<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
			<span class="nc">Laptop</span> <span class="n">temp</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Laptop</span><span class="o">)</span> <span class="n">t</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
		<span class="o">}</span>
		<span class="kt">long</span> <span class="n">end</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"cloneçš„æ–¹å¼åˆ›å»ºè€—æ—¶ï¼š"</span><span class="o">+(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="o">));</span>
	<span class="o">}</span>
	
	
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>	
		<span class="n">testNew</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
		<span class="n">testClone</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">Laptop</span> <span class="kd">implements</span> <span class="nc">Cloneable</span> <span class="o">{</span>  <span class="c1">//ç¬”è®°æœ¬ç”µè„‘</span>
	<span class="kd">public</span> <span class="nf">Laptop</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>  <span class="c1">//æ¨¡æ‹Ÿåˆ›å»ºå¯¹è±¡è€—æ—¶çš„è¿‡ç¨‹!</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
	
	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="nc">Object</span> <span class="nf">clone</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">CloneNotSupportedException</span> <span class="o">{</span>
		<span class="nc">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="kd">super</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>  <span class="c1">//ç›´æ¥è°ƒç”¨objectå¯¹è±¡çš„clone()æ–¹æ³•ï¼</span>
		<span class="k">return</span> <span class="n">obj</span><span class="o">;</span>
	<span class="o">}</span>
	
<span class="o">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>newçš„æ–¹å¼åˆ›å»ºè€—æ—¶ï¼š10071
cloneçš„æ–¹å¼åˆ›å»ºè€—æ—¶ï¼š10
</code></pre></div></div>

<h3 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h3>

<ul>
  <li>åŸå‹æ¨¡å¼å¾ˆå°‘å•ç‹¬å‡ºç°ï¼Œä¸€èˆ¬æ˜¯å’Œå·¥å‚æ–¹æ³•æ¨¡å¼ä¸€èµ·å‡ºç°ï¼Œé€šè¿‡cloneçš„æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åç”±å·¥å‚æ–¹æ³•æä¾›ç»™è°ƒç”¨è€…ã€‚</li>
  <li>springä¸­beançš„åˆ›å»ºå®é™…å°±æ˜¯ä¸¤ç§ï¼šå•ä¾‹æ¨¡å¼å’ŒåŸå‹æ¨¡å¼ã€‚ï¼ˆå½“ç„¶ï¼ŒåŸå‹æ¨¡å¼éœ€è¦å’Œå·¥å‚æ¨¡å¼æ­é…èµ·æ¥ï¼‰</li>
</ul>

<h3 id="æ€»ç»“">æ€»ç»“</h3>

<ul>
  <li>åˆ›å»ºå‹æ¨¡å¼ï¼šéƒ½æ˜¯ç”¨æ¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºå¯¹è±¡çš„ï¼</li>
  <li>å•ä¾‹æ¨¡å¼ï¼šä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªè®¿é—®è¯¥å®ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚</li>
  <li>å·¥å‚æ¨¡å¼
â€¢ ç®€å•å·¥å‚æ¨¡å¼
â€“ ç”¨æ¥ç”Ÿäº§åŒä¸€ç­‰çº§ç»“æ„ä¸­çš„ä»»æ„äº§å“ã€‚ï¼ˆå¯¹äºå¢åŠ æ–°çš„äº§å“ï¼Œéœ€è¦ä¿®æ”¹å·²æœ‰ä»£ç ï¼‰
â€¢ å·¥å‚æ–¹æ³•æ¨¡å¼
â€“ ç”¨æ¥ç”Ÿäº§åŒä¸€ç­‰çº§ç»“æ„ä¸­çš„å›ºå®šäº§å“ã€‚ï¼ˆæ”¯æŒå¢åŠ ä»»æ„äº§å“ï¼‰
â€¢ æŠ½è±¡å·¥å‚æ¨¡å¼
â€“ ç”¨æ¥ç”Ÿäº§ä¸åŒäº§å“æ—çš„å…¨éƒ¨äº§å“ã€‚ï¼ˆå¯¹äºå¢åŠ æ–°çš„äº§å“ï¼Œæ— èƒ½ä¸ºåŠ›ï¼›æ”¯æŒå¢åŠ äº§å“æ—ï¼‰</li>
  <li>å»ºé€ è€…æ¨¡å¼
â€¢ åˆ†ç¦»äº†å¯¹è±¡å­ç»„ä»¶çš„å•ç‹¬æ„é€ (ç”±Builderæ¥è´Ÿè´£)å’Œè£…é…(ç”±Directorè´Ÿè´£)ã€‚ ä»è€Œå¯
ä»¥æ„é€ å‡ºå¤æ‚çš„å¯¹è±¡ã€‚</li>
  <li>åŸå‹æ¨¡å¼
â€¢ é€šè¿‡newäº§ç”Ÿä¸€ä¸ªå¯¹è±¡éœ€è¦éå¸¸ç¹ççš„æ•°æ®å‡†å¤‡æˆ–è®¿é—®æƒé™ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŸå‹æ¨¡å¼</li>
</ul>
:ET