I"”@<ul id="markdown-toc">
  <li><a href="#åœºæ™¯" id="markdown-toc-åœºæ™¯">åœºæ™¯</a></li>
  <li><a href="#æ ¸å¿ƒ" id="markdown-toc-æ ¸å¿ƒ">æ ¸å¿ƒ</a></li>
  <li><a href="#æ¡ˆä¾‹" id="markdown-toc-æ¡ˆä¾‹">æ¡ˆä¾‹</a>    <ul>
      <li><a href="#å®ç°" id="markdown-toc-å®ç°">å®ç°</a></li>
      <li><a href="#äº«å…ƒç±»" id="markdown-toc-äº«å…ƒç±»">äº«å…ƒç±»</a></li>
      <li><a href="#äº«å…ƒå·¥å‚" id="markdown-toc-äº«å…ƒå·¥å‚">äº«å…ƒå·¥å‚</a></li>
      <li><a href="#å¤–éƒ¨çŠ¶æ€" id="markdown-toc-å¤–éƒ¨çŠ¶æ€">å¤–éƒ¨çŠ¶æ€</a></li>
      <li><a href="#æµ‹è¯•" id="markdown-toc-æµ‹è¯•">æµ‹è¯•</a></li>
      <li><a href="#åŸç†" id="markdown-toc-åŸç†">åŸç†</a></li>
    </ul>
  </li>
  <li><a href="#åº”ç”¨åœºæ™¯" id="markdown-toc-åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</a></li>
  <li><a href="#ä¼˜ç‚¹" id="markdown-toc-ä¼˜ç‚¹">ä¼˜ç‚¹</a></li>
  <li><a href="#ç¼ºç‚¹" id="markdown-toc-ç¼ºç‚¹">ç¼ºç‚¹</a></li>
  <li><a href="#ç»“æ„æ¨¡å‹æ€»ç»“" id="markdown-toc-ç»“æ„æ¨¡å‹æ€»ç»“">ç»“æ„æ¨¡å‹æ€»ç»“</a></li>
</ul>
<h3 id="åœºæ™¯">åœºæ™¯</h3>

<ul>
  <li>å†…å­˜å±äºç¨€ç¼ºèµ„æºï¼Œä¸è¦éšä¾¿æµªè´¹ã€‚å¦‚æœæœ‰å¾ˆå¤šä¸ªå®Œå…¨ç›¸åŒæˆ–ç›¸ä¼¼çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡äº«å…ƒæ¨¡å¼ï¼ŒèŠ‚çœå†…å­˜</li>
</ul>

<h3 id="æ ¸å¿ƒ">æ ¸å¿ƒ</h3>

<ul>
  <li>äº«å…ƒæ¨¡å¼ä»¥å…±äº«çš„æ–¹å¼é«˜æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„é‡ç”¨</li>
  <li>äº«å…ƒå¯¹è±¡èƒ½åšåˆ°å…±äº«çš„å…³é”®æ˜¯åŒºåˆ†äº†å†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€</li>
  <li>å†…éƒ¨çŠ¶æ€ï¼šå¯ä»¥å…±äº«ï¼Œä¸ä¼šéšç¯å¢ƒå˜åŒ–è€Œæ”¹å˜</li>
  <li>å¤–éƒ¨çŠ¶æ€ï¼šä¸å¯ä»¥å…±äº«ï¼Œä¼šéšç¯å¢ƒå˜åŒ–è€Œæ”¹å˜</li>
</ul>

<h3 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h3>

<ul>
  <li>æ¯ä¸ªå›´æ£‹æ£‹å­éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡</li>
  <li>é¢œè‰²ï¼Œå½¢çŠ¶ï¼Œå¤§å°è¿™äº›æ˜¯å¯ä»¥å…±äº«çš„ï¼Œç§°ä¹‹ä¸ºï¼šå†…éƒ¨çŠ¶æ€</li>
  <li>ä½ç½®è¿™äº›ä¸å¯ä»¥å…±äº«ï¼Œç§°ä¹‹ä¸ºï¼šå¤–éƒ¨çŠ¶æ€</li>
</ul>

<h4 id="å®ç°">å®ç°</h4>

<ul>
  <li>FlyweightFactoryäº«å…ƒå·¥å‚ç±»ï¼šåˆ›å»ºå¹¶ç®¡ç†äº«å…ƒå¯¹è±¡ï¼Œäº«å…ƒæ± ä¸€èˆ¬è®¾è®¡æˆé”®å€¼å¯¹</li>
  <li>FlyWeightæŠ½è±¡äº«å…ƒç±»ï¼šé€šå¸¸æ˜¯ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ï¼Œå£°æ˜å…¬å…±æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å¯ä»¥å‘å¤–ç•Œæä¾›å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œè®¾ç½®å¤–éƒ¨çŠ¶æ€</li>
  <li>ConcreteFlyWeightå…·ä½“äº«å…ƒç±»ï¼šä¸ºå†…éƒ¨çŠ¶æ€æä¾›æˆå‘˜å˜é‡è¿›è¡Œå­˜å‚¨</li>
  <li>UnsharedConcreteFlyWeightéå…±äº«äº«å…ƒç±»ï¼šä¸èƒ½è¢«å…±äº«çš„å­ç±»å¯ä»¥è®¾è®¡ä¸ºéå…±äº«äº«å…ƒç±»</li>
</ul>

<h4 id="äº«å…ƒç±»">äº«å…ƒç±»</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.flyweight</span><span class="o">;</span>

<span class="cm">/**
 * äº«å…ƒæ¥å£
 * @author Administrator
 *
 */</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ChessFlyWeight</span> <span class="o">{</span>
	<span class="cm">/**
	 * è®¾ç½®æ£‹å­é¢œè‰²
	 * @param c
	 */</span>
	<span class="kt">void</span> <span class="nf">setColor</span><span class="o">(</span><span class="nc">String</span> <span class="n">c</span><span class="o">);</span>
	<span class="cm">/**
	 * è·å–æ£‹å­é¢œè‰²
	 * @return
	 */</span>
	<span class="nc">String</span> <span class="nf">getColor</span><span class="o">();</span>
	<span class="cm">/**
	 * è®¾ç½®æ£‹å­ä½ç½®
	 * @param c
	 */</span>
	<span class="kt">void</span> <span class="nf">display</span><span class="o">(</span><span class="nc">Coordinate</span> <span class="n">c</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
 * å…·ä½“äº«å…ƒç±»ï¼ˆçœŸå®æ£‹å­ï¼‰ï¼Œå®ç°äº†æŠ½è±¡äº«å…ƒæ¥å£
 * @author Administrator
 *
 */</span>
<span class="kd">class</span> <span class="nc">ConcreteChess</span> <span class="kd">implements</span> <span class="nc">ChessFlyWeight</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="nc">String</span> <span class="n">color</span><span class="o">;</span>
	
	<span class="kd">public</span> <span class="nf">ConcreteChess</span><span class="o">(</span><span class="nc">String</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">display</span><span class="o">(</span><span class="nc">Coordinate</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"æ£‹å­é¢œè‰²ï¼š"</span><span class="o">+</span><span class="n">color</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"æ£‹å­ä½ç½®ï¼š"</span><span class="o">+</span><span class="n">c</span><span class="o">.</span><span class="na">getX</span><span class="o">()+</span><span class="s">"----"</span><span class="o">+</span><span class="n">c</span><span class="o">.</span><span class="na">getY</span><span class="o">());</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getColor</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">color</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setColor</span><span class="o">(</span><span class="nc">String</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
	<span class="o">}</span>
	
<span class="o">}</span>

</code></pre></div></div>

<h4 id="äº«å…ƒå·¥å‚">äº«å…ƒå·¥å‚</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.flyweight</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="cm">/**
 * äº«å…ƒå·¥å‚ç±»
 * @author Administrator
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ChessFlyWeightFactory</span> <span class="o">{</span>
	<span class="c1">//äº«å…ƒæ± </span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">ChessFlyWeight</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">ChessFlyWeight</span><span class="o">&gt;();</span>
	<span class="cm">/**
	 * æ ¹æ®é¢œè‰²è·å–æ£‹å­
	 * @param color
	 * @return
	 */</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">ChessFlyWeight</span>  <span class="nf">getChess</span><span class="o">(</span><span class="nc">String</span> <span class="n">color</span><span class="o">){</span>
		<span class="c1">//å¦‚æœæœ‰äº«å…ƒæ± å†…æœ‰å¯¹åº”é¢œè‰²çš„æ£‹å­åˆ™è¿”å›ï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªå¯¹åº”é¢œè‰²çš„æ£‹å­å†è¿”å›</span>
		<span class="k">if</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">color</span><span class="o">)!=</span><span class="kc">null</span><span class="o">){</span>
			<span class="k">return</span> <span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">color</span><span class="o">);</span>
		<span class="o">}</span><span class="k">else</span><span class="o">{</span>
			<span class="nc">ChessFlyWeight</span> <span class="n">cfw</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConcreteChess</span><span class="o">(</span><span class="n">color</span><span class="o">);</span>
			<span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">color</span><span class="o">,</span> <span class="n">cfw</span><span class="o">);</span>
			<span class="k">return</span> <span class="n">cfw</span><span class="o">;</span>
		<span class="o">}</span>
		
	<span class="o">}</span>
	
	
<span class="o">}</span>

</code></pre></div></div>

<h4 id="å¤–éƒ¨çŠ¶æ€">å¤–éƒ¨çŠ¶æ€</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.flyweight</span><span class="o">;</span>

<span class="cm">/**
 * å¤–éƒ¨çŠ¶æ€UnSharedConcreteFlyWeight
 * @author Administrator
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Coordinate</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">Coordinate</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getX</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">x</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setX</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getY</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">y</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setY</span><span class="o">(</span><span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
	<span class="o">}</span>
	
<span class="o">}</span>

</code></pre></div></div>

<h4 id="æµ‹è¯•">æµ‹è¯•</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.flyweight</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">ChessFlyWeight</span> <span class="n">chess1</span> <span class="o">=</span> <span class="nc">ChessFlyWeightFactory</span><span class="o">.</span><span class="na">getChess</span><span class="o">(</span><span class="s">"é»‘è‰²"</span><span class="o">);</span>
		<span class="nc">ChessFlyWeight</span> <span class="n">chess2</span> <span class="o">=</span> <span class="nc">ChessFlyWeightFactory</span><span class="o">.</span><span class="na">getChess</span><span class="o">(</span><span class="s">"é»‘è‰²"</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">chess1</span><span class="o">);</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">chess2</span><span class="o">);</span>
		
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"å¢åŠ å¤–éƒ¨çŠ¶æ€çš„å¤„ç†==========="</span><span class="o">);</span>
		<span class="n">chess1</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="k">new</span> <span class="nc">Coordinate</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="o">));</span>
		<span class="n">chess2</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="k">new</span> <span class="nc">Coordinate</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span> <span class="mi">20</span><span class="o">));</span>
		
		
	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>com.bjsxt.flyweight.ConcreteChess@6af62373
com.bjsxt.flyweight.ConcreteChess@6af62373
å¢åŠ å¤–éƒ¨çŠ¶æ€çš„å¤„ç†===========
æ£‹å­é¢œè‰²ï¼šé»‘è‰²
æ£‹å­ä½ç½®ï¼š10----10
æ£‹å­é¢œè‰²ï¼šé»‘è‰²
æ£‹å­ä½ç½®ï¼š20----20
</code></pre></div></div>

<h4 id="åŸç†">åŸç†</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>çœŸå®æ£‹å­ï¼ˆåŒ…å«é¢œè‰²å’Œä½ç½®ï¼‰---&gt;å®ç°æ£‹å­æ¥å£
å¤–éƒ¨çŠ¶æ€ï¼šä½ç½®
äº«å…ƒå·¥å‚---&gt;ä½¿ç”¨mapå­˜å‚¨çœŸå®æ£‹å­å¯¹è±¡
æµ‹è¯•ï¼šä»äº«å…ƒå·¥å‚è·å–å¯¹åº”é¢œè‰²çš„æ£‹å­---&gt;ç„¶åè®¾ç½®å¤–éƒ¨çŠ¶æ€---&gt;ç”Ÿæˆå”¯ä¸€çš„æ£‹å­
</code></pre></div></div>

<h3 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h3>

<ul>
  <li>äº«å…ƒæ¨¡å¼ç”±äºå…¶å…±äº«çš„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨ä»»ä½•â€œæ± â€ä¸­æ“ä½œï¼Œæ¯”å¦‚ï¼šçº¿ç¨‹æ± ã€æ•°æ®åº“è¿æ¥æ± </li>
  <li>Stringç±»çš„è®¾è®¡ä¹Ÿæ˜¯äº«å…ƒæ¨¡å¼</li>
</ul>

<h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3>

<ul>
  <li>æå¤§å‡å°‘å†…å­˜ä¸­å¯¹è±¡çš„æ•°é‡</li>
  <li>ç›¸åŒæˆ–ç›¸ä¼¼å¯¹è±¡å†…å­˜ä¸­åªå­˜ä¸€ä»½ï¼Œæå¤§çš„èŠ‚çº¦èµ„æºï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½</li>
  <li>å¤–éƒ¨çŠ¶æ€ç›¸å¯¹ç‹¬ç«‹ï¼Œä¸å½±å“å†…éƒ¨çŠ¶æ€</li>
</ul>

<h3 id="ç¼ºç‚¹">ç¼ºç‚¹</h3>

<ul>
  <li>æ¨¡å¼è¾ƒå¤æ‚ï¼Œä½¿ç¨‹åºé€»è¾‘å¤æ‚åŒ–</li>
  <li>ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œå…±äº«äº†å†…éƒ¨çŠ¶æ€ï¼Œåˆ†ç¦»å‡ºå¤–éƒ¨çŠ¶æ€ï¼Œè€Œè¯»å–å¤–éƒ¨çŠ¶æ€ä½¿è¿è¡Œæ—¶é—´å˜é•¿ã€‚ç”¨æ—¶é—´æ¢å–äº†ç©ºé—´</li>
</ul>

<h3 id="ç»“æ„æ¨¡å‹æ€»ç»“">ç»“æ„æ¨¡å‹æ€»ç»“</h3>

<ul>
  <li>ä»£ç†æ¨¡å¼ï¼šä¸ºçœŸå®å¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ï¼Œä»è€Œæ§åˆ¶å¯¹çœŸå®å¯¹è±¡çš„è®¿é—®</li>
  <li>é€‚é…æ¨¡å¼ï¼šä½¿åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹ä¸èƒ½ä¸€èµ·å·¥ä½œçš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œ</li>
  <li>æ¡¥æ¥æ¨¡å¼ï¼šå¤„ç†å¤šå±‚ç»§æ‰¿ç»“æ„ï¼Œå¤„ç†å¤šç»´åº¦å˜åŒ–çš„åœºæ™¯ï¼Œå°†å„ä¸ªç»´åº¦è®¾è®¡æˆç‹¬ç«‹çš„ç»§æ‰¿ç»“æ„ï¼Œä½¿å„ä¸ªç»´åº¦å¯ä»¥ç‹¬ç«‹çš„æ‰©å±•åœ¨æŠ½è±¡å±‚å»ºç«‹å…³è”</li>
  <li>ç»„åˆæ¨¡å¼ï¼šå°†å¯¹è±¡ç»„åˆæˆæ ‘çŠ¶ç»“æ„ä»¥è¡¨ç¤ºâ€éƒ¨åˆ†å’Œæ•´ä½“â€å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—å®¢æˆ·å¯ä»¥ç»Ÿä¸€çš„è°ƒç”¨å¶å­å¯¹è±¡å’Œå®¹å™¨å¯¹è±¡</li>
  <li>è£…é¥°æ¨¡å¼ï¼šåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œæ¯”ç»§æ‰¿çµæ´»</li>
  <li>å¤–è§‚æ¨¡å¼ï¼šä¸ºå­ç³»ç»Ÿæä¾›ç»Ÿä¸€çš„è°ƒç”¨æ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨</li>
  <li>äº«å…ƒæ¨¡å¼ï¼šè¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆçš„å®ç°ç®¡ç†å¤§é‡ç»†ç²’åº¦å¯¹è±¡ï¼ŒèŠ‚çœå†…å­˜ï¼Œæé«˜æ•ˆç‡</li>
</ul>

:ET