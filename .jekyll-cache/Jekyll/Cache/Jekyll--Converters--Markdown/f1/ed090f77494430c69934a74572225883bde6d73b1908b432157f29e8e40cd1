I"-<ul id="markdown-toc">
  <li><a href="#步骤" id="markdown-toc-步骤">步骤</a></li>
</ul>
<h3 id="步骤">步骤</h3>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">1).</span> <span class="err">整合目标</span> <span class="err">?</span> <span class="err">使</span> <span class="err">IOC</span> <span class="err">容器来管理</span> <span class="err">Struts2</span> <span class="err">的</span> <span class="err">Action</span><span class="c">!
</span>
<span class="err">2).</span> <span class="err">如何进行整合</span> <span class="err">?</span> 

<span class="err">①.</span> <span class="err">正常加入</span> <span class="err">Struts2</span>

<span class="err">②.</span> <span class="err">在</span> <span class="err">Spring</span> <span class="err">的</span> <span class="err">IOC</span> <span class="err">容器中配置</span> <span class="err">Struts2</span> <span class="err">的</span> <span class="err">Action</span>
<span class="err">注意:</span> <span class="err">在</span> <span class="err">IOC</span> <span class="err">容器中配置</span> <span class="err">Struts2</span> <span class="err">的</span> <span class="err">Action</span> <span class="err">时,</span> <span class="err">需要配置</span> <span class="err">scope</span> <span class="err">属性,</span> <span class="err">其值必须为</span> <span class="err">prototype</span>

<span class="err">&lt;bean</span> <span class="py">id</span><span class="p">=</span><span class="s">"personAction"</span> 
	<span class="s">class="com.atguigu.spring.struts2.actions.PersonAction"</span>
	<span class="py">scope</span><span class="p">=</span><span class="s">"prototype"&gt;</span>
	<span class="err">&lt;property</span> <span class="py">name</span><span class="p">=</span><span class="s">"personService"</span> <span class="s">ref="personService"&gt;&lt;/property&gt;	</span>
<span class="err">&lt;/bean&gt;</span>

<span class="err">③.</span> <span class="err">配置</span> <span class="err">Struts2</span> <span class="err">的配置文件:</span> <span class="err">action</span> <span class="err">节点的</span> <span class="err">class</span> <span class="err">属性需要指向</span> <span class="err">IOC</span> <span class="err">容器中该</span> <span class="err">bean</span> <span class="err">的</span> <span class="err">id</span>

<span class="err">&lt;action</span> <span class="py">name</span><span class="p">=</span><span class="s">"person-save"</span> <span class="s">class="personAction"&gt;</span>
	<span class="err">&lt;result&gt;/success.jsp&lt;/result&gt;</span>
<span class="err">&lt;/action&gt;</span> 

<span class="err">④.</span> <span class="err">加入</span> <span class="err">struts2-spring-plugin-2.3.15.3.jar</span>

<span class="err">3).</span> <span class="err">整合原理:</span> <span class="err">通过添加</span> <span class="err">struts2-spring-plugin-2.3.15.3.jar</span> <span class="err">以后,</span> <span class="err">Struts2</span> <span class="err">会先从</span> <span class="err">IOC</span> <span class="err">容器中</span>
<span class="err">获取</span> <span class="err">Action</span> <span class="err">的实例.</span>

<span class="err">if</span> <span class="err">(appContext.containsBean(beanName))</span> <span class="err">{</span>
    <span class="py">o</span> <span class="p">=</span> <span class="s">appContext.getBean(beanName);</span>
<span class="err">}</span> <span class="err">else</span> <span class="err">{</span>
    <span class="err">Class</span> <span class="py">beanClazz</span> <span class="p">=</span> <span class="s">getClassInstance(beanName);</span>
    <span class="py">o</span> <span class="p">=</span> <span class="s">buildBean(beanClazz, extraContext);</span>
<span class="err">}</span>
</code></pre></div></div>
:ET