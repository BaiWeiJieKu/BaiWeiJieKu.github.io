I"зд<ul id="markdown-toc">
  <li><a href="#зєїзЁ‹еђЇеЉЁ" id="markdown-toc-зєїзЁ‹еђЇеЉЁ">зєїзЁ‹еђЇеЉЁ</a>    <ul>
      <li><a href="#зєїзЁ‹ж¦‚еїµ" id="markdown-toc-зєїзЁ‹ж¦‚еїµ">зєїзЁ‹ж¦‚еїµ</a></li>
      <li><a href="#е€›е»єзєїзЁ‹" id="markdown-toc-е€›е»єзєїзЁ‹">е€›е»єзєїзЁ‹</a>        <ul>
          <li><a href="#runnableжЋҐеЏЈ" id="markdown-toc-runnableжЋҐеЏЈ">RunnableжЋҐеЏЈ</a></li>
          <li><a href="#еЊїеђЌз±»" id="markdown-toc-еЊїеђЌз±»">еЊїеђЌз±»</a></li>
          <li><a href="#дё‰з§Ќж–№ејЏ" id="markdown-toc-дё‰з§Ќж–№ејЏ">дё‰з§Ќж–№ејЏ</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#зєїзЁ‹ж–№жі•" id="markdown-toc-зєїзЁ‹ж–№жі•">зєїзЁ‹ж–№жі•</a>    <ul>
      <li><a href="#зєїзЁ‹жљ‚еЃњ" id="markdown-toc-зєїзЁ‹жљ‚еЃњ">зєїзЁ‹жљ‚еЃњ</a></li>
      <li><a href="#еЉ е…ҐзєїзЁ‹" id="markdown-toc-еЉ е…ҐзєїзЁ‹">еЉ е…ҐзєїзЁ‹</a></li>
      <li><a href="#дје…€зє§" id="markdown-toc-дје…€зє§">дје…€зє§</a></li>
      <li><a href="#дёґж—¶жљ‚еЃњ" id="markdown-toc-дёґж—¶жљ‚еЃњ">дёґж—¶жљ‚еЃњ</a></li>
      <li><a href="#е®€жЉ¤зєїзЁ‹" id="markdown-toc-е®€жЉ¤зєїзЁ‹">е®€жЉ¤зєїзЁ‹</a></li>
    </ul>
  </li>
  <li><a href="#зєїзЁ‹еђЊж­Ґ" id="markdown-toc-зєїзЁ‹еђЊж­Ґ">зєїзЁ‹еђЊж­Ґ</a>    <ul>
      <li><a href="#еђЊж­ҐжЎ€дѕ‹" id="markdown-toc-еђЊж­ҐжЎ€дѕ‹">еђЊж­ҐжЎ€дѕ‹</a></li>
      <li><a href="#й—®йўеЋџе› " id="markdown-toc-й—®йўеЋџе› ">й—®йўеЋџе› </a></li>
      <li><a href="#и§Је†іжЂќи·Ї" id="markdown-toc-и§Је†іжЂќи·Ї">и§Је†іжЂќи·Ї</a></li>
      <li><a href="#synchronized" id="markdown-toc-synchronized">synchronized</a></li>
    </ul>
  </li>
  <li><a href="#зєїзЁ‹е®‰е…Ё" id="markdown-toc-зєїзЁ‹е®‰е…Ё">зєїзЁ‹е®‰е…Ё</a></li>
  <li><a href="#ж­»й”Ѓ" id="markdown-toc-ж­»й”Ѓ">ж­»й”Ѓ</a></li>
  <li><a href="#дє¤дє’" id="markdown-toc-дє¤дє’">дє¤дє’</a></li>
  <li><a href="#зєїзЁ‹ж± " id="markdown-toc-зєїзЁ‹ж± ">зєїзЁ‹ж± </a>    <ul>
      <li><a href="#и®ѕи®ЎжЂќи·Ї" id="markdown-toc-и®ѕи®ЎжЂќи·Ї">и®ѕи®ЎжЂќи·Ї</a></li>
      <li><a href="#и‡Єе®љд№‰" id="markdown-toc-и‡Єе®љд№‰">и‡Єе®љд№‰</a></li>
      <li><a href="#жµ‹иЇ•" id="markdown-toc-жµ‹иЇ•">жµ‹иЇ•</a></li>
      <li><a href="#javaзєїзЁ‹ж± " id="markdown-toc-javaзєїзЁ‹ж± ">javaзєїзЁ‹ж± </a></li>
    </ul>
  </li>
  <li><a href="#lock" id="markdown-toc-lock">Lock</a></li>
  <li><a href="#еЋџе­ђи®їй—®" id="markdown-toc-еЋџе­ђи®їй—®">еЋџе­ђи®їй—®</a>    <ul>
      <li><a href="#atomicinteger" id="markdown-toc-atomicinteger">AtomicInteger</a></li>
    </ul>
  </li>
</ul>
<h2 id="зєїзЁ‹еђЇеЉЁ">зєїзЁ‹еђЇеЉЁ</h2>

<ul>
  <li>е¤љзєїзЁ‹еЌіењЁеђЊдёЂж—¶й—ґпјЊеЏЇд»ҐеЃље¤љд»¶дє‹жѓ…гЂ‚</li>
  <li>е€›е»єе¤љзєїзЁ‹жњ‰3з§Ќж–№ејЏпјЊе€†е€«жЇ<a href="http://how2j.cn/k/thread/thread-start/353.html#step778">з»§ж‰їзєїзЁ‹з±»</a>,<a href="http://how2j.cn/k/thread/thread-start/353.html#step779">е®ћзЋ°RunnableжЋҐеЏЈ</a>,<a href="http://how2j.cn/k/thread/thread-start/353.html#step780">еЊїеђЌз±»</a></li>
</ul>

<h3 id="зєїзЁ‹ж¦‚еїµ">зєїзЁ‹ж¦‚еїµ</h3>

<ul>
  <li>й¦–е…€и¦Ѓзђ†и§Јиї›зЁ‹(Processor)е’ЊзєїзЁ‹(Thread)зљ„еЊєе€«</li>
  <li>иї›зЁ‹пјљеђЇеЉЁдёЂдёЄLOL.exeе°±еЏ«дёЂдёЄиї›зЁ‹гЂ‚ жЋҐзќЂеЏ€еђЇеЉЁдёЂдёЄDOTA.exeпјЊиї™еЏ«дё¤дёЄиї›зЁ‹гЂ‚</li>
  <li>зєїзЁ‹пјљзєїзЁ‹жЇењЁиї›зЁ‹е†…йѓЁеђЊж—¶еЃљзљ„дє‹жѓ…пјЊжЇ”е¦‚ењЁLOLй‡ЊпјЊжњ‰еѕ€е¤љдє‹жѓ…и¦ЃеђЊж—¶еЃљпјЊжЇ”е¦‚вЂќз›–дј¦вЂќ е‡»жќЂвЂњжЏђиЋ«вЂќпјЊеђЊж—¶вЂњиµЏй‡‘зЊЋдєєвЂќеЏ€ењЁе‡»жќЂвЂњз›Іеѓ§вЂќпјЊиї™е°±жЇз”±е¤љзєїзЁ‹жќҐе®ћзЋ°зљ„гЂ‚</li>
</ul>

<h3 id="е€›е»єзєїзЁ‹">е€›е»єзєїзЁ‹</h3>

<ul>
  <li>дЅїз”Ёе¤љзєїзЁ‹пјЊе°±еЏЇд»ҐеЃље€°з›–дј¦ењЁж”»е‡»жЏђиЋ«зљ„еђЊж—¶пјЊиµЏй‡‘зЊЋдєєд№џењЁж”»е‡»з›Іеѓ§</li>
  <li>и®ѕи®ЎдёЂдёЄз±»KillThread з»§ж‰їThreadпјЊе№¶дё”й‡Ќе†™runж–№жі•</li>
  <li>еђЇеЉЁзєїзЁ‹еЉћжі•пјљ е®ћдѕ‹еЊ–дёЂдёЄKillThreadеЇ№и±ЎпјЊе№¶дё”и°ѓз”Ёе…¶startж–№жі•</li>
  <li>е°±еЏЇд»Ґи§‚еЇџе€° иµЏй‡‘зЊЋдєєж”»е‡»з›Іеѓ§зљ„еђЊж—¶пјЊз›–дј¦д№џењЁж”»е‡»жЏђиЋ«</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">KillThread</span> <span class="kd">extends</span> <span class="nc">Thread</span><span class="o">{</span>
	
	<span class="kd">private</span> <span class="nc">Hero</span> <span class="n">h1</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">Hero</span> <span class="n">h2</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">KillThread</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h1</span><span class="o">,</span> <span class="nc">Hero</span> <span class="n">h2</span><span class="o">){</span>
		<span class="k">this</span><span class="o">.</span><span class="na">h1</span> <span class="o">=</span> <span class="n">h1</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">h2</span> <span class="o">=</span> <span class="n">h2</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
		<span class="k">while</span><span class="o">(!</span><span class="n">h2</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
			<span class="n">h1</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">h2</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>


</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		
		<span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›–дј¦"</span><span class="o">;</span>
		<span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">616</span><span class="o">;</span>
		<span class="n">gareen</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>

		<span class="nc">Hero</span> <span class="n">teemo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">teemo</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"жЏђиЋ«"</span><span class="o">;</span>
		<span class="n">teemo</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">300</span><span class="o">;</span>
		<span class="n">teemo</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">30</span><span class="o">;</span>
		
		<span class="nc">Hero</span> <span class="n">bh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">bh</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"иµЏй‡‘зЊЋдєє"</span><span class="o">;</span>
		<span class="n">bh</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">500</span><span class="o">;</span>
		<span class="n">bh</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">65</span><span class="o">;</span>
		
		<span class="nc">Hero</span> <span class="n">leesin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">leesin</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›Іеѓ§"</span><span class="o">;</span>
		<span class="n">leesin</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">455</span><span class="o">;</span>
		<span class="n">leesin</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">80</span><span class="o">;</span>
		
		<span class="nc">KillThread</span> <span class="n">killThread1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">KillThread</span><span class="o">(</span><span class="n">gareen</span><span class="o">,</span><span class="n">teemo</span><span class="o">);</span>
		<span class="n">killThread1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		<span class="nc">KillThread</span> <span class="n">killThread2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">KillThread</span><span class="o">(</span><span class="n">bh</span><span class="o">,</span><span class="n">leesin</span><span class="o">);</span>
		<span class="n">killThread2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		
	<span class="o">}</span>
	
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/778.png" alt="" /></p>

<h4 id="runnableжЋҐеЏЈ">RunnableжЋҐеЏЈ</h4>

<ul>
  <li>е€›е»єз±»BattleпјЊе®ћзЋ°RunnableжЋҐеЏЈ,еђЇеЉЁзљ„ж—¶еЂ™пјЊй¦–е…€е€›е»єдёЂдёЄBattleеЇ№и±ЎпјЊз„¶еђЋе†Ќж №жЌ®иЇҐbattleеЇ№и±Ўе€›е»єдёЂдёЄзєїзЁ‹еЇ№и±ЎпјЊе№¶еђЇеЉЁ</li>
  <li>battle1 еЇ№и±Ўе®ћзЋ°дє†RunnableжЋҐеЏЈпјЊж‰Ђд»Ґжњ‰runж–№жі•пјЊдЅ†жЇз›ґжЋҐи°ѓз”Ёrunж–№жі•пјЊе№¶дёЌдјљеђЇеЉЁдёЂдёЄж–°зљ„зєїзЁ‹гЂ‚</li>
  <li>еї…йЎ»пјЊеЂџеЉ©дёЂдёЄзєїзЁ‹еЇ№и±Ўзљ„start()ж–№жі•пјЊж‰ЌдјљеђЇеЉЁдёЂдёЄж–°зљ„зєїзЁ‹гЂ‚</li>
  <li>ж‰Ђд»ҐпјЊењЁе€›е»єThreadеЇ№и±Ўзљ„ж—¶еЂ™пјЊжЉЉbattle1дЅњдёєжћ„йЂ ж–№жі•зљ„еЏ‚ж•°дј йЂ’иї›еЋ»пјЊиї™дёЄзєїзЁ‹еђЇеЉЁзљ„ж—¶еЂ™пјЊе°±дјљеЋ»ж‰§иЎЊbattle1.run()ж–№жі•дє†гЂ‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Battle</span> <span class="kd">implements</span> <span class="nc">Runnable</span><span class="o">{</span>
	
	<span class="kd">private</span> <span class="nc">Hero</span> <span class="n">h1</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">Hero</span> <span class="n">h2</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">Battle</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h1</span><span class="o">,</span> <span class="nc">Hero</span> <span class="n">h2</span><span class="o">){</span>
		<span class="k">this</span><span class="o">.</span><span class="na">h1</span> <span class="o">=</span> <span class="n">h1</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">h2</span> <span class="o">=</span> <span class="n">h2</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
		<span class="k">while</span><span class="o">(!</span><span class="n">h2</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
			<span class="n">h1</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">h2</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>


</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		
		<span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›–дј¦"</span><span class="o">;</span>
		<span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">616</span><span class="o">;</span>
		<span class="n">gareen</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>

		<span class="nc">Hero</span> <span class="n">teemo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">teemo</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"жЏђиЋ«"</span><span class="o">;</span>
		<span class="n">teemo</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">300</span><span class="o">;</span>
		<span class="n">teemo</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">30</span><span class="o">;</span>
		
		<span class="nc">Hero</span> <span class="n">bh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">bh</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"иµЏй‡‘зЊЋдєє"</span><span class="o">;</span>
		<span class="n">bh</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">500</span><span class="o">;</span>
		<span class="n">bh</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">65</span><span class="o">;</span>
		
		<span class="nc">Hero</span> <span class="n">leesin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
		<span class="n">leesin</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›Іеѓ§"</span><span class="o">;</span>
		<span class="n">leesin</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">455</span><span class="o">;</span>
		<span class="n">leesin</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">80</span><span class="o">;</span>
		
		<span class="nc">Battle</span> <span class="n">battle1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Battle</span><span class="o">(</span><span class="n">gareen</span><span class="o">,</span><span class="n">teemo</span><span class="o">);</span>
		
		<span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="n">battle1</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

		<span class="nc">Battle</span> <span class="n">battle2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Battle</span><span class="o">(</span><span class="n">bh</span><span class="o">,</span><span class="n">leesin</span><span class="o">);</span>
		<span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="n">battle2</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

	<span class="o">}</span>
	
<span class="o">}</span>

</code></pre></div></div>

<h4 id="еЊїеђЌз±»">еЊїеђЌз±»</h4>

<ul>
  <li>дЅїз”Ё<a href="http://how2j.cn/k/interface-inheritance/interface-inheritance-inner-class/322.html#step687">еЊїеђЌз±»</a>пјЊз»§ж‰їThread,й‡Ќе†™runж–№жі•пјЊз›ґжЋҐењЁrunж–№жі•дё­е†™дёљеЉЎд»Јз Ѓ</li>
  <li>еЊїеђЌз±»зљ„дёЂдёЄеҐЅе¤„жЇеЏЇд»Ґеѕ€ж–№дѕїзљ„и®їй—®е¤–йѓЁзљ„е±ЂйѓЁеЏй‡ЏгЂ‚</li>
  <li>е‰ЌжЏђжЇе¤–йѓЁзљ„е±ЂйѓЁеЏй‡ЏйњЂи¦Ѓиў«еЈ°жЋдёєfinalгЂ‚(JDK7д»ҐеђЋе°±дёЌйњЂи¦Ѓдє†)</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         
        <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›–дј¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">616</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>
 
        <span class="nc">Hero</span> <span class="n">teemo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"жЏђиЋ«"</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">300</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">30</span><span class="o">;</span>
         
        <span class="nc">Hero</span> <span class="n">bh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"иµЏй‡‘зЊЋдєє"</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">500</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">65</span><span class="o">;</span>
         
        <span class="nc">Hero</span> <span class="n">leesin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›Іеѓ§"</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">455</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">80</span><span class="o">;</span>
         
        <span class="c1">//еЊїеђЌз±»</span>
        <span class="nc">Thread</span> <span class="n">t1</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="c1">//еЊїеђЌз±»дё­з”Ёе€°е¤–йѓЁзљ„е±ЂйѓЁеЏй‡ЏteemoпјЊеї…йЎ»жЉЉteemoеЈ°жЋдёєfinal</span>
            	<span class="c1">//дЅ†жЇењЁJDK7д»ҐеђЋпјЊе°±дёЌжЇеї…йЎ»еЉ finalзљ„дє†</span>
                <span class="k">while</span><span class="o">(!</span><span class="n">teemo</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">teemo</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
        
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
         
        <span class="nc">Thread</span> <span class="n">t2</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(!</span><span class="n">leesin</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">bh</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">leesin</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        
    <span class="o">}</span>
     
<span class="o">}</span>

</code></pre></div></div>

<h4 id="дё‰з§Ќж–№ејЏ">дё‰з§Ќж–№ејЏ</h4>

<ul>
  <li>з»§ж‰їThreadз±»</li>
  <li>е®ћзЋ°RunnableжЋҐеЏЈ</li>
  <li>еЊїеђЌз±»зљ„ж–№ејЏ</li>
  <li>жіЁпјљ еђЇеЉЁзєїзЁ‹жЇstart()ж–№жі•пјЊrun()е№¶дёЌиѓЅеђЇеЉЁдёЂдёЄж–°зљ„зєїзЁ‹</li>
</ul>

<h2 id="зєїзЁ‹ж–№жі•">зєїзЁ‹ж–№жі•</h2>

<h3 id="зєїзЁ‹жљ‚еЃњ">зєїзЁ‹жљ‚еЃњ</h3>

<ul>
  <li>Thread.sleep(1000); иЎЁз¤єеЅ“е‰ЌзєїзЁ‹жљ‚еЃњ1000жЇ«з§’ пјЊе…¶д»–зєїзЁ‹дёЌеЏ—еЅ±е“Ќ</li>
  <li>Thread.sleep(1000); дјљжЉ›е‡єInterruptedException дё­ж–­еј‚еёёпјЊе› дёєеЅ“е‰ЌзєїзЁ‹sleepзљ„ж—¶еЂ™пјЊжњ‰еЏЇиѓЅиў«еЃњж­ўпјЊиї™ж—¶е°±дјљжЉ›е‡є InterruptedException</li>
  <li>зєїзЁ‹дј‘зњ пјљжЊ‡зљ„жЇи®©зєїзЁ‹жљ‚зј“ж‰§иЎЊдёЂдё‹пјЊз­‰е€°дє†йў„и®Ўж—¶й—ґд№‹еђЋе†ЌжЃўе¤Ќж‰§иЎЊгЂ‚зєїзЁ‹дј‘зњ дјљдє¤е‡єCPUпјЊи®©CPUеЋ»ж‰§иЎЊе…¶д»–зљ„д»»еЉЎгЂ‚</li>
  <li>sleepж–№жі•дёЌдјљй‡Љж”ѕй”ЃпјЊд№џе°±жЇиЇґе¦‚жћњеЅ“е‰ЌзєїзЁ‹жЊЃжњ‰еЇ№жџђдёЄеЇ№и±Ўзљ„й”ЃпјЊеЌідЅїи°ѓз”Ёsleepж–№жі•пјЊе…¶д»–зєїзЁ‹д№џж— жі•и®їй—®иї™дёЄеЇ№и±Ў</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		
		<span class="nc">Thread</span> <span class="n">t1</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
				<span class="kt">int</span> <span class="n">seconds</span> <span class="o">=</span><span class="mi">0</span><span class="o">;</span>
				<span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
					<span class="k">try</span> <span class="o">{</span>
						<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
					<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
						<span class="c1">// TODO Auto-generated catch block</span>
						<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
					<span class="o">}</span>
					<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"е·Із»ЏзЋ©дє†LOL %d з§’%n"</span><span class="o">,</span> <span class="n">seconds</span><span class="o">++);</span>
				<span class="o">}</span>				
			<span class="o">}</span>
		<span class="o">};</span>
		<span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		
	<span class="o">}</span>
	
<span class="o">}</span>

</code></pre></div></div>

<h3 id="еЉ е…ҐзєїзЁ‹">еЉ е…ҐзєїзЁ‹</h3>

<ul>
  <li>ж‰Ђжњ‰иї›зЁ‹пјЊи‡іе°‘дјљжњ‰дёЂдёЄзєїзЁ‹еЌідё»зєїзЁ‹пјЊеЌіmainж–№жі•ејЂе§‹ж‰§иЎЊпјЊе°±дјљжњ‰дёЂдёЄзњ‹дёЌи§Ѓзљ„дё»зєїзЁ‹е­ењЁгЂ‚</li>
  <li>е¦‚жћњењЁдё»зєїзЁ‹дё­и°ѓз”Ёjoinж–№жі•ж—¶е°±дјљи®©дё»зєїзЁ‹дј‘зњ пјЊи®©и°ѓз”ЁиЇҐж–№жі•зљ„зєїзЁ‹runж–№жі•е…€ж‰§иЎЊе®ЊжЇ•д№‹еђЋењЁејЂе§‹ж‰§иЎЊдё»зєїзЁ‹</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›–дј¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">616</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>
 
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">teemo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"жЏђиЋ«"</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">300</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">30</span><span class="o">;</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">bh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"иµЏй‡‘зЊЋдєє"</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">500</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">65</span><span class="o">;</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">leesin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›Іеѓ§"</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">455</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">80</span><span class="o">;</span>
         
        <span class="nc">Thread</span> <span class="n">t1</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(!</span><span class="n">teemo</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">teemo</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
         
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

        <span class="c1">//д»Јз Ѓж‰§иЎЊе€°иї™й‡ЊпјЊдёЂз›ґжЇmainзєїзЁ‹ењЁиїђиЎЊ</span>
        <span class="k">try</span> <span class="o">{</span>
        	<span class="c1">//t1зєїзЁ‹еЉ е…Ґе€°mainзєїзЁ‹дё­жќҐпјЊеЏЄжњ‰t1зєїзЁ‹иїђиЎЊз»“жќџпјЊж‰Ќдјљз»§з»­еѕЂдё‹иµ°</span>
			<span class="n">t1</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

        <span class="nc">Thread</span> <span class="n">t2</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(!</span><span class="n">leesin</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">bh</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">leesin</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="c1">//дјљи§‚еЇџе€°з›–дј¦жЉЉжЏђиЋ«жќЂжЋ‰еђЋпјЊж‰ЌиїђиЎЊt2зєїзЁ‹</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
         
    <span class="o">}</span>
     
<span class="o">}</span>

</code></pre></div></div>

<h3 id="дје…€зє§">дје…€зє§</h3>

<ul>
  <li>еЅ“зєїзЁ‹е¤„дєЋз«ћдє‰е…ізі»зљ„ж—¶еЂ™пјЊдје…€зє§й«зљ„зєїзЁ‹дјљжњ‰ж›ґе¤§зљ„е‡ зЋ‡иЋ·еѕ—CPUиµ„жєђ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">charactor</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hero</span><span class="o">{</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 
    <span class="kd">public</span> <span class="kt">float</span> <span class="n">hp</span><span class="o">;</span>
     
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">damage</span><span class="o">;</span>
     
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">attackHero</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h</span><span class="o">)</span> <span class="o">{</span>
    	<span class="c1">//жЉЉжљ‚еЃњж—¶й—ґеЋ»жЋ‰пјЊе¤љжќЎзєїзЁ‹еђ„и‡Єдјље°ЅеЉ›еЋ»еЌ жњ‰CPUиµ„жєђ</span>
    	<span class="c1">//зєїзЁ‹зљ„дје…€зє§ж•€жћњж‰ЌеЏЇд»Ґзњ‹еѕ—е‡єжќҐ</span>
<span class="c1">//        try {</span>
<span class="c1">//            </span>
<span class="c1">//            Thread.sleep(0);</span>
<span class="c1">//        } catch (InterruptedException e) {</span>
<span class="c1">//            // TODO Auto-generated catch block</span>
<span class="c1">//            e.printStackTrace();</span>
<span class="c1">//        }</span>
        <span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">-=</span><span class="n">damage</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s ж­ЈењЁж”»е‡» %s, %sзљ„иЎЂеЏж€ђдє† %.0f%n"</span><span class="o">,</span><span class="n">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
         
        <span class="k">if</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">isDead</span><span class="o">())</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span><span class="s">"ж­»дє†пјЃ"</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDead</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">&gt;=</span><span class="n">hp</span><span class="o">?</span><span class="kc">true</span><span class="o">:</span><span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
 
<span class="o">}</span>


</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›–дј¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">6160</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
 
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">teemo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"жЏђиЋ«"</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">3000</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">bh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"иµЏй‡‘зЊЋдєє"</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">5000</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">leesin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›Іеѓ§"</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">4505</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
         
        <span class="nc">Thread</span> <span class="n">t1</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>

                <span class="k">while</span><span class="o">(!</span><span class="n">teemo</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">teemo</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
         
        <span class="nc">Thread</span> <span class="n">t2</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(!</span><span class="n">leesin</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">bh</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">leesin</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
        
        <span class="n">t1</span><span class="o">.</span><span class="na">setPriority</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">MAX_PRIORITY</span><span class="o">);</span><span class="c1">//дје…€зє§дёє10</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">setPriority</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">MIN_PRIORITY</span><span class="o">);</span><span class="c1">//дје…€зє§дёє1</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
         
    <span class="o">}</span>
     
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/783.png" alt="" /></p>

<h3 id="дёґж—¶жљ‚еЃњ">дёґж—¶жљ‚еЃњ</h3>

<ul>
  <li>жљ‚еЃњеЅ“е‰Ќж­ЈењЁж‰§иЎЊзљ„зєїзЁ‹еЇ№и±ЎпјЊе№¶ж‰§иЎЊе…¶д»–зєїзЁ‹гЂ‚</li>
  <li>ж„ЏжЂќе°±жЇи°ѓз”Ёyieldж–№жі•дјљи®©еЅ“е‰ЌзєїзЁ‹дє¤е‡єCPUжќѓй™ђпјЊи®©CPUеЋ»ж‰§иЎЊе…¶д»–зљ„зєїзЁ‹гЂ‚е®ѓи·џsleepж–№жі•з±»дјјпјЊеђЊж ·дёЌдјљй‡Љж”ѕй”ЃгЂ‚</li>
  <li>дЅ†жЇyieldдёЌиѓЅжЋ§е€¶е…·дЅ“зљ„дє¤е‡єCPUзљ„ж—¶й—ґпјЊеЏ¦е¤–пјЊyieldж–№жі•еЏЄиѓЅи®©ж‹Ґжњ‰з›ёеђЊдје…€зє§зљ„зєїзЁ‹жњ‰иЋ·еЏ–CPUж‰§иЎЊж—¶й—ґзљ„жњєдјљгЂ‚</li>
  <li>и°ѓз”Ёyieldж–№жі•е№¶дёЌдјљи®©зєїзЁ‹иї›е…Ґй»еЎћзЉ¶жЂЃпјЊиЂЊжЇи®©зєїзЁ‹й‡Ќе›ће°±з»ЄзЉ¶жЂЃпјЊе®ѓеЏЄйњЂи¦Ѓз­‰еѕ…й‡Ќж–°иЋ·еЏ–CPUж‰§иЎЊж—¶й—ґ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›–дј¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">61600</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
 
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">teemo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"жЏђиЋ«"</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">30000</span><span class="o">;</span>
        <span class="n">teemo</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">bh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"иµЏй‡‘зЊЋдєє"</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">50000</span><span class="o">;</span>
        <span class="n">bh</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
         
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">leesin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›Іеѓ§"</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">45050</span><span class="o">;</span>
        <span class="n">leesin</span><span class="o">.</span><span class="na">damage</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
         
        <span class="nc">Thread</span> <span class="n">t1</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>

                <span class="k">while</span><span class="o">(!</span><span class="n">teemo</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">teemo</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
         
        <span class="nc">Thread</span> <span class="n">t2</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(!</span><span class="n">leesin</span><span class="o">.</span><span class="na">isDead</span><span class="o">()){</span>
                	<span class="c1">//дёґж—¶жљ‚еЃњпјЊдЅїеѕ—t1еЏЇд»ҐеЌ з”ЁCPUиµ„жєђ</span>
                	<span class="nc">Thread</span><span class="o">.</span><span class="na">yield</span><span class="o">();</span>
                	
                    <span class="n">bh</span><span class="o">.</span><span class="na">attackHero</span><span class="o">(</span><span class="n">leesin</span><span class="o">);</span>
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
        
        <span class="n">t1</span><span class="o">.</span><span class="na">setPriority</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">setPriority</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
         
    <span class="o">}</span>
     
<span class="o">}</span>

</code></pre></div></div>

<h3 id="е®€жЉ¤зєїзЁ‹">е®€жЉ¤зєїзЁ‹</h3>

<ul>
  <li>е®€жЉ¤зєїзЁ‹зљ„ж¦‚еїµжЇпјљ еЅ“дёЂдёЄиї›зЁ‹й‡ЊпјЊж‰Ђжњ‰зљ„зєїзЁ‹йѓЅжЇе®€жЉ¤зєїзЁ‹зљ„ж—¶еЂ™пјЊз»“жќџеЅ“е‰Ќиї›зЁ‹гЂ‚</li>
  <li>е°±еҐЅеѓЏдёЂдёЄе…¬еЏёжњ‰й”Ђе”®йѓЁпјЊз”џдє§йѓЁиї™дє›е’ЊдёљеЉЎжЊ‚й’©зљ„йѓЁй—ЁгЂ‚й™¤ж­¤д№‹е¤–пјЊиїжњ‰еђЋе‹¤пјЊиЎЊж”їз­‰иї™дє›ж”ЇжЊЃйѓЁй—ЁгЂ‚</li>
  <li>е¦‚жћњдёЂе®¶е…¬еЏёй”Ђе”®йѓЁпјЊз”џдє§йѓЁйѓЅи§Јж•Јдє†пјЊй‚Јд№€еЏЄе‰©дё‹еђЋе‹¤е’ЊиЎЊж”їпјЊй‚Јд№€иї™е®¶е…¬еЏёд№џеЏЇд»Ґи§Јж•Јдє†гЂ‚</li>
  <li>е®€жЉ¤зєїзЁ‹е°±з›ёеЅ“дєЋй‚Јдє›ж”ЇжЊЃйѓЁй—ЁпјЊе¦‚жћњдёЂдёЄиї›зЁ‹еЏЄе‰©дё‹е®€жЉ¤зєїзЁ‹пјЊй‚Јд№€иї›зЁ‹е°±дјљи‡ЄеЉЁз»“жќџгЂ‚</li>
  <li>е®€жЉ¤зєїзЁ‹йЂљеёёдјљиў«з”ЁжќҐеЃљж—Ґеї—пјЊжЂ§иѓЅз»џи®Ўз­‰е·ҐдЅњгЂ‚</li>
  <li>е®€жЉ¤зєїзЁ‹зљ„е”ЇдёЂз”ЁйЂ”жЇдёєе…¶д»–зєїзЁ‹жЏђдѕ›жњЌеЉЎ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         
        <span class="nc">Thread</span> <span class="n">t1</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="kt">int</span> <span class="n">seconds</span> <span class="o">=</span><span class="mi">0</span><span class="o">;</span>
                
                <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"е·Із»ЏзЋ©дє†LOL %d з§’%n"</span><span class="o">,</span> <span class="n">seconds</span><span class="o">++);</span>
                    
                <span class="o">}</span>               
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">setDaemon</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span><span class="c1">//е°†зєїзЁ‹иЅ¬дёєе®€жЉ¤зєїзЁ‹</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
         
    <span class="o">}</span>
     
<span class="o">}</span>

</code></pre></div></div>

<h2 id="зєїзЁ‹еђЊж­Ґ">зєїзЁ‹еђЊж­Ґ</h2>

<ul>
  <li>е¤љзєїзЁ‹зљ„еђЊж­Ґй—®йўжЊ‡зљ„жЇе¤љдёЄзєїзЁ‹еђЊж—¶дї®ж”№дёЂдёЄж•°жЌ®зљ„ж—¶еЂ™пјЊеЏЇиѓЅеЇји‡ґзљ„й—®йў</li>
  <li>е¤љзєїзЁ‹зљ„й—®йўпјЊеЏ€еЏ«Concurrency й—®йў</li>
</ul>

<h3 id="еђЊж­ҐжЎ€дѕ‹">еђЊж­ҐжЎ€дѕ‹</h3>

<ul>
  <li>еЃ‡и®ѕз›–дј¦жњ‰10000ж»ґиЎЂпјЊе№¶дё”ењЁеџєењ°й‡ЊпјЊеђЊж—¶еЏ€иў«еЇ№ж–№е¤љдёЄи‹±й›„ж”»е‡»</li>
  <li>е°±жЇжњ‰е¤љдёЄзєїзЁ‹ењЁе‡Џе°‘з›–дј¦зљ„hpпјЊеђЊж—¶еЏ€жњ‰е¤љдёЄзєїзЁ‹ењЁжЃўе¤Ќз›–дј¦зљ„hp</li>
  <li>еЃ‡и®ѕзєїзЁ‹зљ„ж•°й‡ЏжЇдёЂж ·зљ„пјЊе№¶дё”жЇЏж¬Ўж”№еЏзљ„еЂјйѓЅжЇ1пјЊй‚Јд№€ж‰Ђжњ‰зєїзЁ‹з»“жќџеђЋпјЊз›–дј¦еє”иЇҐиїжЇ10000ж»ґиЎЂгЂ‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
   
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
   
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
   
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
           
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›–дј¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
          
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"з›–дј¦зљ„е€ќе§‹иЎЂй‡ЏжЇ %.0f%n"</span><span class="o">,</span> <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
          
        <span class="c1">//е¤љзєїзЁ‹еђЊж­Ґй—®йўжЊ‡зљ„жЇе¤љдёЄзєїзЁ‹еђЊж—¶дї®ж”№дёЂдёЄж•°жЌ®зљ„ж—¶еЂ™пјЊеЇји‡ґзљ„й—®йў</span>
          
        <span class="c1">//еЃ‡и®ѕз›–дј¦жњ‰10000ж»ґиЎЂпјЊе№¶дё”ењЁеџєењ°й‡ЊпјЊеђЊж—¶еЏ€иў«еЇ№ж–№е¤љдёЄи‹±й›„ж”»е‡»</span>
          
        <span class="c1">//з”ЁJAVAд»Јз ЃжќҐиЎЁз¤єпјЊе°±жЇжњ‰е¤љдёЄзєїзЁ‹ењЁе‡Џе°‘з›–дј¦зљ„hp</span>
        <span class="c1">//еђЊж—¶еЏ€жњ‰е¤љдёЄзєїзЁ‹ењЁжЃўе¤Ќз›–дј¦зљ„hp</span>
          
        <span class="c1">//nдёЄзєїзЁ‹еўћеЉ з›–дј¦зљ„hp</span>
          
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
  
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">addThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">reduceThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
          
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">recover</span><span class="o">();</span><span class="c1">//е›ћиЎЂж–№жі•пјЊжЇЏж¬Ўе›ћ1</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">addThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
              
        <span class="o">}</span>
          
        <span class="c1">//nдёЄзєїзЁ‹е‡Џе°‘з›–дј¦зљ„hp</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">hurt</span><span class="o">();</span><span class="c1">//жЋ‰иЎЂж–№жі•пјЊжЇЏж¬Ўе‡Џ1</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">reduceThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
        <span class="o">}</span>
          
        <span class="c1">//з­‰еѕ…ж‰Ђжњ‰еўћеЉ зєїзЁ‹з»“жќџ</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">addThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="c1">//з­‰еѕ…ж‰Ђжњ‰е‡Џе°‘зєїзЁ‹з»“жќџ</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">reduceThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
          
        <span class="c1">//д»Јз Ѓж‰§иЎЊе€°иї™й‡ЊпјЊж‰Ђжњ‰еўћеЉ е’Ње‡Џе°‘зєїзЁ‹йѓЅз»“жќџдє†</span>
          
        <span class="c1">//еўћеЉ е’Ње‡Џе°‘зєїзЁ‹зљ„ж•°й‡ЏжЇдёЂж ·зљ„пјЊжЇЏж¬ЎйѓЅеўћеЉ пјЊе‡Џе°‘1.</span>
        <span class="c1">//й‚Јд№€ж‰Ђжњ‰зєїзЁ‹йѓЅз»“жќџеђЋпјЊз›–дј¦зљ„hpеє”иЇҐиїжЇе€ќе§‹еЂј</span>
          
        <span class="c1">//дЅ†жЇдє‹е®ћдёЉи§‚еЇџе€°зљ„жЇпјљ</span>
                  
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%dдёЄеўћеЉ зєїзЁ‹е’Њ%dдёЄе‡Џе°‘зєїзЁ‹з»“жќџеђЋ%nз›–дј¦зљ„иЎЂй‡ЏеЏж€ђдє† %.0f%n"</span><span class="o">,</span> <span class="n">n</span><span class="o">,</span><span class="n">n</span><span class="o">,</span><span class="n">gareen</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
          
    <span class="o">}</span>
       
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/786.png" alt="" /></p>

<h3 id="й—®йўеЋџе› ">й—®йўеЋџе› </h3>

<ul>
  <li>еЃ‡и®ѕеўћеЉ зєїзЁ‹е…€иї›е…ҐпјЊеѕ—е€°зљ„hpжЇ10000</li>
  <li>иї›иЎЊеўћеЉ иїђз®—</li>
  <li>ж­ЈењЁеЃљеўћеЉ иїђз®—зљ„ж—¶еЂ™пјЊиїжІЎжњ‰жќҐеѕ—еЏЉдї®ж”№hpзљ„еЂјпјЊе‡Џе°‘зєїзЁ‹жќҐдє†</li>
  <li>е‡Џе°‘зєїзЁ‹еѕ—е€°зљ„hpзљ„еЂјд№џжЇ10000</li>
  <li>е‡Џе°‘зєїзЁ‹иї›иЎЊе‡Џе°‘иїђз®—</li>
  <li>еўћеЉ зєїзЁ‹иїђз®—з»“жќџпјЊеѕ—е€°еЂј10001пјЊе№¶жЉЉиї™дёЄеЂјиµ‹дє€hp</li>
  <li>е‡Џе°‘зєїзЁ‹д№џиїђз®—з»“жќџпјЊеѕ—е€°еЂј9999пјЊе№¶жЉЉиї™дёЄеЂјиµ‹дє€hp</li>
  <li>hpпјЊжњЂеђЋзљ„еЂје°±жЇ9999 пјЊиї™дёЄж—¶еЂ™зљ„еЂј9999жЇдёЂдёЄй”™иЇЇзљ„еЂјпјЊењЁдёљеЉЎдёЉеЏ€еЏ«еЃљи„Џж•°жЌ®</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/787.png" alt="" /></p>

<h3 id="и§Је†іжЂќи·Ї">и§Је†іжЂќи·Ї</h3>

<ul>
  <li>жЂ»дЅ“и§Је†іжЂќи·ЇжЇпјљ ењЁеўћеЉ зєїзЁ‹и®їй—®hpжњџй—ґпјЊе…¶д»–зєїзЁ‹дёЌеЏЇд»Ґи®їй—®hp</li>
  <li>еўћеЉ зєїзЁ‹иЋ·еЏ–е€°hpзљ„еЂјпјЊе№¶иї›иЎЊиїђз®—</li>
  <li>ењЁиїђз®—жњџй—ґпјЊе‡Џе°‘зєїзЁ‹иЇ•е›ѕжќҐиЋ·еЏ–hpзљ„еЂјпјЊдЅ†жЇдёЌиў«е…Ѓи®ё</li>
  <li>еўћеЉ зєїзЁ‹иїђз®—з»“жќџпјЊе№¶ж€ђеЉџдї®ж”№hpзљ„еЂјдёє10001</li>
  <li>е‡Џе°‘зєїзЁ‹пјЊењЁеўћеЉ зєїзЁ‹еЃље®ЊеђЋпјЊж‰ЌиѓЅи®їй—®hpзљ„еЂјпјЊеЌі10001</li>
  <li>е‡Џе°‘зєїзЁ‹иїђз®—пјЊе№¶еѕ—е€°ж–°зљ„еЂј10000</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/788.png" alt="" /></p>

<h3 id="synchronized">synchronized</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Object</span> <span class="n">someObject</span> <span class="o">=</span><span class="k">new</span> <span class="nc">Object</span><span class="o">();</span>
<span class="kd">synchronized</span> <span class="o">(</span><span class="n">someObject</span><span class="o">){</span>
  <span class="c1">//ж­¤е¤„зљ„д»Јз ЃеЏЄжњ‰еЌ жњ‰дє†someObjectеђЋж‰ЌеЏЇд»Ґж‰§иЎЊ</span>
<span class="o">}</span>
<span class="cm">/*
synchronizedиЎЁз¤єеЅ“е‰ЌзєїзЁ‹пјЊз‹¬еЌ  еЇ№и±Ў someObject
еЅ“е‰ЌзєїзЁ‹з‹¬еЌ  дє†еЇ№и±ЎsomeObjectпјЊе¦‚жћњжњ‰е…¶д»–зєїзЁ‹иЇ•е›ѕеЌ жњ‰еЇ№и±ЎsomeObjectпјЊе°±дјљз­‰еѕ…пјЊз›ґе€°еЅ“е‰ЌзєїзЁ‹й‡Љж”ѕеЇ№someObjectзљ„еЌ з”ЁгЂ‚
someObject еЏ€еЏ«еђЊж­ҐеЇ№и±ЎпјЊж‰Ђжњ‰зљ„еЇ№и±ЎпјЊйѓЅеЏЇд»ҐдЅњдёєеђЊж­ҐеЇ№и±Ў
дёєдє†иѕѕе€°еђЊж­Ґзљ„ж•€жћњпјЊеї…йЎ»дЅїз”ЁеђЊдёЂдёЄеђЊж­ҐеЇ№и±Ў
й‡Љж”ѕеђЊж­ҐеЇ№и±Ўзљ„ж–№ејЏпјљ synchronized еќ—и‡Єз„¶з»“жќџпјЊж€–иЂ…жњ‰еј‚еёёжЉ›е‡є
*/</span>
</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/789.png" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
	
	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">now</span><span class="o">(){</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">SimpleDateFormat</span><span class="o">(</span><span class="s">"HH:mm:ss"</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">());</span>
	<span class="o">}</span>
	
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Object</span> <span class="n">someObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">();</span>
         
        <span class="nc">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="s">" t1 зєїзЁ‹е·Із»ЏиїђиЎЊ"</span><span class="o">);</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">" иЇ•е›ѕеЌ жњ‰еЇ№и±ЎпјљsomeObject"</span><span class="o">);</span>
                    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">someObject</span><span class="o">)</span> <span class="o">{</span>
                         
                        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">" еЌ жњ‰еЇ№и±ЎпјљsomeObject"</span><span class="o">);</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
                        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">" й‡Љж”ѕеЇ№и±ЎпјљsomeObject"</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">now</span><span class="o">()+</span><span class="s">" t1 зєїзЁ‹з»“жќџ"</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="c1">// TODO Auto-generated catch block</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">" t1"</span><span class="o">);</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="nc">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
 
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="s">" t2 зєїзЁ‹е·Із»ЏиїђиЎЊ"</span><span class="o">);</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">" иЇ•е›ѕеЌ жњ‰еЇ№и±ЎпјљsomeObject"</span><span class="o">);</span>
                    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">someObject</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">" еЌ жњ‰еЇ№и±ЎпјљsomeObject"</span><span class="o">);</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
                        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">now</span><span class="o">()+</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()+</span> <span class="s">" й‡Љж”ѕеЇ№и±ЎпјљsomeObject"</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">now</span><span class="o">()+</span><span class="s">" t2 зєїзЁ‹з»“жќџ"</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="c1">// TODO Auto-generated catch block</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">" t2"</span><span class="o">);</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>
      
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>ж‰Ђжњ‰йњЂи¦Ѓдї®ж”№hpзљ„ењ°ж–№пјЊжњ‰и¦Ѓе»єз«‹ењЁеЌ жњ‰someObjectзљ„еџєзЎЂдёЉгЂ‚</li>
  <li>иЂЊеЇ№и±Ў someObjectењЁеђЊдёЂж—¶й—ґпјЊеЏЄиѓЅиў«дёЂдёЄзєїзЁ‹еЌ жњ‰гЂ‚ й—ґжЋҐењ°пјЊеЇји‡ґеђЊдёЂж—¶й—ґпјЊhpеЏЄиѓЅиў«дёЂдёЄзєїзЁ‹дї®ж”№гЂ‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.awt.GradientPaint</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

    	<span class="kd">final</span> <span class="nc">Object</span> <span class="n">someObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">();</span>
    	
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›–дј¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
         
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
 
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">addThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">reduceThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                	
                	<span class="c1">//д»»дЅ•зєїзЁ‹и¦Ѓдї®ж”№hpзљ„еЂјпјЊеї…йЎ»е…€еЌ з”ЁsomeObject</span>
                	<span class="kd">synchronized</span> <span class="o">(</span><span class="n">someObject</span><span class="o">)</span> <span class="o">{</span>
                		<span class="n">gareen</span><span class="o">.</span><span class="na">recover</span><span class="o">();</span>
					<span class="o">}</span>
                    
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">addThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
             
        <span class="o">}</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                	<span class="c1">//д»»дЅ•зєїзЁ‹и¦Ѓдї®ж”№hpзљ„еЂјпјЊеї…йЎ»е…€еЌ з”ЁsomeObject</span>
                	<span class="kd">synchronized</span> <span class="o">(</span><span class="n">someObject</span><span class="o">)</span> <span class="o">{</span>
                		<span class="n">gareen</span><span class="o">.</span><span class="na">hurt</span><span class="o">();</span>
                	<span class="o">}</span>
                	
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">reduceThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
        <span class="o">}</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">addThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">reduceThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
         
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%dдёЄеўћеЉ зєїзЁ‹е’Њ%dдёЄе‡Џе°‘зєїзЁ‹з»“жќџеђЋ%nз›–дј¦зљ„иЎЂй‡ЏжЇ %.0f%n"</span><span class="o">,</span> <span class="n">n</span><span class="o">,</span><span class="n">n</span><span class="o">,</span><span class="n">gareen</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
         
    <span class="o">}</span>
      
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/790.png" alt="" /></p>

<ul>
  <li>ж—ўз„¶д»»ж„ЏеЇ№и±ЎйѓЅеЏЇд»Ґз”ЁжќҐдЅњдёєеђЊж­ҐеЇ№и±ЎпјЊиЂЊж‰Ђжњ‰зљ„зєїзЁ‹и®їй—®зљ„йѓЅжЇеђЊдёЂдёЄheroеЇ№и±ЎпјЊзґўжЂ§е°±дЅїз”ЁgareenжќҐдЅњдёєеђЊж­ҐеЇ№и±Ў</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">charactor</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hero</span><span class="o">{</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 
    <span class="kd">public</span> <span class="kt">float</span> <span class="n">hp</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">damage</span><span class="o">;</span>
    
    <span class="c1">//е›ћиЎЂ</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">recover</span><span class="o">(){</span>
    	<span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">//жЋ‰иЎЂ</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hurt</span><span class="o">(){</span>
    	<span class="c1">//дЅїз”ЁthisдЅњдёєеђЊж­ҐеЇ№и±Ў</span>
    	<span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
    		<span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span>	
		<span class="o">}</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">attackHero</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">-=</span><span class="n">damage</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s ж­ЈењЁж”»е‡» %s, %sзљ„иЎЂеЏж€ђдє† %.0f%n"</span><span class="o">,</span><span class="n">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">isDead</span><span class="o">())</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span><span class="s">"ж­»дє†пјЃ"</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDead</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">&gt;=</span><span class="n">hp</span><span class="o">?</span><span class="kc">true</span><span class="o">:</span><span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
 
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.awt.GradientPaint</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›–дј¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
         
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
 
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">addThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">reduceThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                	
                	<span class="c1">//дЅїз”ЁgareenдЅњдёєsynchronized</span>
                	<span class="kd">synchronized</span> <span class="o">(</span><span class="n">gareen</span><span class="o">)</span> <span class="o">{</span>
                		<span class="n">gareen</span><span class="o">.</span><span class="na">recover</span><span class="o">();</span>
					<span class="o">}</span>
                    
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">addThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
             
        <span class="o">}</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                	<span class="c1">//дЅїз”ЁgareenдЅњдёєsynchronized</span>
                	<span class="c1">//ењЁж–№жі•hurtдё­жњ‰synchronized(this)</span>
                	<span class="n">gareen</span><span class="o">.</span><span class="na">hurt</span><span class="o">();</span>
                    
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">reduceThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
        <span class="o">}</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">addThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">reduceThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
         
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%dдёЄеўћеЉ зєїзЁ‹е’Њ%dдёЄе‡Џе°‘зєїзЁ‹з»“жќџеђЋ%nз›–дј¦зљ„иЎЂй‡ЏжЇ %.0f%n"</span><span class="o">,</span> <span class="n">n</span><span class="o">,</span><span class="n">n</span><span class="o">,</span><span class="n">gareen</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
         
    <span class="o">}</span>
      
<span class="o">}</span>


</code></pre></div></div>

<ul>
  <li>ењЁrecoverе‰ЌпјЊз›ґжЋҐеЉ дёЉsynchronized пјЊе…¶ж‰ЂеЇ№еє”зљ„еђЊж­ҐеЇ№и±ЎпјЊе°±жЇthis</li>
  <li>е’Њhurtж–№жі•иѕѕе€°зљ„ж•€жћњжЇдёЂж ·
е¤–йѓЁзєїзЁ‹и®їй—®gareenзљ„ж–№жі•пјЊе°±дёЌйњЂи¦Ѓйўќе¤–дЅїз”Ёsynchronized дє†</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">charactor</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hero</span><span class="o">{</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> 
    <span class="kd">public</span> <span class="kt">float</span> <span class="n">hp</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">damage</span><span class="o">;</span>
    
    <span class="c1">//е›ћиЎЂ</span>
    <span class="c1">//з›ґжЋҐењЁж–№жі•е‰ЌеЉ дёЉдї®йҐ°з¬¦synchronized</span>
    <span class="c1">//е…¶ж‰ЂеЇ№еє”зљ„еђЊж­ҐеЇ№и±ЎпјЊе°±жЇthis</span>
    <span class="c1">//е’Њhurtж–№жі•иѕѕе€°зљ„ж•€жћњдёЂж ·</span>
    <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">recover</span><span class="o">(){</span>
    	<span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">//жЋ‰иЎЂ</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hurt</span><span class="o">(){</span>
    	<span class="c1">//дЅїз”ЁthisдЅњдёєеђЊж­ҐеЇ№и±Ў</span>
    	<span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
    		<span class="n">hp</span><span class="o">=</span><span class="n">hp</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span>	
		<span class="o">}</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">attackHero</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">-=</span><span class="n">damage</span><span class="o">;</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s ж­ЈењЁж”»е‡» %s, %sзљ„иЎЂеЏж€ђдє† %.0f%n"</span><span class="o">,</span><span class="n">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span><span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">isDead</span><span class="o">())</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span><span class="s">"ж­»дє†пјЃ"</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDead</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">&gt;=</span><span class="n">hp</span><span class="o">?</span><span class="kc">true</span><span class="o">:</span><span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
 
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.awt.GradientPaint</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›–дј¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
         
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
 
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">addThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="nc">Thread</span><span class="o">[]</span> <span class="n">reduceThreads</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                	
                	<span class="c1">//recoverи‡Єеё¦synchronized</span>
               		<span class="n">gareen</span><span class="o">.</span><span class="na">recover</span><span class="o">();</span>
                    
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">addThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
             
        <span class="o">}</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                	<span class="c1">//hurtи‡Єеё¦synchronized</span>
                	<span class="n">gareen</span><span class="o">.</span><span class="na">hurt</span><span class="o">();</span>
                    
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">};</span>
            <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="n">reduceThreads</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
        <span class="o">}</span>
         
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">addThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">reduceThreads</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
         
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%dдёЄеўћеЉ зєїзЁ‹е’Њ%dдёЄе‡Џе°‘зєїзЁ‹з»“жќџеђЋ%nз›–дј¦зљ„иЎЂй‡ЏжЇ %.0f%n"</span><span class="o">,</span> <span class="n">n</span><span class="o">,</span><span class="n">n</span><span class="o">,</span><span class="n">gareen</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
         
    <span class="o">}</span>
      
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>е¦‚жћњдёЂдёЄз±»пјЊе…¶ж–№жі•йѓЅжЇжњ‰synchronizedдї®йҐ°зљ„пјЊй‚Јд№€иЇҐз±»е°±еЏ«еЃљзєїзЁ‹е®‰е…Ёзљ„з±»</li>
  <li>еђЊдёЂж—¶й—ґпјЊеЏЄжњ‰дёЂдёЄзєїзЁ‹иѓЅе¤џиї›е…Ґ иї™з§Ќз±»зљ„дёЂдёЄе®ћдѕ‹ зљ„еЋ»дї®ж”№ж•°жЌ®пјЊиї›иЂЊдїќиЇЃдє†иї™дёЄе®ћдѕ‹дё­зљ„ж•°жЌ®зљ„е®‰е…Ё(дёЌдјљеђЊж—¶иў«е¤љзєїзЁ‹дї®ж”№иЂЊеЏж€ђи„Џж•°жЌ®)</li>
  <li>StringBufferзљ„ж–№жі•йѓЅжЇжњ‰synchronizedдї®йҐ°зљ„пјЊStringBufferе°±еЏ«еЃљзєїзЁ‹е®‰е…Ёзљ„з±»,иЂЊStringBuilderе°±дёЌжЇзєїзЁ‹е®‰е…Ёзљ„з±»</li>
</ul>

<h2 id="зєїзЁ‹е®‰е…Ё">зєїзЁ‹е®‰е…Ё</h2>

<ul>
  <li>HashMapе’ЊHashtableйѓЅе®ћзЋ°дє†MapжЋҐеЏЈпјЊйѓЅжЇй”®еЂјеЇ№дїќе­ж•°жЌ®зљ„ж–№ејЏ</li>
  <li>еЊєе€«1пјљ 
HashMapеЏЇд»Ґе­ж”ѕ null
HashtableдёЌиѓЅе­ж”ѕnull</li>
  <li>е€«2пјљ
HashMapдёЌжЇ<a href="http://how2j.cn/k/thread/thread-synchronized/355.html#step793">зєїзЁ‹е®‰е…Ёзљ„з±»</a>
HashtableжЇзєїзЁ‹е®‰е…Ёзљ„з±»</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/2595.png" alt="" /></p>

<ul>
  <li>StringBuffer жЇзєїзЁ‹е®‰е…Ёзљ„,StringBuilder жЇйќћзєїзЁ‹е®‰е…Ёзљ„</li>
  <li>ж‰Ђд»ҐеЅ“иї›иЎЊе¤§й‡Џе­—з¬¦дёІж‹јжЋҐж“ЌдЅњзљ„ж—¶еЂ™пјЊе¦‚жћњжЇеЌ•зєїзЁ‹е°±з”ЁStringBuilderдјљж›ґеї«дє›пјЊе¦‚жћњжЇе¤љзєїзЁ‹пјЊе°±йњЂи¦Ѓз”ЁStringBuffer дїќиЇЃж•°жЌ®зљ„е®‰е…ЁжЂ§</li>
  <li>йќћзєїзЁ‹е®‰е…Ёзљ„дёєд»Ђд№€дјљжЇ”зєїзЁ‹е®‰е…Ёзљ„ еї«пјџ е› дёєдёЌйњЂи¦ЃеђЊж­Ґе›пјЊзњЃз•Ґдє†дє›ж—¶й—ґ</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/2596.png" alt="" /></p>

<ul>
  <li>VectorжЇзєїзЁ‹е®‰е…Ёзљ„з±»пјЊиЂЊArrayListжЇйќћзєїзЁ‹е®‰е…Ёзљ„гЂ‚</li>
  <li>ArrayListжЇйќћзєїзЁ‹е®‰е…Ёзљ„пјЊжЌўеЏҐиЇќиЇґпјЊе¤љдёЄзєїзЁ‹еЏЇд»ҐеђЊж—¶иї›е…ҐдёЂдёЄArrayListеЇ№и±Ўзљ„addж–№жі•</li>
  <li>еЂџеЉ©Collections.synchronizedListпјЊеЏЇд»ҐжЉЉArrayListиЅ¬жЌўдёєзєїзЁ‹е®‰е…Ёзљ„ListгЂ‚</li>
  <li>дёЋж­¤з±»дјјзљ„пјЊиїжњ‰HashSet,LinkedList,HashMapз­‰з­‰йќћзєїзЁ‹е®‰е…Ёзљ„з±»пјЊйѓЅйЂљиї‡<a href="http://how2j.cn/k/collection/collection-collections/369.html">е·Ґе…·з±»Collections</a>иЅ¬жЌўдёєзєїзЁ‹е®‰е…Ёзљ„</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collections</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
   
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    	<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    	<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list2</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">synchronizedList</span><span class="o">(</span><span class="n">list1</span><span class="o">);</span>
    <span class="o">}</span>
       
<span class="o">}</span>

</code></pre></div></div>

<h2 id="ж­»й”Ѓ">ж­»й”Ѓ</h2>

<ul>
  <li>еЅ“дёљеЉЎжЇ”иѕѓе¤Ќжќ‚пјЊе¤љзєїзЁ‹еє”з”Ёй‡Њжњ‰еЏЇиѓЅдјљеЏ‘з”џж­»й”Ѓ</li>
  <li>зєїзЁ‹1 й¦–е…€еЌ жњ‰еЇ№и±Ў1пјЊжЋҐзќЂиЇ•е›ѕеЌ жњ‰еЇ№и±Ў2</li>
  <li>зєїзЁ‹2 й¦–е…€еЌ жњ‰еЇ№и±Ў2пјЊжЋҐзќЂиЇ•е›ѕеЌ жњ‰еЇ№и±Ў1</li>
  <li>зєїзЁ‹1 з­‰еѕ…зєїзЁ‹2й‡Љж”ѕеЇ№и±Ў2</li>
  <li>дёЋж­¤еђЊж—¶пјЊзєїзЁ‹2з­‰еѕ…зєїзЁ‹1й‡Љж”ѕеЇ№и±Ў1</li>
  <li>е°±дјљгЂ‚гЂ‚гЂ‚дёЂз›ґз­‰еѕ…дё‹еЋ»пјЊз›ґе€°е¤©иЌ’ењ°иЂЃпјЊжµ·жћЇзџізѓ‚пјЊе±±ж— жЈ± пјЊе¤©ењ°еђ€гЂ‚гЂ‚гЂ‚</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/794.png" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DeadlockTest</span> <span class="o">{</span>
	<span class="c1">//е®љд№‰2дёЄиµ„жєђ</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Integer</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Integer</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//еђЇеЉЁ2дёЄзєїзЁ‹,е€†е€«и°ѓз”ЁgetA()е’ЊgetB()</span>
        <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="nl">DeadlockTest:</span><span class="o">:</span><span class="n">getA</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
        <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="nl">DeadlockTest:</span><span class="o">:</span><span class="n">getB</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>
	<span class="kd">static</span> <span class="kt">void</span> <span class="nf">getA</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">//з”Ёsynchronized еЇ№aеЇ№и±ЎеЉ й”Ѓ</span>
        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"иЋ·еЏ–е€°Aй”Ѓ"</span><span class="o">);</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="c1">//з­‰еѕ…500ms,е†ЌеЋ»иЋ·еЏ–Bиµ„жєђй”Ѓ,и®©еЏ¦дёЂдёЄзєїзЁ‹жњ‰ж—¶й—ґеЋ»з‹¬еЌ b</span>
                <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span>
                <span class="n">getB</span><span class="o">();</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"иЋ·еЏ–е€°Bй”Ѓ"</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">getB</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">b</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"иЋ·еЏ–е€°Bй”Ѓ"</span><span class="o">);</span>
             <span class="k">try</span> <span class="o">{</span>
                <span class="c1">//з­‰еѕ…500ms,е†ЌеЋ»иЋ·еЏ–Aиµ„жєђй”Ѓ,и®©еЏ¦дёЂдёЄзєїзЁ‹жњ‰ж—¶й—ґеЋ»з‹¬еЌ a</span>
                <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span>
            	<span class="n">getA</span><span class="o">();</span>
            	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"иЋ·еЏ–е€°Aй”Ѓ"</span><span class="o">);</span>
             <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
Thread-0иЋ·еЏ–е€°Aй”Ѓ
Thread-1иЋ·еЏ–е€°Bй”Ѓ

Thread-0ењЁж‹їе€°aеЇ№и±Ўзљ„з›‘и§†е™Ёй”Ѓпј€еђЋж–‡з®Ђз§°вЂњAй”ЃвЂќпј‰д№‹еђЋпјЊеЏ€и¦ЃеЋ»ж‹їbеЇ№и±Ўзљ„з›‘и§†е™Ёй”Ѓпј€з®Ђз§°вЂњBй”ЃвЂќпј‰пјЊиЂЊж­¤ж—¶Bй”ЃењЁThread-1ж‰‹дё­пјЊдєЋжЇThread-0еЏЄиѓЅй»еЎћпјЊз­‰еѕ…Bй”Ѓиў«Thread-1й‡Љж”ѕгЂ‚еЇ№Thread-1иЂЊиЁЂпјЊдє¦жЇе¦‚ж­¤пјЊж­»й”Ѓдє§з”џгЂ‚

дє’ж–ҐжќЎд»¶:ењЁдёЉйќўд»Јз Ѓдё­е°±жЇйЂљиї‡synchronizedеЉ й”ЃпјЊиЇҐй”ЃжЇз‹¬еЌ зљ„гЂЃжЋ’е®ѓзљ„гЂ‚дёЂдёЄзєїзЁ‹иЋ·еЏ–е€°д№‹еђЋпјЊдёЌе…Ѓи®ёз¬¬дєЊдёЄзєїзЁ‹еђЊж—¶иЋ·еЏ–гЂ‚

иЇ·ж±‚е’ЊдїќжЊЃжќЎд»¶пјљThread-0ж‹їе€°Aй”Ѓзљ„еђЊж—¶пјЊеЏ€и¦ЃиЇ·ж±‚Bй”ЃпјЊдЅ†Bй”Ѓиў« Thread-1еЌ жњ‰пјЊж‰Ђд»Ґи¦Ѓй»еЎћи‡Єе·±пјЊз­‰еѕ…Bиµ„жєђгЂ‚

дёЌе‰Ґе¤єжќЎд»¶пјљThread-0дёЌиѓЅжЉўеЌ Thread-1е·Іж‹Ґжњ‰зљ„иµ„жєђпјЊеЏЄиѓЅз­‰еѕ…е…¶дё»еЉЁй‡Љж”ѕгЂ‚

зЋЇи·Їз­‰еѕ…жќЎд»¶пјљhread-0з­‰еѕ…Thread-1еЌ з”Ёзљ„иµ„жєђBпјЊThread-1з­‰еѕ…Thread-0еЌ з”Ёзљ„иµ„жєђAпјЊеЅўж€ђзЋЇи·Їз­‰еѕ…жќЎд»¶гЂ‚
*/</span>
</code></pre></div></div>

<h2 id="дє¤дє’">дє¤дє’</h2>

<ul>
  <li>зєїзЁ‹д№‹й—ґжњ‰дє¤дє’йЂљзџҐзљ„йњЂж±‚пјЊиЂѓи™‘е¦‚дё‹жѓ…е†µпјљ</li>
  <li>жњ‰дё¤дёЄзєїзЁ‹пјЊе¤„зђ†еђЊдёЂдёЄи‹±й›„гЂ‚ дёЂдёЄеЉ иЎЂпјЊдёЂдёЄе‡ЏиЎЂгЂ‚е‡ЏиЎЂзљ„зєїзЁ‹пјЊеЏ‘зЋ°иЎЂй‡Џ=1пјЊе°±еЃњж­ўе‡ЏиЎЂпјЊз›ґе€°еЉ иЎЂзљ„зєїзЁ‹дёєи‹±й›„еЉ дє†иЎЂпјЊж‰ЌеЏЇд»Ґз»§з»­е‡ЏиЎЂ</li>
  <li>ењЁHeroз±»дё­пјљhurt()е‡ЏиЎЂж–№жі•пјљеЅ“hp=1зљ„ж—¶еЂ™пјЊж‰§иЎЊthis.wait().</li>
  <li>this.wait()иЎЁз¤є и®©еЌ жњ‰thisзљ„зєїзЁ‹з­‰еѕ…пјЊе№¶дёґж—¶й‡Љж”ѕеЌ жњ‰</li>
  <li>иї›е…Ґhurtж–№жі•зљ„зєїзЁ‹еї…з„¶жЇе‡ЏиЎЂзєїзЁ‹пјЊthis.wait()дјљи®©е‡ЏиЎЂзєїзЁ‹дёґж—¶й‡Љж”ѕеЇ№thisзљ„еЌ жњ‰гЂ‚ иї™ж ·еЉ иЎЂзєїзЁ‹пјЊе°±жњ‰жњєдјљиї›е…Ґrecover()еЉ иЎЂж–№жі•дє†гЂ‚</li>
  <li>recover() еЉ иЎЂж–№жі•пјљеўћеЉ дє†иЎЂй‡ЏпјЊж‰§иЎЊthis.notify();</li>
  <li>this.notify() иЎЁз¤єйЂљзџҐй‚Јдє›з­‰еѕ…ењЁthisзљ„зєїзЁ‹пјЊеЏЇд»Ґи‹Џй†’иї‡жќҐдє†гЂ‚ з­‰еѕ…ењЁthisзљ„зєїзЁ‹пјЊжЃ°жЃ°е°±жЇе‡ЏиЎЂзєїзЁ‹гЂ‚ дёЂж—¦recover()з»“жќџпјЊ еЉ иЎЂзєїзЁ‹й‡Љж”ѕдє†thisпјЊе‡ЏиЎЂзєїзЁ‹пјЊе°±еЏЇд»Ґй‡Ќж–°еЌ жњ‰thisпјЊе№¶ж‰§иЎЊеђЋйќўзљ„е‡ЏиЎЂе·ҐдЅњгЂ‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">charactor</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hero</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kt">float</span> <span class="n">hp</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kt">int</span> <span class="n">damage</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">recover</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">hp</span> <span class="o">=</span> <span class="n">hp</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%s е›ћиЎЂ1з‚№,еўћеЉ иЎЂеђЋпјЊ%sзљ„иЎЂй‡ЏжЇ%.0f%n"</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">hp</span><span class="o">);</span>
		<span class="c1">// йЂљзџҐй‚Јдє›з­‰еѕ…ењЁthisеЇ№и±ЎдёЉзљ„зєїзЁ‹пјЊеЏЇд»Ґй†’иї‡жќҐдє†пјЊе¦‚з¬¬20иЎЊпјЊз­‰еѕ…зќЂзљ„е‡ЏиЎЂзєїзЁ‹пјЊи‹Џй†’иї‡жќҐ</span>
		<span class="k">this</span><span class="o">.</span><span class="na">notify</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">hurt</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">hp</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">try</span> <span class="o">{</span>
				<span class="c1">// и®©еЌ жњ‰thisзљ„е‡ЏиЎЂзєїзЁ‹пјЊжљ‚ж—¶й‡Љж”ѕеЇ№thisзљ„еЌ жњ‰пјЊе№¶з­‰еѕ…</span>
				<span class="k">this</span><span class="o">.</span><span class="na">wait</span><span class="o">();</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">// TODO Auto-generated catch block</span>
				<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span>

		<span class="n">hp</span> <span class="o">=</span> <span class="n">hp</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%s е‡ЏиЎЂ1з‚№,е‡Џе°‘иЎЂеђЋпјЊ%sзљ„иЎЂй‡ЏжЇ%.0f%n"</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">hp</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">attackHero</span><span class="o">(</span><span class="nc">Hero</span> <span class="n">h</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">h</span><span class="o">.</span><span class="na">hp</span> <span class="o">-=</span> <span class="n">damage</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s ж­ЈењЁж”»е‡» %s, %sзљ„иЎЂеЏж€ђдє† %.0f%n"</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="n">h</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="n">h</span><span class="o">.</span><span class="na">hp</span><span class="o">);</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">isDead</span><span class="o">())</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span> <span class="s">"ж­»дє†пјЃ"</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDead</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="mi">0</span> <span class="o">&gt;=</span> <span class="n">hp</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span> <span class="kc">false</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span>


</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
     
<span class="kn">import</span> <span class="nn">java.awt.GradientPaint</span><span class="o">;</span>
   
<span class="kn">import</span> <span class="nn">charactor.Hero</span><span class="o">;</span>
     
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
     
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
   
        <span class="kd">final</span> <span class="nc">Hero</span> <span class="n">gareen</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Hero</span><span class="o">();</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"з›–дј¦"</span><span class="o">;</span>
        <span class="n">gareen</span><span class="o">.</span><span class="na">hp</span> <span class="o">=</span> <span class="mi">616</span><span class="o">;</span>
            
        <span class="nc">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
                      
                    <span class="c1">//ж— йњЂеѕЄзЋЇе€¤ж–­</span>
<span class="c1">//                    while(gareen.hp==1){</span>
<span class="c1">//                        continue;</span>
<span class="c1">//                    }</span>
                      
                    <span class="n">gareen</span><span class="o">.</span><span class="na">hurt</span><span class="o">();</span>
                    
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
  
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
  
        <span class="nc">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
                <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
                    <span class="n">gareen</span><span class="o">.</span><span class="na">recover</span><span class="o">();</span>
  
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
  
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            
    <span class="o">}</span>
         
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/796.png" alt="" /></p>

<ul>
  <li>иї™й‡ЊйњЂи¦Ѓејєи°ѓзљ„жЇпјЊwaitж–№жі•е’Њnotifyж–№жі•пјЊе№¶дёЌжЇThreadзєїзЁ‹дёЉзљ„ж–№жі•пјЊе®ѓд»¬жЇObjectдёЉзљ„ж–№жі•гЂ‚</li>
  <li>е› дёєж‰Ђжњ‰зљ„ObjectйѓЅеЏЇд»Ґиў«з”ЁжќҐдЅњдёєеђЊж­ҐеЇ№и±ЎпјЊж‰Ђд»Ґе‡†зЎ®зљ„и®ІпјЊwaitе’ЊnotifyжЇеђЊж­ҐеЇ№и±ЎдёЉзљ„ж–№жі•гЂ‚</li>
  <li>wait()зљ„ж„ЏжЂќжЇпјљ и®©еЌ з”Ёдє†иї™дёЄеђЊж­ҐеЇ№и±Ўзљ„зєїзЁ‹пјЊдёґж—¶й‡Љж”ѕеЅ“е‰Ќзљ„еЌ з”ЁпјЊе№¶дё”з­‰еѕ…гЂ‚ ж‰Ђд»Ґи°ѓз”ЁwaitжЇжњ‰е‰ЌжЏђжќЎд»¶зљ„пјЊдёЂе®љжЇењЁsynchronizedеќ—й‡ЊпјЊеђ¦е€™е°±дјље‡єй”™гЂ‚</li>
  <li>notify() зљ„ж„ЏжЂќжЇпјЊйЂљзџҐдёЂдёЄз­‰еѕ…ењЁиї™дёЄеђЊж­ҐеЇ№и±ЎдёЉзљ„зєїзЁ‹пјЊдЅ еЏЇд»Ґи‹Џй†’иї‡жќҐдє†пјЊжњ‰жњєдјљй‡Ќж–°еЌ з”ЁеЅ“е‰ЌеЇ№и±Ўдє†гЂ‚</li>
  <li>notifyAll() зљ„ж„ЏжЂќжЇпјЊйЂљзџҐж‰Ђжњ‰зљ„з­‰еѕ…ењЁиї™дёЄеђЊж­ҐеЇ№и±ЎдёЉзљ„зєїзЁ‹пјЊдЅ д»¬еЏЇд»Ґи‹Џй†’иї‡жќҐдє†пјЊжњ‰жњєдјљй‡Ќж–°еЌ з”ЁеЅ“е‰ЌеЇ№и±Ўдє†гЂ‚</li>
</ul>

<h2 id="зєїзЁ‹ж± ">зєїзЁ‹ж± </h2>

<ul>
  <li>жЇЏдёЂдёЄзєїзЁ‹зљ„еђЇеЉЁе’Њз»“жќџйѓЅжЇжЇ”иѕѓж¶€иЂ—ж—¶й—ґе’ЊеЌ з”Ёиµ„жєђзљ„гЂ‚</li>
  <li>е¦‚жћњењЁзі»з»џдё­з”Ёе€°дє†еѕ€е¤љзљ„зєїзЁ‹пјЊе¤§й‡Џзљ„еђЇеЉЁе’Њз»“жќџеЉЁдЅњдјљеЇји‡ґзі»з»џзљ„жЂ§иѓЅеЏеЌЎпјЊе“Ќеє”еЏж…ўгЂ‚</li>
  <li>дёєдє†и§Је†іиї™дёЄй—®йўпјЊеј•е…ҐзєїзЁ‹ж± иї™з§Ќи®ѕи®ЎжЂќжѓігЂ‚</li>
  <li>зєїзЁ‹ж± зљ„жЁЎејЏеѕ€еѓЏ<a href="http://how2j.cn/k/thread/thread-wait-notify/358.html#step2591">з”џдє§иЂ…ж¶€иґ№иЂ…жЁЎејЏ</a>пјЊж¶€иґ№зљ„еЇ№и±ЎжЇдёЂдёЄдёЂдёЄзљ„иѓЅе¤џиїђиЎЊзљ„д»»еЉЎ</li>
</ul>

<h3 id="и®ѕи®ЎжЂќи·Ї">и®ѕи®ЎжЂќи·Ї</h3>

<ul>
  <li>е‡†е¤‡дёЂдёЄд»»еЉЎе®№е™Ё</li>
  <li>дёЂж¬ЎжЂ§еђЇеЉЁ10дёЄ ж¶€иґ№иЂ…зєїзЁ‹</li>
  <li>е€љејЂе§‹д»»еЉЎе®№е™ЁжЇз©єзљ„пјЊж‰Ђд»ҐзєїзЁ‹йѓЅwaitењЁдёЉйќўгЂ‚</li>
  <li>з›ґе€°дёЂдёЄе¤–йѓЁзєїзЁ‹еѕЂиї™дёЄд»»еЉЎе®№е™Ёдё­ж‰”дє†дёЂдёЄвЂњд»»еЉЎвЂќпјЊе°±дјљжњ‰дёЂдёЄж¶€иґ№иЂ…зєїзЁ‹иў«<a href="http://how2j.cn/k/thread/thread-wait-notify/358.html#step796">е”¤й†’notify</a></li>
  <li>иї™дёЄж¶€иґ№иЂ…зєїзЁ‹еЏ–е‡євЂњд»»еЉЎвЂќпјЊе№¶дё”ж‰§иЎЊиї™дёЄд»»еЉЎпјЊж‰§иЎЊе®ЊжЇ•еђЋпјЊз»§з»­з­‰еѕ…дё‹дёЂж¬Ўд»»еЉЎзљ„е€°жќҐгЂ‚</li>
  <li>е¦‚жћњзџ­ж—¶й—ґе†…пјЊжњ‰иѕѓе¤љзљ„д»»еЉЎеЉ е…ҐпјЊй‚Јд№€е°±дјљжњ‰е¤љдёЄзєїзЁ‹иў«е”¤й†’пјЊеЋ»ж‰§иЎЊиї™дє›д»»еЉЎгЂ‚</li>
  <li>ењЁж•ґдёЄиї‡зЁ‹дё­пјЊйѓЅдёЌйњЂи¦Ѓе€›е»єж–°зљ„зєїзЁ‹пјЊиЂЊжЇеѕЄзЋЇдЅїз”Ёиї™дє›е·Із»Џе­ењЁзљ„зєїзЁ‹</li>
</ul>

<p><img src="http://stepimagewm.how2j.cn/2600.png" alt="" /></p>

<h3 id="и‡Єе®љд№‰">и‡Єе®љд№‰</h3>

<ul>
  <li>зј“ж…ўзљ„з»™иї™дёЄзєїзЁ‹ж± ж·»еЉ д»»еЉЎпјЊдјљзњ‹е€°жњ‰е¤љжќЎзєїзЁ‹жќҐж‰§иЎЊиї™дє›д»»еЉЎгЂ‚</li>
  <li>зєїзЁ‹7ж‰§иЎЊе®ЊжЇ•д»»еЉЎеђЋпјЊеЏ€е›ће€°ж± е­ђй‡ЊпјЊдё‹дёЂж¬Ўд»»еЉЎжќҐзљ„ж—¶еЂ™пјЊзєїзЁ‹7еЏ€жќҐж‰§иЎЊж–°зљ„д»»еЉЎгЂ‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.util.LinkedList</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadPool</span> <span class="o">{</span>
 
    <span class="c1">// зєїзЁ‹ж± е¤§е°Џ</span>
    <span class="kt">int</span> <span class="n">threadPoolSize</span><span class="o">;</span>
 
    <span class="c1">// д»»еЉЎе®№е™Ё</span>
    <span class="nc">LinkedList</span><span class="o">&lt;</span><span class="nc">Runnable</span><span class="o">&gt;</span> <span class="n">tasks</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedList</span><span class="o">&lt;</span><span class="nc">Runnable</span><span class="o">&gt;();</span>
 
    <span class="c1">// иЇ•е›ѕж¶€иґ№д»»еЉЎзљ„зєїзЁ‹</span>
 
    <span class="kd">public</span> <span class="nf">ThreadPool</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">threadPoolSize</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
 
        <span class="c1">// еђЇеЉЁ10дёЄд»»еЉЎж¶€иґ№иЂ…зєїзЁ‹</span>
        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">tasks</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">threadPoolSize</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">new</span> <span class="nf">TaskConsumeThread</span><span class="o">(</span><span class="s">"д»»еЉЎж¶€иґ№иЂ…зєїзЁ‹ "</span> <span class="o">+</span> <span class="n">i</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="nc">Runnable</span> <span class="n">r</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">tasks</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">tasks</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">r</span><span class="o">);</span>
            <span class="c1">// е”¤й†’з­‰еѕ…зљ„д»»еЉЎж¶€иґ№иЂ…зєїзЁ‹</span>
            <span class="n">tasks</span><span class="o">.</span><span class="na">notifyAll</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
 
    <span class="kd">class</span> <span class="nc">TaskConsumeThread</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="nf">TaskConsumeThread</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="o">}</span>
 
        <span class="nc">Runnable</span> <span class="n">task</span><span class="o">;</span>
 
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"еђЇеЉЁпјљ "</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
                <span class="kd">synchronized</span> <span class="o">(</span><span class="n">tasks</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">while</span> <span class="o">(</span><span class="n">tasks</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
                        <span class="k">try</span> <span class="o">{</span>
                            <span class="n">tasks</span><span class="o">.</span><span class="na">wait</span><span class="o">();</span>
                        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                            <span class="c1">// TODO Auto-generated catch block</span>
                            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                    <span class="n">task</span> <span class="o">=</span> <span class="n">tasks</span><span class="o">.</span><span class="na">removeLast</span><span class="o">();</span>
                    <span class="c1">// е…Ѓи®ёж·»еЉ д»»еЉЎзљ„зєїзЁ‹еЏЇд»Ґз»§з»­ж·»еЉ д»»еЉЎ</span>
                    <span class="n">tasks</span><span class="o">.</span><span class="na">notifyAll</span><span class="o">();</span>
 
                <span class="o">}</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" иЋ·еЏ–е€°д»»еЉЎпјЊе№¶ж‰§иЎЊ"</span><span class="o">);</span>
                <span class="n">task</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
 
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
      
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ThreadPool</span> <span class="n">pool</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ThreadPool</span><span class="o">();</span>
 
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        	<span class="nc">Runnable</span> <span class="n">task</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                    <span class="c1">//System.out.println("ж‰§иЎЊд»»еЉЎ");</span>
                	<span class="c1">//д»»еЉЎеЏЇиѓЅжЇж‰“еЌ°дёЂеЏҐиЇќ</span>
                	<span class="c1">//еЏЇиѓЅжЇи®їй—®ж–‡д»¶</span>
                	<span class="c1">//еЏЇиѓЅжЇеЃљжЋ’еєЏ</span>
                <span class="o">}</span>
            <span class="o">};</span>
        	
            <span class="n">pool</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>
        	
            <span class="k">try</span> <span class="o">{</span>
				<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">// TODO Auto-generated catch block</span>
				<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
			<span class="o">}</span>
        <span class="o">}</span>
 
    <span class="o">}</span>
          
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/1006.png" alt="" /></p>

<h3 id="жµ‹иЇ•">жµ‹иЇ•</h3>

<ul>
  <li>е€›йЂ дёЂдёЄжѓ…ж™ЇпјЊжЇЏдёЄд»»еЉЎж‰§иЎЊзљ„ж—¶й—ґйѓЅжЇ1з§’</li>
  <li>е€љејЂе§‹жЇй—ґйљ”1з§’й’џеђ‘зєїзЁ‹ж± дё­ж·»еЉ д»»еЉЎ</li>
  <li>з„¶еђЋй—ґйљ”ж—¶й—ґи¶ЉжќҐи¶Љзџ­пјЊж‰§иЎЊд»»еЉЎзљ„зєїзЁ‹иїжІЎжњ‰жќҐеѕ—еЏЉз»“жќџпјЊж–°зљ„д»»еЉЎеЏ€жќҐдє†гЂ‚</li>
  <li>е°±дјљи§‚еЇџе€°зєїзЁ‹ж± й‡Њзљ„е…¶д»–зєїзЁ‹иў«е”¤й†’жќҐж‰§иЎЊиї™дє›д»»еЉЎ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ThreadPool</span> <span class="n">pool</span><span class="o">=</span> <span class="k">new</span> <span class="nc">ThreadPool</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">sleep</span><span class="o">=</span><span class="mi">1000</span><span class="o">;</span>
        <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
            <span class="n">pool</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">(){</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                    <span class="c1">//System.out.println("ж‰§иЎЊд»»еЉЎ");</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">});</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">sleep</span><span class="o">);</span>
                <span class="n">sleep</span> <span class="o">=</span> <span class="n">sleep</span><span class="o">&gt;</span><span class="mi">100</span><span class="o">?</span><span class="n">sleep</span><span class="o">-</span><span class="mi">100</span><span class="o">:</span><span class="n">sleep</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated catch block</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
             
        <span class="o">}</span>
         
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/2601.png" alt="" /></p>

<h3 id="javaзєїзЁ‹ж± ">javaзєїзЁ‹ж± </h3>

<ul>
  <li>зєїзЁ‹ж± з±»ThreadPoolExecutorењЁеЊ…java.util.concurrentдё‹</li>
  <li><code class="language-plaintext highlighter-rouge">ThreadPoolExecutor threadPool= new ThreadPoolExecutor(10, 15, 60, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());</code></li>
  <li>з¬¬дёЂдёЄеЏ‚ж•°10 иЎЁз¤єиї™дёЄзєїзЁ‹ж± е€ќе§‹еЊ–дє†10дёЄзєїзЁ‹ењЁй‡Њйќўе·ҐдЅњ</li>
  <li>з¬¬дєЊдёЄеЏ‚ж•°15 иЎЁз¤єе¦‚жћњ10дёЄзєїзЁ‹дёЌе¤џз”Ёдє†пјЊе°±дјљи‡ЄеЉЁеўћеЉ е€°жњЂе¤љ15дёЄзєїзЁ‹</li>
  <li>з¬¬дё‰дёЄеЏ‚ж•°60 з»“еђ€з¬¬е››дёЄеЏ‚ж•°TimeUnit.SECONDSпјЊиЎЁз¤єз»Џиї‡60з§’пјЊе¤ље‡єжќҐзљ„зєїзЁ‹иїжІЎжњ‰жЋҐе€°жґ»е„їпјЊе°±дјље›ћж”¶пјЊжњЂеђЋдїќжЊЃж± е­ђй‡Ње°±10дёЄ</li>
  <li>з¬¬е››дёЄеЏ‚ж•°TimeUnit.SECONDS е¦‚дёЉ</li>
  <li>з¬¬дє”дёЄеЏ‚ж•° new LinkedBlockingQueue() з”ЁжќҐж”ѕд»»еЉЎзљ„й›†еђ€</li>
  <li>executeж–№жі•з”ЁдєЋж·»еЉ ж–°зљ„д»»еЉЎ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.util.concurrent.LinkedBlockingQueue</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.ThreadPoolExecutor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
          
        <span class="nc">ThreadPoolExecutor</span> <span class="n">threadPool</span><span class="o">=</span> <span class="k">new</span> <span class="nc">ThreadPoolExecutor</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">60</span><span class="o">,</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">,</span> <span class="k">new</span> <span class="nc">LinkedBlockingQueue</span><span class="o">&lt;</span><span class="nc">Runnable</span><span class="o">&gt;());</span>
          
        <span class="n">threadPool</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">(){</span>
  
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="c1">// TODO Auto-generated method stub</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"д»»еЉЎ1"</span><span class="o">);</span>
            <span class="o">}</span>
              
        <span class="o">});</span>
  
    <span class="o">}</span>
  
<span class="o">}</span>

</code></pre></div></div>

<h2 id="lock">Lock</h2>

<ul>
  <li>дёЋsynchronizedз±»дјјзљ„пјЊlockд№џиѓЅе¤џиѕѕе€°еђЊж­Ґзљ„ж•€жћњ</li>
  <li>LockжЇдёЂдёЄжЋҐеЏЈпјЊдёєдє†дЅїз”ЁдёЂдёЄLockеЇ№и±ЎпјЊйњЂи¦Ѓз”Ёе€°</li>
  <li><code class="language-plaintext highlighter-rouge">Lock lock = new ReentrantLock();</code></li>
  <li>дёЋ synchronized (someObject) з±»дјјзљ„пјЊlock()ж–№жі•пјЊиЎЁз¤єеЅ“е‰ЌзєїзЁ‹еЌ з”ЁlockеЇ№и±ЎпјЊдёЂж—¦еЌ з”ЁпјЊе…¶д»–зєїзЁ‹е°±дёЌиѓЅеЌ з”Ёдє†гЂ‚</li>
  <li>дёЋ synchronized дёЌеђЊзљ„жЇпјЊдёЂж—¦synchronized еќ—з»“жќџпјЊе°±дјљи‡ЄеЉЁй‡Љж”ѕеЇ№someObjectзљ„еЌ з”ЁгЂ‚ lockеЌґеї…йЎ»и°ѓз”Ёunlockж–№жі•иї›иЎЊж‰‹еЉЁй‡Љж”ѕпјЊдёєдє†дїќиЇЃй‡Љж”ѕзљ„ж‰§иЎЊпјЊеѕЂеѕЂдјљжЉЉunlock() ж”ѕењЁfinallyдё­иї›иЎЊгЂ‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.locks.Lock</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.locks.ReentrantLock</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">now</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">SimpleDateFormat</span><span class="o">(</span><span class="s">"HH:mm:ss"</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">());</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="nc">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%s %s %s %n"</span><span class="o">,</span> <span class="n">now</span><span class="o">()</span> <span class="o">,</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">,</span> <span class="n">msg</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Lock</span> <span class="n">lock</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ReentrantLock</span><span class="o">();</span>

		<span class="nc">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">()</span> <span class="o">{</span>
			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
				<span class="k">try</span> <span class="o">{</span>
					<span class="n">log</span><span class="o">(</span><span class="s">"зєїзЁ‹еђЇеЉЁ"</span><span class="o">);</span>
					<span class="n">log</span><span class="o">(</span><span class="s">"иЇ•е›ѕеЌ жњ‰еЇ№и±Ўпјљlock"</span><span class="o">);</span>

					<span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>

					<span class="n">log</span><span class="o">(</span><span class="s">"еЌ жњ‰еЇ№и±Ўпјљlock"</span><span class="o">);</span>
					<span class="n">log</span><span class="o">(</span><span class="s">"иї›иЎЊ5з§’зљ„дёљеЉЎж“ЌдЅњ"</span><span class="o">);</span>
					<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>

				<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
					<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
				<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
					<span class="n">log</span><span class="o">(</span><span class="s">"й‡Љж”ѕеЇ№и±Ўпјљlock"</span><span class="o">);</span>
					<span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
				<span class="o">}</span>
				<span class="n">log</span><span class="o">(</span><span class="s">"зєїзЁ‹з»“жќџ"</span><span class="o">);</span>
			<span class="o">}</span>
		<span class="o">};</span>
		<span class="n">t1</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"t1"</span><span class="o">);</span>
		<span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="c1">//е…€и®©t1йЈћ2з§’</span>
			<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">2000</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e1</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
		<span class="nc">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">()</span> <span class="o">{</span>

			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
				<span class="k">try</span> <span class="o">{</span>
					<span class="n">log</span><span class="o">(</span><span class="s">"зєїзЁ‹еђЇеЉЁ"</span><span class="o">);</span>
					<span class="n">log</span><span class="o">(</span><span class="s">"иЇ•е›ѕеЌ жњ‰еЇ№и±Ўпјљlock"</span><span class="o">);</span>

					<span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>

					<span class="n">log</span><span class="o">(</span><span class="s">"еЌ жњ‰еЇ№и±Ўпјљlock"</span><span class="o">);</span>
					<span class="n">log</span><span class="o">(</span><span class="s">"иї›иЎЊ5з§’зљ„дёљеЉЎж“ЌдЅњ"</span><span class="o">);</span>
					<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>

				<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
					<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
				<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
					<span class="n">log</span><span class="o">(</span><span class="s">"й‡Љж”ѕеЇ№и±Ўпјљlock"</span><span class="o">);</span>
					<span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
				<span class="o">}</span>
				<span class="n">log</span><span class="o">(</span><span class="s">"зєїзЁ‹з»“жќџ"</span><span class="o">);</span>
			<span class="o">}</span>
		<span class="o">};</span>
		<span class="n">t2</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"t2"</span><span class="o">);</span>
		<span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
	<span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/2611.png" alt="" /></p>

<ul>
  <li>synchronized жЇдёЌеЌ з”Ёе€°ж‰‹дёЌзЅўдј‘зљ„пјЊдјљдёЂз›ґиЇ•е›ѕеЌ з”Ёдё‹еЋ»гЂ‚</li>
  <li>дёЋ synchronized зљ„й’»з‰›и§’е°–дёЌдёЂж ·пјЊLockжЋҐеЏЈиїжЏђдѕ›дє†дёЂдёЄtrylockж–№жі•гЂ‚</li>
  <li>trylockдјљењЁжЊ‡е®љж—¶й—ґиЊѓе›ґе†…иЇ•е›ѕеЌ з”ЁпјЊеЌ ж€ђеЉџдє†пјЊе°±е•Єе•Єе•ЄгЂ‚ е¦‚жћњж—¶й—ґе€°дє†пјЊиїеЌ з”ЁдёЌж€ђеЉџпјЊж‰­е¤ґе°±иµ°~</li>
  <li>жіЁж„Џпјљ е› дёєдЅїз”Ёtrylockжњ‰еЏЇиѓЅж€ђеЉџпјЊжњ‰еЏЇиѓЅе¤±иґҐпјЊж‰Ђд»ҐеђЋйќўunlockй‡Љж”ѕй”Ѓзљ„ж—¶еЂ™пјЊйњЂи¦Ѓе€¤ж–­жЇеђ¦еЌ з”Ёж€ђеЉџдє†пјЊе¦‚жћњжІЎеЌ з”Ёж€ђеЉџд№џunlock,е°±дјљжЉ›е‡єеј‚еёё</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.locks.Lock</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.locks.ReentrantLock</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">now</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">SimpleDateFormat</span><span class="o">(</span><span class="s">"HH:mm:ss"</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">());</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="nc">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%s %s %s %n"</span><span class="o">,</span> <span class="n">now</span><span class="o">()</span> <span class="o">,</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">,</span> <span class="n">msg</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Lock</span> <span class="n">lock</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ReentrantLock</span><span class="o">();</span>

		<span class="nc">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">()</span> <span class="o">{</span>
			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
				<span class="kt">boolean</span> <span class="n">locked</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
				<span class="k">try</span> <span class="o">{</span>
					<span class="n">log</span><span class="o">(</span><span class="s">"зєїзЁ‹еђЇеЉЁ"</span><span class="o">);</span>
					<span class="n">log</span><span class="o">(</span><span class="s">"иЇ•е›ѕеЌ жњ‰еЇ№и±Ўпјљlock"</span><span class="o">);</span>

					<span class="n">locked</span> <span class="o">=</span> <span class="n">lock</span><span class="o">.</span><span class="na">tryLock</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="nc">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">);</span>
					<span class="k">if</span><span class="o">(</span><span class="n">locked</span><span class="o">){</span>
						<span class="n">log</span><span class="o">(</span><span class="s">"еЌ жњ‰еЇ№и±Ўпјљlock"</span><span class="o">);</span>
						<span class="n">log</span><span class="o">(</span><span class="s">"иї›иЎЊ5з§’зљ„дёљеЉЎж“ЌдЅњ"</span><span class="o">);</span>
						<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
					<span class="o">}</span>
					<span class="k">else</span><span class="o">{</span>
						<span class="n">log</span><span class="o">(</span><span class="s">"з»Џиї‡1з§’й’џзљ„еЉЄеЉ›пјЊиїжІЎжњ‰еЌ жњ‰еЇ№и±ЎпјЊж”ѕејѓеЌ жњ‰"</span><span class="o">);</span>
					<span class="o">}</span>

				<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
					<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
				<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
					
					<span class="k">if</span><span class="o">(</span><span class="n">locked</span><span class="o">){</span>
						<span class="n">log</span><span class="o">(</span><span class="s">"й‡Љж”ѕеЇ№и±Ўпјљlock"</span><span class="o">);</span>
						<span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
					<span class="o">}</span>
				<span class="o">}</span>
				<span class="n">log</span><span class="o">(</span><span class="s">"зєїзЁ‹з»“жќџ"</span><span class="o">);</span>
			<span class="o">}</span>
		<span class="o">};</span>
		<span class="n">t1</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"t1"</span><span class="o">);</span>
		<span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="c1">//е…€и®©t1йЈћ2з§’</span>
			<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">2000</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e1</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
		<span class="nc">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">()</span> <span class="o">{</span>

			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
				<span class="kt">boolean</span> <span class="n">locked</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
				<span class="k">try</span> <span class="o">{</span>
					<span class="n">log</span><span class="o">(</span><span class="s">"зєїзЁ‹еђЇеЉЁ"</span><span class="o">);</span>
					<span class="n">log</span><span class="o">(</span><span class="s">"иЇ•е›ѕеЌ жњ‰еЇ№и±Ўпјљlock"</span><span class="o">);</span>

					<span class="n">locked</span> <span class="o">=</span> <span class="n">lock</span><span class="o">.</span><span class="na">tryLock</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="nc">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">);</span>
					<span class="k">if</span><span class="o">(</span><span class="n">locked</span><span class="o">){</span>
						<span class="n">log</span><span class="o">(</span><span class="s">"еЌ жњ‰еЇ№и±Ўпјљlock"</span><span class="o">);</span>
						<span class="n">log</span><span class="o">(</span><span class="s">"иї›иЎЊ5з§’зљ„дёљеЉЎж“ЌдЅњ"</span><span class="o">);</span>
						<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
					<span class="o">}</span>
					<span class="k">else</span><span class="o">{</span>
						<span class="n">log</span><span class="o">(</span><span class="s">"з»Џиї‡1з§’й’џзљ„еЉЄеЉ›пјЊиїжІЎжњ‰еЌ жњ‰еЇ№и±ЎпјЊж”ѕејѓеЌ жњ‰"</span><span class="o">);</span>
					<span class="o">}</span>

				<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
					<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
				<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
					
					<span class="k">if</span><span class="o">(</span><span class="n">locked</span><span class="o">){</span>
						<span class="n">log</span><span class="o">(</span><span class="s">"й‡Љж”ѕеЇ№и±Ўпјљlock"</span><span class="o">);</span>
						<span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
					<span class="o">}</span>
				<span class="o">}</span>
				<span class="n">log</span><span class="o">(</span><span class="s">"зєїзЁ‹з»“жќџ"</span><span class="o">);</span>
			<span class="o">}</span>
		<span class="o">};</span>
		<span class="n">t2</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"t2"</span><span class="o">);</span>
		<span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
	<span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/2612.png" alt="" /></p>

<ul>
  <li>дЅїз”Ёsynchronizedж–№ејЏиї›иЎЊзєїзЁ‹дє¤дє’пјЊз”Ёе€°зљ„жЇеђЊж­ҐеЇ№и±Ўзљ„wait,notifyе’ЊnotifyAllж–№жі•</li>
  <li>Lockд№џжЏђдѕ›дє†з±»дјјзљ„и§Је†іеЉћжі•пјЊй¦–е…€йЂљиї‡lockеЇ№и±Ўеѕ—е€°дёЂдёЄConditionеЇ№и±ЎпјЊз„¶еђЋе€†е€«и°ѓз”Ёиї™дёЄConditionеЇ№и±Ўзљ„пјљawait, signal,signalAll ж–№жі•</li>
  <li>жіЁж„Џпјљ дёЌжЇConditionеЇ№и±Ўзљ„wait,nofity,notifyAllж–№жі•,жЇawait,signal,signalAll</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.locks.Condition</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.locks.Lock</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.locks.ReentrantLock</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">now</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">SimpleDateFormat</span><span class="o">(</span><span class="s">"HH:mm:ss"</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">());</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="nc">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%s %s %s %n"</span><span class="o">,</span> <span class="n">now</span><span class="o">()</span> <span class="o">,</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">,</span> <span class="n">msg</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Lock</span> <span class="n">lock</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ReentrantLock</span><span class="o">();</span>
        <span class="nc">Condition</span> <span class="n">condition</span> <span class="o">=</span> <span class="n">lock</span><span class="o">.</span><span class="na">newCondition</span><span class="o">();</span>
        
        <span class="nc">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">()</span> <span class="o">{</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="n">log</span><span class="o">(</span><span class="s">"зєїзЁ‹еђЇеЉЁ"</span><span class="o">);</span>
                    <span class="n">log</span><span class="o">(</span><span class="s">"иЇ•е›ѕеЌ жњ‰еЇ№и±Ўпјљlock"</span><span class="o">);</span>
 
                    <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>
 
                    <span class="n">log</span><span class="o">(</span><span class="s">"еЌ жњ‰еЇ№и±Ўпјљlock"</span><span class="o">);</span>
                    <span class="n">log</span><span class="o">(</span><span class="s">"иї›иЎЊ5з§’зљ„дёљеЉЎж“ЌдЅњ"</span><span class="o">);</span>
                    <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
                    <span class="n">log</span><span class="o">(</span><span class="s">"дёґж—¶й‡Љж”ѕеЇ№и±Ў lockпјЊ е№¶з­‰еѕ…"</span><span class="o">);</span>
                    <span class="n">condition</span><span class="o">.</span><span class="na">await</span><span class="o">();</span>
                    <span class="n">log</span><span class="o">(</span><span class="s">"й‡Ќж–°еЌ жњ‰еЇ№и±Ў lockпјЊе№¶иї›иЎЊ5з§’зљ„дёљеЉЎж“ЌдЅњ"</span><span class="o">);</span>
                    <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
 
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
                    <span class="n">log</span><span class="o">(</span><span class="s">"й‡Љж”ѕеЇ№и±Ўпјљlock"</span><span class="o">);</span>
                    <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="n">log</span><span class="o">(</span><span class="s">"зєїзЁ‹з»“жќџ"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"t1"</span><span class="o">);</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//е…€и®©t1йЈћ2з§’</span>
            <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">2000</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e1</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="nc">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">()</span> <span class="o">{</span>
 
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="n">log</span><span class="o">(</span><span class="s">"зєїзЁ‹еђЇеЉЁ"</span><span class="o">);</span>
                    <span class="n">log</span><span class="o">(</span><span class="s">"иЇ•е›ѕеЌ жњ‰еЇ№и±Ўпјљlock"</span><span class="o">);</span>
 
                    <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>
 
                    <span class="n">log</span><span class="o">(</span><span class="s">"еЌ жњ‰еЇ№и±Ўпјљlock"</span><span class="o">);</span>
                    <span class="n">log</span><span class="o">(</span><span class="s">"иї›иЎЊ5з§’зљ„дёљеЉЎж“ЌдЅњ"</span><span class="o">);</span>
                    <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
                    <span class="n">log</span><span class="o">(</span><span class="s">"е”¤й†’з­‰еѕ…дё­зљ„зєїзЁ‹"</span><span class="o">);</span>
                    <span class="n">condition</span><span class="o">.</span><span class="na">signal</span><span class="o">();</span>
 
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
                    <span class="n">log</span><span class="o">(</span><span class="s">"й‡Љж”ѕеЇ№и±Ўпјљlock"</span><span class="o">);</span>
                    <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="n">log</span><span class="o">(</span><span class="s">"зєїзЁ‹з»“жќџ"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"t2"</span><span class="o">);</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>
 
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/2617.png" alt="" /></p>

<ul>
  <li>LockжЇдёЂдёЄжЋҐеЏЈпјЊиЂЊsynchronizedжЇJavaдё­зљ„е…ій”®е­—пјЊsynchronizedжЇе†…зЅ®зљ„иЇ­иЁЂе®ћзЋ°пјЊLockжЇд»Јз Ѓе±‚йќўзљ„е®ћзЋ°гЂ‚</li>
  <li>LockеЏЇд»ҐйЂ‰ж‹©жЂ§зљ„иЋ·еЏ–й”ЃпјЊе¦‚жћњдёЂж®µж—¶й—ґиЋ·еЏ–дёЌе€°пјЊеЏЇд»Ґж”ѕејѓгЂ‚synchronizedдёЌиЎЊпјЊдјљдёЂж №з­‹дёЂз›ґиЋ·еЏ–дё‹еЋ»гЂ‚ еЂџеЉ©Lockзљ„иї™дёЄз‰№жЂ§пјЊе°±иѓЅе¤џи§„йЃїж­»й”ЃпјЊsynchronizedеї…йЎ»йЂљиї‡и°Ёж…Ће’Њи‰ЇеҐЅзљ„и®ѕи®ЎпјЊж‰ЌиѓЅе‡Џе°‘ж­»й”Ѓзљ„еЏ‘з”џгЂ‚</li>
  <li>synchronizedењЁеЏ‘з”џеј‚еёёе’ЊеђЊж­Ґеќ—з»“жќџзљ„ж—¶еЂ™пјЊдјљи‡ЄеЉЁй‡Љж”ѕй”ЃгЂ‚иЂЊLockеї…йЎ»ж‰‹еЉЁй‡Љж”ѕпјЊ ж‰Ђд»Ґе¦‚жћњеїи®°дє†й‡Љж”ѕй”ЃпјЊдёЂж ·дјљйЂ ж€ђж­»й”ЃгЂ‚</li>
</ul>

<h2 id="еЋџе­ђи®їй—®">еЋџе­ђи®їй—®</h2>

<ul>
  <li>ж‰Ђи°“зљ„еЋџе­ђжЂ§ж“ЌдЅњеЌідёЌеЏЇдё­ж–­зљ„ж“ЌдЅњпјЊжЇ”е¦‚иµ‹еЂјж“ЌдЅњ</li>
  <li>еЋџе­ђжЂ§ж“ЌдЅњжњ¬иє«жЇзєїзЁ‹е®‰е…Ёзљ„</li>
  <li>дЅ†жЇ i++ иї™дёЄиЎЊдёєпјЊдє‹е®ћдёЉжЇжњ‰3дёЄеЋџе­ђжЂ§ж“ЌдЅњз»„ж€ђзљ„гЂ‚
ж­ҐйЄ¤ 1. еЏ– i зљ„еЂј
ж­ҐйЄ¤ 2. i + 1
ж­ҐйЄ¤ 3. жЉЉж–°зљ„еЂјиµ‹дє€i</li>
  <li>иї™дё‰дёЄж­ҐйЄ¤пјЊжЇЏдёЂж­ҐйѓЅжЇдёЂдёЄеЋџе­ђж“ЌдЅњпјЊдЅ†жЇеђ€ењЁдёЂиµ·пјЊе°±дёЌжЇеЋџе­ђж“ЌдЅњгЂ‚е°±дёЌжЇзєїзЁ‹е®‰е…Ёзљ„гЂ‚</li>
  <li>жЌўеЏҐиЇќиЇґпјЊдёЂдёЄзєїзЁ‹ењЁж­ҐйЄ¤1 еЏ–i зљ„еЂјз»“жќџеђЋпјЊиїжІЎжњ‰жќҐеѕ—еЏЉиї›иЎЊж­ҐйЄ¤2пјЊеЏ¦дёЂдёЄзєїзЁ‹д№џеЏЇд»ҐеЏ– iзљ„еЂјдє†гЂ‚</li>
  <li>i++ пјЊiвЂ“пјЊ i = i+1 иї™дє›йѓЅжЇйќћеЋџе­ђжЂ§ж“ЌдЅњгЂ‚</li>
</ul>

<h3 id="atomicinteger">AtomicInteger</h3>

<ul>
  <li>JDK6 д»ҐеђЋпјЊж–°еўћеЉ дє†дёЂдёЄеЊ…java.util.concurrent.atomicпјЊй‡Њйќўжњ‰еђ„з§ЌеЋџе­ђз±»пјЊжЇ”е¦‚AtomicIntegerгЂ‚</li>
  <li>иЂЊAtomicIntegerжЏђдѕ›дє†еђ„з§Ќи‡ЄеўћпјЊи‡Єе‡Џз­‰ж–№жі•пјЊиї™дє›ж–№жі•йѓЅжЇеЋџе­ђжЂ§зљ„гЂ‚</li>
  <li>жЌўеЏҐиЇќиЇґпјЊи‡Єеўћж–№жі• incrementAndGet жЇзєїзЁ‹е®‰е…Ёзљ„пјЊеђЊдёЂдёЄж—¶й—ґпјЊеЏЄжњ‰дёЂдёЄзєїзЁ‹еЏЇд»Ґи°ѓз”Ёиї™дёЄж–№жі•гЂ‚д»Јз ЃжЇ”иѕѓе¤Ќе€¶д»Јз Ѓ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>
  
<span class="kn">import</span> <span class="nn">java.util.concurrent.atomic.AtomicInteger</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
    	<span class="nc">AtomicInteger</span> <span class="n">atomicI</span> <span class="o">=</span><span class="k">new</span> <span class="nc">AtomicInteger</span><span class="o">();</span>
    	<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">atomicI</span><span class="o">.</span><span class="na">decrementAndGet</span><span class="o">();</span>
    	<span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">atomicI</span><span class="o">.</span><span class="na">incrementAndGet</span><span class="o">();</span>
    	<span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">atomicI</span><span class="o">.</span><span class="na">addAndGet</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
    	
    <span class="o">}</span>
  
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>е€†е€«дЅїз”Ёеџєжњ¬еЏй‡Џзљ„йќћеЋџе­ђжЂ§зљ„++иїђз®—з¬¦е’Њ еЋџе­ђжЂ§зљ„AtomicIntegerеЇ№и±Ўзљ„ incrementAndGet жќҐиї›иЎЊе¤љзєїзЁ‹жµ‹иЇ•гЂ‚</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">multiplethread</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent.atomic.AtomicInteger</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestThread</span> <span class="o">{</span>
   
	<span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="nc">AtomicInteger</span> <span class="n">atomicValue</span> <span class="o">=</span><span class="k">new</span> <span class="nc">AtomicInteger</span><span class="o">();</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    	<span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">100000</span><span class="o">;</span>
    	<span class="nc">Thread</span><span class="o">[]</span> <span class="n">ts1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">number</span><span class="o">];</span>
    	<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">number</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    		<span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
    			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
    				<span class="n">value</span><span class="o">++;</span>
    			<span class="o">}</span>
    		<span class="o">};</span>
    		<span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    		<span class="n">ts1</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
		<span class="o">}</span>
    	
    	<span class="c1">//з­‰еѕ…иї™дє›зєїзЁ‹е…ЁйѓЁз»“жќџ</span>
    	<span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">ts1</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">try</span> <span class="o">{</span>
				<span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">// TODO Auto-generated catch block</span>
				<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span>
    	
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%dдёЄзєїзЁ‹иї›иЎЊvalue++еђЋпјЊvalueзљ„еЂјеЏж€ђ:%d%n"</span><span class="o">,</span> <span class="n">number</span><span class="o">,</span><span class="n">value</span><span class="o">);</span>
      	<span class="nc">Thread</span><span class="o">[]</span> <span class="n">ts2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">[</span><span class="n">number</span><span class="o">];</span>
    	<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">number</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    		<span class="nc">Thread</span> <span class="n">t</span> <span class="o">=</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(){</span>
    			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
    				<span class="n">atomicValue</span><span class="o">.</span><span class="na">incrementAndGet</span><span class="o">();</span>
    			<span class="o">}</span>
    		<span class="o">};</span>
    		<span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    		<span class="n">ts2</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
		<span class="o">}</span>
    	
    	<span class="c1">//з­‰еѕ…иї™дє›зєїзЁ‹е…ЁйѓЁз»“жќџ</span>
    	<span class="k">for</span> <span class="o">(</span><span class="nc">Thread</span> <span class="n">t</span> <span class="o">:</span> <span class="n">ts2</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">try</span> <span class="o">{</span>
				<span class="n">t</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">// TODO Auto-generated catch block</span>
				<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%dдёЄзєїзЁ‹иї›иЎЊatomicValue.incrementAndGet();еђЋпјЊatomicValueзљ„еЂјеЏж€ђ:%d%n"</span><span class="o">,</span> <span class="n">number</span><span class="o">,</span><span class="n">atomicValue</span><span class="o">.</span><span class="na">intValue</span><span class="o">());</span>
    <span class="o">}</span>
       
<span class="o">}</span>

</code></pre></div></div>

<p><img src="http://stepimagewm.how2j.cn/2626.png" alt="" /></p>

<p>жњ¬ж–‡еј•з”Ёи‡Єпјљhttp://how2j.cn</p>
:ET