I"<ul id="markdown-toc">
  <li><a href="#插件原理" id="markdown-toc-插件原理">插件原理</a></li>
</ul>
<h3 id="插件原理">插件原理</h3>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">插件原理</span>
	  <span class="err">在四大对象创建的时候</span>
	  <span class="err">1、每个创建出来的对象不是直接返回的，而是</span>
	  		<span class="err">interceptorChain.pluginAll(parameterHandler);</span>
	  <span class="err">2、获取到所有的Interceptor（拦截器）（插件需要实现的接口）；</span>
	  		<span class="err">调用interceptor.plugin(target);返回target包装后的对象</span>
	  <span class="err">3、插件机制，我们可以使用插件为目标对象创建一个代理对象；AOP（面向切面）</span>
	  		<span class="err">我们的插件可以为四大对象创建出代理对象；</span>
	  		<span class="err">代理对象就可以拦截到四大对象的每一个执行；</span>
	  
		<span class="err">public</span> <span class="err">Object</span> <span class="err">pluginAll(Object</span> <span class="err">target)</span> <span class="err">{</span>
		    <span class="err">for</span> <span class="err">(Interceptor</span> <span class="py">interceptor</span> <span class="p">:</span> <span class="s">interceptors) {</span>
		      <span class="py">target</span> <span class="p">=</span> <span class="s">interceptor.plugin(target);</span>
		    <span class="err">}</span>
		    <span class="err">return</span> <span class="err">target;</span>
		  <span class="err">}</span>
		

	 <span class="err">*</span> <span class="err">插件编写：</span>
	 <span class="err">*</span> <span class="err">1、编写Interceptor的实现类</span>
	 <span class="err">*</span> <span class="err">2、使用@Intercepts注解完成插件签名</span>
	 <span class="err">*</span> <span class="err">3、将写好的插件注册到全局配置文件中</span>
</code></pre></div></div>
:ET