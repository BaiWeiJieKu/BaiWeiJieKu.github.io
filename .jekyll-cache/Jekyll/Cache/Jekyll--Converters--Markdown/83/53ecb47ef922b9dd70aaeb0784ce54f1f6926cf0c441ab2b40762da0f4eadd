I"%ğ<ul id="markdown-toc">
  <li><a href="#ç®€ä»‹" id="markdown-toc-ç®€ä»‹">ç®€ä»‹</a></li>
  <li><a href="#configuration" id="markdown-toc-configuration">@Configuration</a>    <ul>
      <li><a href="#ä¾èµ–" id="markdown-toc-ä¾èµ–">ä¾èµ–</a></li>
      <li><a href="#æ³¨è§£æ–¹å¼" id="markdown-toc-æ³¨è§£æ–¹å¼">æ³¨è§£æ–¹å¼</a></li>
    </ul>
  </li>
  <li><a href="#componentscan" id="markdown-toc-componentscan">@ComponentScan</a>    <ul>
      <li><a href="#è‡ªå®šä¹‰è¿‡æ»¤" id="markdown-toc-è‡ªå®šä¹‰è¿‡æ»¤">è‡ªå®šä¹‰è¿‡æ»¤</a></li>
    </ul>
  </li>
  <li><a href="#ç»„ä»¶ä½œç”¨åŸŸ" id="markdown-toc-ç»„ä»¶ä½œç”¨åŸŸ">ç»„ä»¶ä½œç”¨åŸŸ</a>    <ul>
      <li><a href="#å¤šå®ä¾‹" id="markdown-toc-å¤šå®ä¾‹">å¤šå®ä¾‹</a></li>
      <li><a href="#å•ä¾‹" id="markdown-toc-å•ä¾‹">å•ä¾‹</a></li>
    </ul>
  </li>
</ul>
<h3 id="ç®€ä»‹">ç®€ä»‹</h3>

<ul>
  <li>ç„¶è€Œåœ¨Springbootå’ŒSpringCloudå…´èµ·ä¹‹åï¼Œå­¦ä¹ Springçš„æ³¨è§£é©±åŠ¨åŠå…¶åŸç†é‚£å°†ä¼šæ˜¯éå¸¸æœ‰å¿…è¦çš„äº†ï¼›</li>
  <li>å› ä¸ºåœ¨Springbootå’ŒSpringCloudé‡Œé¢ä¼šä½¿ç”¨åˆ°å¤§é‡çš„æ³¨è§£æ¥è¿›è¡Œé…ç½®</li>
</ul>

<h3 id="configuration">@Configuration</h3>

<ul>
  <li>ç»™å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶</li>
</ul>

<h4 id="ä¾èµ–">ä¾èµ–</h4>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

    <span class="nt">&lt;groupId&gt;</span>com.ldc<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-annotation<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>

    <span class="nt">&lt;dependencies&gt;</span>
        <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-context<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>4.3.12.RELEASE<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>

<span class="nt">&lt;/project&gt;</span>

</code></pre></div></div>

<h4 id="æ³¨è§£æ–¹å¼">æ³¨è§£æ–¹å¼</h4>

<ul>
  <li>é¦–å…ˆæˆ‘ä»¬å…ˆå†™ä¸€ä¸ªé…ç½®ç±»ï¼šç­‰åŒäºxmlé…ç½®æ–‡ä»¶</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * @Description é…ç½®ç±»å°±ç­‰åŒä»¥å‰çš„é…ç½®æ–‡ä»¶
 */</span>
<span class="nd">@Configuration</span> <span class="c1">//å‘Šè¯‰Springè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig</span> <span class="o">{</span>

    <span class="c1">//ç›¸å½“äºxmlé…ç½®æ–‡ä»¶ä¸­çš„&lt;bean&gt;æ ‡ç­¾ï¼Œå‘Šè¯‰å®¹å™¨æ³¨å†Œä¸€ä¸ªbean</span>
    <span class="c1">//ä¹‹å‰xmlæ–‡ä»¶ä¸­&lt;bean&gt;æ ‡ç­¾æœ‰beançš„classç±»å‹ï¼Œé‚£ä¹ˆç°åœ¨æ³¨è§£æ–¹å¼çš„ç±»å‹å½“ç„¶ä¹Ÿå°±æ˜¯è¿”å›å€¼çš„ç±»å‹</span>
    <span class="c1">//ä¹‹å‰xmlæ–‡ä»¶ä¸­&lt;bean&gt;æ ‡ç­¾æœ‰beançš„idï¼Œç°åœ¨æ³¨è§£çš„æ–¹å¼é»˜è®¤ç”¨çš„æ˜¯æ–¹æ³•åæ¥ä½œä¸ºbeançš„id</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"lisi"</span><span class="o">,</span><span class="mi">20</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span><span class="n">args</span><span class="o">){</span>
        <span class="cm">/**
         * è¿™é‡Œæ˜¯newäº†ä¸€ä¸ªAnnotationConfigApplicationContextå¯¹è±¡ï¼Œä»¥å‰newçš„ClassPathXmlApplicationContextå¯¹è±¡
         * çš„æ„é€ å‡½æ•°é‡Œé¢ä¼ çš„æ˜¯é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œè€Œç°åœ¨AnnotationConfigApplicationContextå¯¹è±¡çš„æ„é€ å‡½æ•°é‡Œé¢ä¼ çš„æ˜¯
         * é…ç½®ç±»çš„ç±»å‹
         */</span>
        <span class="nc">ApplicationContext</span> <span class="n">applicationContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="nc">MainConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="nc">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="n">applicationContext</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">person</span><span class="o">);</span>
        
         <span class="c1">//æˆ‘ä»¬å¯ä»¥æ¥è·å–beançš„å®šä¹‰ä¿¡æ¯</span>
        <span class="nc">String</span><span class="o">[]</span> <span class="n">namesForType</span> <span class="o">=</span> <span class="n">applicationContext</span><span class="o">.</span><span class="na">getBeanNamesForType</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">namesForType</span><span class="o">)</span> <span class="o">{</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span> <span class="o">}</span>

    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//Person{name=â€˜lisiâ€™, age=20}</span>
<span class="c1">//person</span>
</code></pre></div></div>

<ul>
  <li><strong>Springæ³¨è§£çš„æ–¹å¼é»˜è®¤æ˜¯ä»¥é…ç½®çš„æ–¹æ³•åæ¥ä½œä¸ºè¿™ä¸ªbeançš„é»˜è®¤idï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³è¦æ–¹æ³•åæ¥ä½œä¸ºbeançš„idï¼Œæˆ‘ä»¬å¯ä»¥åœ¨@Beanè¿™ä¸ªæ³¨è§£çš„valueå±æ€§æ¥è¿›è¡ŒæŒ‡å®š</strong></li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span> <span class="c1">//å‘Šè¯‰Springè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig</span> <span class="o">{</span>

    <span class="c1">//ç›¸å½“äºxmlé…ç½®æ–‡ä»¶ä¸­çš„&lt;bean&gt;æ ‡ç­¾ï¼Œå‘Šè¯‰å®¹å™¨æ³¨å†Œä¸€ä¸ªbean</span>
    <span class="c1">//ä¹‹å‰xmlæ–‡ä»¶ä¸­&lt;bean&gt;æ ‡ç­¾æœ‰beançš„classç±»å‹ï¼Œé‚£ä¹ˆç°åœ¨æ³¨è§£æ–¹å¼çš„ç±»å‹å½“ç„¶ä¹Ÿå°±æ˜¯è¿”å›å€¼çš„ç±»å‹</span>
    <span class="c1">//ä¹‹å‰xmlæ–‡ä»¶ä¸­&lt;bean&gt;æ ‡ç­¾æœ‰beançš„idï¼Œç°åœ¨æ³¨è§£çš„æ–¹å¼é»˜è®¤ç”¨çš„æ˜¯æ–¹æ³•åæ¥ä½œä¸ºbeançš„id</span>
    <span class="nd">@Bean</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"person"</span><span class="o">)</span><span class="c1">//é€šè¿‡è¿™ä¸ªvalueå±æ€§å¯ä»¥æŒ‡å®šbeanåœ¨IOCå®¹å™¨çš„id</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person01</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"lisi"</span><span class="o">,</span><span class="mi">20</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<h3 id="componentscan">@ComponentScan</h3>

<ul>
  <li>
    <p>è‡ªåŠ¨æ‰«æç»„ä»¶&amp;æŒ‡å®šæ‰«æè§„åˆ™</p>
  </li>
  <li>
    <p>xmlæ ¼å¼</p>
  </li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c">&lt;!-- åŒ…æ‰«æã€åªè¦æ ‡æ³¨äº†@Controllerã€@Serviceã€@Repositoryï¼Œ@Component --&gt;</span>
    <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">"com.ldc"</span><span class="nt">/&gt;</span>

</code></pre></div></div>

<ul>
  <li>é…ç½®ç±»å½¢å¼</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * @Description é…ç½®ç±»å°±ç­‰åŒä»¥å‰çš„é…ç½®æ–‡ä»¶
 */</span>
<span class="nd">@Configuration</span> <span class="c1">//å‘Šè¯‰Springè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"com.ldc"</span><span class="o">)</span><span class="c1">//ç›¸å½“äºæ˜¯xmlé…ç½®æ–‡ä»¶é‡Œé¢çš„&lt;context:component-scan base-package="com.ldc"/&gt;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig</span> <span class="o">{</span>

    <span class="c1">//ç›¸å½“äºxmlé…ç½®æ–‡ä»¶ä¸­çš„&lt;bean&gt;æ ‡ç­¾ï¼Œå‘Šè¯‰å®¹å™¨æ³¨å†Œä¸€ä¸ªbean</span>
    <span class="c1">//ä¹‹å‰xmlæ–‡ä»¶ä¸­&lt;bean&gt;æ ‡ç­¾æœ‰beançš„classç±»å‹ï¼Œé‚£ä¹ˆç°åœ¨æ³¨è§£æ–¹å¼çš„ç±»å‹å½“ç„¶ä¹Ÿå°±æ˜¯è¿”å›å€¼çš„ç±»å‹</span>
    <span class="c1">//ä¹‹å‰xmlæ–‡ä»¶ä¸­&lt;bean&gt;æ ‡ç­¾æœ‰beançš„idï¼Œç°åœ¨æ³¨è§£çš„æ–¹å¼é»˜è®¤ç”¨çš„æ˜¯æ–¹æ³•åæ¥ä½œä¸ºbeançš„id</span>
    <span class="nd">@Bean</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"person"</span><span class="o">)</span><span class="c1">//é€šè¿‡è¿™ä¸ªvalueå±æ€§å¯ä»¥æŒ‡å®šbeanåœ¨IOCå®¹å™¨çš„id</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person01</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"lisi"</span><span class="o">,</span><span class="mi">20</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>æˆ‘ä»¬åˆ›å»ºBookControllerã€BookServiceã€BookDaoè¿™å‡ ä¸ªç±»ï¼Œåˆ†åˆ«æ·»åŠ äº†<code class="language-plaintext highlighter-rouge">@Controller</code>ã€<code class="language-plaintext highlighter-rouge">@Service</code>ã€<code class="language-plaintext highlighter-rouge">@Repository</code>æ³¨è§£</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookController</span> <span class="o">{</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookService</span> <span class="o">{</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookDao</span> <span class="o">{</span>
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>æµ‹è¯•</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test01</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ApplicationContext</span> <span class="n">applicationContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="nc">MainConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="nc">String</span><span class="o">[]</span> <span class="n">definitionNames</span> <span class="o">=</span> <span class="n">applicationContext</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">definitionNames</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

</code></pre></div></div>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">é™¤å¼€IOCå®¹å™¨è‡ªå·±è¦è£…é…çš„ä¸€äº›ç»„ä»¶å¤–ï¼Œè¿˜æœ‰æ˜¯æˆ‘ä»¬è‡ªå·±è£…é…çš„ç»„ä»¶</span>

<span class="err">å†…éƒ¨æ³¨è§£é…ç½®å¤„ç†å™¨ï¼š</span>
<span class="err">org.springframework.context.annotation.internalConfigurationAnnotationProcessor</span>
<span class="err">å†…éƒ¨è‡ªåŠ¨è£…é…æ³¨è§£å¤„ç†å™¨ï¼š</span>
<span class="err">org.springframework.context.annotation.internalAutowiredAnnotationProcessor</span>
<span class="err">å†…éƒ¨å¿…è¦æ³¨è§£å¤„ç†å™¨</span>
<span class="err">org.springframework.context.annotation.internalRequiredAnnotationProcessor</span>
<span class="err">å†…éƒ¨å…¬å…±æ³¨è§£å¤„ç†å™¨</span>
<span class="err">org.springframework.context.annotation.internalCommonAnnotationProcessor</span>
<span class="err">å†…éƒ¨äº‹ä»¶ç›‘å¬å¤„ç†å™¨</span>
<span class="err">org.springframework.context.event.internalEventListenerProcessor</span>
<span class="err">å†…éƒ¨äº‹ä»¶ç›‘å¬å·¥å‚</span>
<span class="err">org.springframework.context.event.internalEventListenerFactory</span>

<span class="err">ä¸»é…ç½®ç±»</span> <span class="err">MainConfig</span> <span class="err">ä¹Ÿæ˜¯IOCå®¹å™¨é‡Œé¢çš„ç»„ä»¶ï¼Œä¹Ÿè¢«çº³å…¥äº†IOCå®¹å™¨çš„ç®¡ç†</span>
<span class="err">mainConfig</span>
<span class="err">bookController</span>
<span class="err">bookDao</span>
<span class="err">bookService</span>
<span class="err">person</span>

</code></pre></div></div>

<ul>
  <li>æˆ‘ä»¬ä»<code class="language-plaintext highlighter-rouge">@Configuration</code> è¿™ä¸ªæ³¨è§£ç‚¹è¿›å»å°±å¯ä»¥å‘ç°è¿™ä¸ªæ³¨è§£ä¸Šä¹Ÿæ ‡æ³¨äº† <code class="language-plaintext highlighter-rouge">@Component</code> çš„è¿™ä¸ªæ³¨è§£ï¼Œä¹Ÿçº³å…¥åˆ°IOCå®¹å™¨ä¸­ä½œä¸ºä¸€ä¸ªç»„ä»¶ï¼š</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Documented</span>
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">Configuration</span> <span class="o">{</span>

	<span class="cm">/**
	 * Explicitly specify the name of the Spring bean definition associated
	 * with this Configuration class. If left unspecified (the common case),
	 * a bean name will be automatically generated.
	 * &lt;p&gt;The custom name applies only if the Configuration class is picked up via
	 * component scanning or supplied directly to a {@link AnnotationConfigApplicationContext}.
	 * If the Configuration class is registered as a traditional XML bean definition,
	 * the name/id of the bean element will take precedence.
	 * @return the specified bean name, if any
	 * @see org.springframework.beans.factory.support.DefaultBeanNameGenerator
	 */</span>
	<span class="nc">String</span> <span class="nf">value</span><span class="o">()</span> <span class="k">default</span> <span class="s">""</span><span class="o">;</span>

<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>æˆ‘ä»¬åœ¨ <code class="language-plaintext highlighter-rouge">@ComponentScan</code> è¿™ä¸ªæ³¨è§£ä¸Šï¼Œä¹Ÿæ˜¯å¯ä»¥æŒ‡å®šè¦æ’é™¤å“ªäº›åŒ…æˆ–è€…æ˜¯åªåŒ…å«å“ªäº›åŒ…æ¥è¿›è¡Œç®¡ç†ï¼šé‡Œé¢ä¼ æ˜¯ä¸€ä¸ªFilter[]æ•°ç»„</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"com.ldc"</span><span class="o">,</span><span class="n">excludeFilters</span> <span class="o">=</span> <span class="o">{</span>
        <span class="c1">//è¿™é‡Œé¢æ˜¯ä¸€ä¸ª@Filteræ³¨è§£æ•°ç»„ï¼ŒFilterType.ANNOTATIONè¡¨ç¤ºçš„æ’é™¤çš„è§„åˆ™ ï¼šæŒ‰ç…§æ³¨è§£çš„æ–¹å¼æ¥è¿›è¡Œæ’é™¤</span>
        <span class="c1">//classes = {Controller.class,Service.class}è¡¨ç¤ºçš„æ˜¯æ ‡æœ‰è¿™äº›æ³¨è§£çš„ç±»ç»™æ’é™¤æ‰</span>
        <span class="nd">@Filter</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">ANNOTATION</span><span class="o">,</span><span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="nc">Controller</span><span class="o">.</span><span class="na">class</span><span class="o">,</span><span class="nc">Service</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"person"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person01</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"lisi"</span><span class="o">,</span><span class="mi">20</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">è¿™ä¸ªæ—¶å€™çš„æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼šè¿™ä¸ªæ—¶å€™ï¼ŒbookServiceã€bookControllerè¿™ä¸¤ä¸ªç»„ä»¶å°±å·²ç»è¢«æ’é™¤æ‰äº†ï¼Œä¸å†è¢«IOCå®¹å™¨ç»™ç®¡ç†ï¼š</span>

<span class="err">org.springframework.context.annotation.internalConfigurationAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalAutowiredAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalRequiredAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalCommonAnnotationProcessor</span>
<span class="err">org.springframework.context.event.internalEventListenerProcessor</span>
<span class="err">org.springframework.context.event.internalEventListenerFactory</span>
<span class="err">mainConfig</span>
<span class="err">bookDao</span>
<span class="err">person</span>

</code></pre></div></div>

<ul>
  <li>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ¥é…ç½®<strong>includeFilters</strong>ï¼šæŒ‡å®šåœ¨æ‰«æçš„æ—¶å€™ï¼Œåªéœ€è¦åŒ…å«å“ªäº›ç»„ä»¶</li>
  <li>åœ¨ç”¨xmlæ–‡ä»¶é…ç½®çš„æ–¹å¼æ¥è¿›è¡Œé…ç½®çš„æ—¶å€™ï¼Œè¿˜è¦ç¦ç”¨æ‰é»˜è®¤çš„é…ç½®è§„åˆ™ï¼ŒåªåŒ…å«å“ªäº›ç»„ä»¶çš„é…ç½®æ‰èƒ½ç”Ÿæ•ˆ</li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">â€œcom.ldcâ€</span> <span class="na">use-default-filters=</span><span class="s">â€œfalseâ€/</span><span class="nt">&gt;</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="c1">//excludeFilters = Filter[];æŒ‡å®šåœ¨æ‰«æçš„æ—¶å€™æŒ‰ç…§ä»€ä¹ˆè§„åˆ™æ¥æ’é™¤è„‘å“ªäº›ç»„ä»¶</span>
<span class="c1">//includeFilters = Filter[];æŒ‡å®šåœ¨æ‰«æçš„æ—¶å€™ï¼Œåªéœ€è¦åŒ…å«å“ªäº›ç»„ä»¶</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"com.ldc"</span><span class="o">,</span><span class="n">includeFilters</span> <span class="o">=</span> <span class="o">{</span>
        <span class="c1">//è¿™é‡Œé¢æ˜¯ä¸€ä¸ª@Filteræ³¨è§£æ•°ç»„ï¼ŒFilterType.ANNOTATIONè¡¨ç¤ºçš„æ’é™¤çš„è§„åˆ™ ï¼šæŒ‰ç…§æ³¨è§£çš„æ–¹å¼æ¥è¿›è¡Œæ’é™¤</span>
        <span class="c1">//classes = {Controller.class}è¡¨ç¤ºçš„æ˜¯æ ‡æœ‰è¿™äº›æ³¨è§£çš„ç±»ç»™çº³å…¥åˆ°IOCå®¹å™¨ä¸­</span>
        <span class="nd">@Filter</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">ANNOTATION</span><span class="o">,</span> <span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="nc">Controller</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="o">},</span><span class="n">useDefaultFilters</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"person"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person01</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"lisi"</span><span class="o">,</span><span class="mi">20</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">è¿™ä¸ªæ—¶å€™ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼šè¿™ä¸ªæ—¶å€™æ˜¯æŒ‰ç…§æ ‡æœ‰æ³¨è§£æ¥è¿›è¡ŒåŒ…å«çš„ï¼Œç°åœ¨å°±åªæœ‰ä¸€ä¸ªbookControllerè¢«çº³å…¥åˆ°IOCå®¹å™¨è¿›è¡Œç®¡ç†</span>

<span class="err">org.springframework.context.annotation.internalConfigurationAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalAutowiredAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalRequiredAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalCommonAnnotationProcessor</span>
<span class="err">org.springframework.context.event.internalEventListenerProcessor</span>
<span class="err">org.springframework.context.event.internalEventListenerFactory</span>
<span class="err">mainConfig</span>
<span class="err">bookController</span>
<span class="err">person</span>

</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@ComponentScan</code>è¿™ä¸ªæ³¨è§£æ˜¯å¯ä»¥é‡å¤å®šä¹‰çš„ï¼šæ¥æŒ‡å®šä¸åŒçš„æ‰«æç­–ç•¥</li>
  <li>æˆ‘ä»¬è¿˜å¯ä»¥ç”¨ <code class="language-plaintext highlighter-rouge">@ComponentScans</code>æ¥å®šä¹‰å¤šä¸ªæ‰«æè§„åˆ™ï¼šé‡Œé¢æ˜¯<code class="language-plaintext highlighter-rouge">@ComponentScan</code>è§„åˆ™çš„æ•°ç»„</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="c1">//excludeFilters = Filter[];æŒ‡å®šåœ¨æ‰«æçš„æ—¶å€™æŒ‰ç…§ä»€ä¹ˆè§„åˆ™æ¥æ’é™¤è„‘å“ªäº›ç»„ä»¶</span>
<span class="c1">//includeFilters = Filter[];æŒ‡å®šåœ¨æ‰«æçš„æ—¶å€™ï¼Œåªéœ€è¦åŒ…å«å“ªäº›ç»„ä»¶</span>
<span class="nd">@ComponentScans</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>
    <span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"com.ldc"</span><span class="o">,</span><span class="n">includeFilters</span> <span class="o">=</span> <span class="o">{</span>
            <span class="c1">//è¿™é‡Œé¢æ˜¯ä¸€ä¸ª@Filteræ³¨è§£æ•°ç»„ï¼ŒFilterType.ANNOTATIONè¡¨ç¤ºçš„æ’é™¤çš„è§„åˆ™ ï¼šæŒ‰ç…§æ³¨è§£çš„æ–¹å¼æ¥è¿›è¡Œæ’é™¤</span>
            <span class="c1">//classes = {Controller.class}è¡¨ç¤ºçš„æ˜¯æ ‡æœ‰è¿™äº›æ³¨è§£çš„ç±»ç»™çº³å…¥åˆ°IOCå®¹å™¨ä¸­</span>
            <span class="nd">@Filter</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">ANNOTATION</span><span class="o">,</span> <span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="nc">Controller</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
    <span class="o">},</span><span class="n">useDefaultFilters</span> <span class="o">=</span> <span class="kc">false</span><span class="o">),</span>
    <span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"com.ldc"</span><span class="o">)</span>
<span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"person"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person01</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"lisi"</span><span class="o">,</span><span class="mi">20</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>ä¹Ÿå¯ä»¥ç›´æ¥è¿™æ ·æ¥é…ç½®å¤šä¸ª<code class="language-plaintext highlighter-rouge">@ComponentScan</code>æ³¨è§£ï¼š<strong>ä½†æ˜¯è¿™æ ·å†™çš„è¯ï¼Œå°±å¿…é¡»è¦java8åŠä»¥ä¸Šçš„æ”¯æŒ</strong></li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="c1">//excludeFilters = Filter[];æŒ‡å®šåœ¨æ‰«æçš„æ—¶å€™æŒ‰ç…§ä»€ä¹ˆè§„åˆ™æ¥æ’é™¤è„‘å“ªäº›ç»„ä»¶</span>
<span class="c1">//includeFilters = Filter[];æŒ‡å®šåœ¨æ‰«æçš„æ—¶å€™ï¼Œåªéœ€è¦åŒ…å«å“ªäº›ç»„ä»¶</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"com.ldc"</span><span class="o">,</span><span class="n">includeFilters</span> <span class="o">=</span> <span class="o">{</span>
        <span class="c1">//è¿™é‡Œé¢æ˜¯ä¸€ä¸ª@Filteræ³¨è§£æ•°ç»„ï¼ŒFilterType.ANNOTATIONè¡¨ç¤ºçš„æ’é™¤çš„è§„åˆ™ ï¼šæŒ‰ç…§æ³¨è§£çš„æ–¹å¼æ¥è¿›è¡ŒåŒ¹é…</span>
        <span class="c1">//classes = {Controller.class}è¡¨ç¤ºçš„æ˜¯æ ‡æœ‰è¿™äº›æ³¨è§£çš„ç±»ç»™çº³å…¥åˆ°IOCå®¹å™¨ä¸­</span>
        <span class="nd">@Filter</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">ANNOTATION</span><span class="o">,</span> <span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="nc">Controller</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="o">},</span><span class="n">useDefaultFilters</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>

<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"com.ldc"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"person"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person01</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"lisi"</span><span class="o">,</span><span class="mi">20</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<h4 id="è‡ªå®šä¹‰è¿‡æ»¤">è‡ªå®šä¹‰è¿‡æ»¤</h4>

<ul>
  <li>
    <p>ç»„ä»¶æ³¨å†Œ-è‡ªå®šä¹‰TypeFilteræŒ‡å®šè¿‡æ»¤è§„åˆ™</p>
  </li>
  <li>
    <p>æ‰€æœ‰æ”¯æŒçš„è¿‡æ»¤è§„åˆ™å¦‚ä¸‹</p>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">FilterType</span> <span class="o">{</span>

	<span class="cm">/**æŒ‰ç…§æ³¨è§£æ¥è¿›è¡ŒåŒ¹é…
	 * Filter candidates marked with a given annotation.
	 * @see org.springframework.core.type.filter.AnnotationTypeFilter
	 */</span>
	<span class="no">ANNOTATION</span><span class="o">,</span>

	<span class="cm">/**æŒ‰ç…§ç»™å®šçš„ç±»å‹æ¥è¿›è¡ŒåŒ¹é…
	 * Filter candidates assignable to a given type.
	 * @see org.springframework.core.type.filter.AssignableTypeFilter
	 */</span>
	<span class="no">ASSIGNABLE_TYPE</span><span class="o">,</span>

	<span class="cm">/**æŒ‰ç…§è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ï¼Œä¸å¸¸ç”¨
	 * Filter candidates matching a given AspectJ type pattern expression.
	 * @see org.springframework.core.type.filter.AspectJTypeFilter
	 */</span>
	<span class="no">ASPECTJ</span><span class="o">,</span>

	<span class="cm">/**æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œä¸å¸¸ç”¨
	 * Filter candidates matching a given regex pattern.
	 * @see org.springframework.core.type.filter.RegexPatternTypeFilter
	 */</span>
	<span class="no">REGEX</span><span class="o">,</span>

	<span class="cm">/** Filter candidates using a given customè‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™
	 * {@link org.springframework.core.type.filter.TypeFilter} implementation.
	 */</span>
	<span class="no">CUSTOM</span>

<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>å‰ä¸¤ç§æ˜¯æœ€å¸¸ç”¨çš„åŒ¹é…è§„åˆ™</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="c1">//excludeFilters = Filter[];æŒ‡å®šåœ¨æ‰«æçš„æ—¶å€™æŒ‰ç…§ä»€ä¹ˆè§„åˆ™æ¥æ’é™¤è„‘å“ªäº›ç»„ä»¶</span>
<span class="c1">//includeFilters = Filter[];æŒ‡å®šåœ¨æ‰«æçš„æ—¶å€™ï¼Œåªéœ€è¦åŒ…å«å“ªäº›ç»„ä»¶</span>
<span class="nd">@ComponentScans</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>
        <span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"com.ldc"</span><span class="o">,</span><span class="n">includeFilters</span> <span class="o">=</span> <span class="o">{</span>
                <span class="c1">//è¿™é‡Œé¢æ˜¯ä¸€ä¸ª@Filteræ³¨è§£æ•°ç»„ï¼ŒFilterType.ANNOTATIONè¡¨ç¤ºçš„æ’é™¤çš„è§„åˆ™ ï¼šæŒ‰ç…§æ³¨è§£çš„æ–¹å¼æ¥è¿›è¡ŒåŒ¹é…</span>
                <span class="c1">//classes = {Controller.class}è¡¨ç¤ºçš„æ˜¯æ ‡æœ‰è¿™äº›æ³¨è§£çš„ç±»ç»™çº³å…¥åˆ°IOCå®¹å™¨ä¸­</span>

                <span class="c1">// FilterType.ANNOTATION æŒ‰ç…§æ³¨è§£æ¥è¿›è¡ŒåŒ¹é…</span>
                <span class="c1">// FilterType.ASSIGNABLE_TYPE æŒ‰ç…§ç»™å®šçš„ç±»å‹æ¥è¿›è¡ŒåŒ¹é…</span>
                <span class="nd">@Filter</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">ANNOTATION</span><span class="o">,</span> <span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="nc">Controller</span><span class="o">.</span><span class="na">class</span><span class="o">}),</span>
                <span class="c1">//æŒ‰ç…§ç»™å®šçš„ç±»å‹æ¥è¿›è¡ŒåŒ¹é…</span>
                <span class="nd">@Filter</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">ASSIGNABLE_TYPE</span><span class="o">,</span> <span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="nc">BookService</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
        <span class="o">},</span><span class="n">useDefaultFilters</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
<span class="o">})</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"person"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person01</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"lisi"</span><span class="o">,</span><span class="mi">20</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">org.springframework.context.annotation.internalConfigurationAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalAutowiredAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalRequiredAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalCommonAnnotationProcessor</span>
<span class="err">org.springframework.context.event.internalEventListenerProcessor</span>
<span class="err">org.springframework.context.event.internalEventListenerFactory</span>
<span class="err">mainConfig</span>
<span class="err">bookController</span>
<span class="err">bookService</span>
<span class="err">person</span>
</code></pre></div></div>

<ul>
  <li>è‡ªå®šä¹‰åŒ¹é…è§„åˆ™<code class="language-plaintext highlighter-rouge">FilterType.CUSTOM</code></li>
  <li>è‡ªå·±æ¥å†™ä¸€ä¸ªåŒ¹é…è§„åˆ™çš„ç±»ï¼šMyTypeFilterï¼Œè¿™ä¸ªç±»è¦å®ç°TypeFilterè¿™ä¸ªæ¥å£</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyTypeFilter</span> <span class="kd">implements</span> <span class="nc">TypeFilter</span> <span class="o">{</span>
    <span class="cm">/**
     *
     * @param metadataReader  the metadata reader for the target class è¯»å–åˆ°å½“å‰æ­£åœ¨æ‰«æçš„ç±»çš„ä¿¡æ¯
     * @param metadataReaderFactory a factory for obtaining metadata readers å¯ä»¥è·å–åˆ°å…¶ä»–ä»»ä½•ç±»çš„ä¿¡æ¯
     * @return
     * @throws IOException
     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">match</span><span class="o">(</span><span class="nc">MetadataReader</span> <span class="n">metadataReader</span><span class="o">,</span> <span class="nc">MetadataReaderFactory</span> <span class="n">metadataReaderFactory</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="c1">//è·å–åˆ°å½“å‰ç±»æ³¨è§£çš„ä¿¡æ¯</span>
        <span class="nc">AnnotationMetadata</span> <span class="n">annotationMetadata</span> <span class="o">=</span> <span class="n">metadataReader</span><span class="o">.</span><span class="na">getAnnotationMetadata</span><span class="o">();</span>
        <span class="c1">//è·å–å½“å‰ç±»çš„èµ„æºçš„ä¿¡æ¯ï¼ˆæ¯”å¦‚ç±»çš„è·¯å¾„ï¼‰</span>
        <span class="nc">Resource</span> <span class="n">resource</span> <span class="o">=</span> <span class="n">metadataReader</span><span class="o">.</span><span class="na">getResource</span><span class="o">();</span>

        <span class="c1">//è·å–åˆ°å½“å‰æ­£åœ¨æ‰«æçš„ç±»çš„ä¿¡æ¯</span>
        <span class="nc">ClassMetadata</span> <span class="n">classMetadata</span> <span class="o">=</span> <span class="n">metadataReader</span><span class="o">.</span><span class="na">getClassMetadata</span><span class="o">();</span>
        <span class="nc">String</span> <span class="n">className</span> <span class="o">=</span> <span class="n">classMetadata</span><span class="o">.</span><span class="na">getClassName</span><span class="o">();</span>
        <span class="c1">//è·å–åŒ…æ‰«æè·¯å¾„ä¸‹çš„æ‰€æœ‰ç±»å</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"é€šè¿‡è‡ªå®šä¹‰çš„åŒ¹é…è§„åˆ™---&gt;"</span><span class="o">+</span><span class="n">className</span><span class="o">);</span>
		<span class="c1">//è®©ç±»åé‡ŒåŒ…å«erå­—æ¯çš„ç±»è¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">className</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"er"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="nd">@ComponentScans</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>
        <span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"com.ldc"</span><span class="o">,</span><span class="n">includeFilters</span> <span class="o">=</span> <span class="o">{</span>
                <span class="nd">@Filter</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">CUSTOM</span><span class="o">,</span> <span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="nc">MyTypeFilter</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
        <span class="o">},</span><span class="n">useDefaultFilters</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
<span class="o">})</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"person"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person01</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">"lisi"</span><span class="o">,</span><span class="mi">20</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">é€šè¿‡è‡ªå®šä¹‰çš„åŒ¹é…è§„åˆ™â€”&gt;com.ldc.test.IOCTest</span>
<span class="err">é€šè¿‡è‡ªå®šä¹‰çš„åŒ¹é…è§„åˆ™â€”&gt;com.ldc.bean.Person</span>
<span class="err">é€šè¿‡è‡ªå®šä¹‰çš„åŒ¹é…è§„åˆ™â€”&gt;com.ldc.config.MyTypeFilter</span>
<span class="err">é€šè¿‡è‡ªå®šä¹‰çš„åŒ¹é…è§„åˆ™â€”&gt;com.ldc.controller.BookController</span>
<span class="err">é€šè¿‡è‡ªå®šä¹‰çš„åŒ¹é…è§„åˆ™â€”&gt;com.ldc.dao.BookDao</span>
<span class="err">é€šè¿‡è‡ªå®šä¹‰çš„åŒ¹é…è§„åˆ™â€”&gt;com.ldc.MainTest</span>
<span class="err">é€šè¿‡è‡ªå®šä¹‰çš„åŒ¹é…è§„åˆ™â€”&gt;com.ldc.service.BookService</span>
<span class="err">org.springframework.context.annotation.internalConfigurationAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalAutowiredAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalRequiredAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalCommonAnnotationProcessor</span>
<span class="err">org.springframework.context.event.internalEventListenerProcessor</span>
<span class="err">org.springframework.context.event.internalEventListenerFactory</span>
<span class="err">mainConfig</span>
<span class="err">person</span>
<span class="err">myTypeFilter</span>
<span class="err">bookController</span>
<span class="err">bookService</span>

<span class="err">è¿™ä¸ªæ—¶å€™ï¼ŒåŒ…å«â€œerâ€çš„ç»„ä»¶å°±ç»™æ·»åŠ åˆ°äº†IOCå®¹å™¨ä¸­äº†ï¼›åªè¦åœ¨åŒ…æ‰«æé‡Œé¢çš„åŒ…é‡Œé¢çš„æ¯ä¸€ä¸ªç±»éƒ½ä¼šè¿›å…¥åˆ°è¿™ä¸ªè‡ªå®šä¹‰çš„åŒ¹é…è§„åˆ™è¿›è¡ŒåŒ¹é…ï¼›</span>
</code></pre></div></div>

<h3 id="ç»„ä»¶ä½œç”¨åŸŸ">ç»„ä»¶ä½œç”¨åŸŸ</h3>

<ul>
  <li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Scopeæ³¨è§£è®¾ç½®ç»„ä»¶ä½œç”¨åŸŸ</li>
  <li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªé…ç½®ç±»ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯å•å®ä¾‹çš„</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig2</span> <span class="o">{</span>

    <span class="c1">//é»˜è®¤æ˜¯å•å®ä¾‹çš„</span>
    <span class="nd">@Bean</span><span class="o">(</span><span class="s">"person"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test02</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ApplicationContext</span> <span class="n">applicationContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="nc">MainConfig2</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="nc">String</span><span class="o">[]</span> <span class="n">definitionNames</span> <span class="o">=</span> <span class="n">applicationContext</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">definitionNames</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//é»˜è®¤æ˜¯å•å®ä¾‹çš„</span>
        <span class="nc">Person</span> <span class="n">person1</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Person</span><span class="o">)</span> <span class="n">applicationContext</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"person"</span><span class="o">);</span>
        <span class="nc">Person</span> <span class="n">person2</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Person</span><span class="o">)</span> <span class="n">applicationContext</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"person"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">person1</span><span class="o">==</span><span class="n">person2</span><span class="o">);</span>
    <span class="o">}</span>

</code></pre></div></div>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">org.springframework.context.annotation.internalConfigurationAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalAutowiredAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalRequiredAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalCommonAnnotationProcessor</span>
<span class="err">org.springframework.context.event.internalEventListenerProcessor</span>
<span class="err">org.springframework.context.event.internalEventListenerFactory</span>
<span class="err">mainConfig2</span>
<span class="err">person</span>
<span class="err">true</span>
</code></pre></div></div>

<ul>
  <li>æˆ‘ä»¬å¯ä»¥ç”¨<code class="language-plaintext highlighter-rouge">@Scope</code>è¿™ä¸ªæ³¨è§£æ¥æŒ‡å®šä½œç”¨åŸŸçš„èŒƒå›´ï¼šè¿™ä¸ªå°±ç›¸å½“äºåœ¨xmlæ–‡ä»¶ä¸­é…ç½®çš„<code class="language-plaintext highlighter-rouge">&lt;bean&gt;</code>æ ‡ç­¾é‡Œé¢æŒ‡å®šscope=â€œprototypeâ€ å±æ€§ï¼›</li>
  <li>æºç </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Target</span><span class="o">({</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">,</span> <span class="nc">ElementType</span><span class="o">.</span><span class="na">METHOD</span><span class="o">})</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Documented</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">Scope</span> <span class="o">{</span>

	<span class="cm">/**
	 * Alias for {@link #scopeName}.
	 * @see #scopeName
	 */</span>
	<span class="nd">@AliasFor</span><span class="o">(</span><span class="s">"scopeName"</span><span class="o">)</span>
	<span class="nc">String</span> <span class="nf">value</span><span class="o">()</span> <span class="k">default</span> <span class="s">""</span><span class="o">;</span>

	<span class="cm">/**
	 * Specifies the name of the scope to use for the annotated component/bean.
	 * &lt;p&gt;Defaults to an empty string ({@code ""}) which implies
	 * {@link ConfigurableBeanFactory#SCOPE_SINGLETON SCOPE_SINGLETON}.
	 * @since 4.2
	 * @see ConfigurableBeanFactory#SCOPE_PROTOTYPE å¤šå®ä¾‹
	 * @see ConfigurableBeanFactory#SCOPE_SINGLETON å•å®ä¾‹
	 * @see org.springframework.web.context.WebApplicationContext#SCOPE_REQUEST
	 * @see org.springframework.web.context.WebApplicationContext#SCOPE_SESSION
	 * @see #value
	 */</span>
	<span class="nd">@AliasFor</span><span class="o">(</span><span class="s">"value"</span><span class="o">)</span>
	<span class="nc">String</span> <span class="nf">scopeName</span><span class="o">()</span> <span class="k">default</span> <span class="s">""</span><span class="o">;</span>

	<span class="cm">/**
	 * Specifies whether a component should be configured as a scoped proxy
	 * and if so, whether the proxy should be interface-based or subclass-based.
	 * &lt;p&gt;Defaults to {@link ScopedProxyMode#DEFAULT}, which typically indicates
	 * that no scoped proxy should be created unless a different default
	 * has been configured at the component-scan instruction level.
	 * &lt;p&gt;Analogous to {@code &lt;aop:scoped-proxy/&gt;} support in Spring XML.
	 * @see ScopedProxyMode
	 */</span>
	<span class="nc">ScopedProxyMode</span> <span class="nf">proxyMode</span><span class="o">()</span> <span class="k">default</span> <span class="nc">ScopedProxyMode</span><span class="o">.</span><span class="na">DEFAULT</span><span class="o">;</span>

<span class="o">}</span>

</code></pre></div></div>

<h4 id="å¤šå®ä¾‹">å¤šå®ä¾‹</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig2</span> <span class="o">{</span>
    <span class="c1">//singleton:å•å®ä¾‹çš„</span>
    <span class="c1">//prototype:å¤šå®ä¾‹çš„</span>
    <span class="c1">//request:åŒä¸€æ¬¡è¯·æ±‚åˆ›å»ºä¸€ä¸ªå®ä¾‹</span>
    <span class="c1">//session:åŒä¸€ä¸ªsessionåˆ›å»ºçš„ä¸€ä¸ªå®ä¾‹</span>
    <span class="nd">@Scope</span><span class="o">(</span><span class="s">"prototype"</span><span class="o">)</span>
    <span class="c1">//é»˜è®¤æ˜¯å•å®ä¾‹çš„</span>
    <span class="nd">@Bean</span><span class="o">(</span><span class="s">"person"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test02</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ApplicationContext</span> <span class="n">applicationContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="nc">MainConfig2</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="nc">String</span><span class="o">[]</span> <span class="n">definitionNames</span> <span class="o">=</span> <span class="n">applicationContext</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">definitionNames</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//é»˜è®¤æ˜¯å•å®ä¾‹çš„</span>
        <span class="nc">Person</span> <span class="n">person1</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Person</span><span class="o">)</span> <span class="n">applicationContext</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"person"</span><span class="o">);</span>
        <span class="nc">Person</span> <span class="n">person2</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Person</span><span class="o">)</span> <span class="n">applicationContext</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"person"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">person1</span><span class="o">==</span><span class="n">person2</span><span class="o">);</span>
    <span class="o">}</span>

</code></pre></div></div>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">org.springframework.context.annotation.internalConfigurationAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalAutowiredAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalRequiredAnnotationProcessor</span>
<span class="err">org.springframework.context.annotation.internalCommonAnnotationProcessor</span>
<span class="err">org.springframework.context.event.internalEventListenerProcessor</span>
<span class="err">org.springframework.context.event.internalEventListenerFactory</span>
<span class="err">mainConfig2</span>
<span class="err">person</span>
<span class="err">false</span>
<span class="err">è¿™ä¸ªæ—¶å€™ï¼Œbeançš„å®ä¾‹å°±å¤šå®ä¾‹çš„ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡getBean()æ–¹æ³•å°±ä¼šåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼›</span>
</code></pre></div></div>

<ul>
  <li>æˆ‘ä»¬æ¥çœ‹çœ‹å½“beançš„ä½œç”¨åŸŸä¸ºå¤šä¾‹çš„æ—¶å€™ï¼Œå®ƒåœ¨IOCå®¹å™¨ä¸­æ˜¯ä½•æ—¶åˆ›å»ºçš„ï¼š</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig2</span> <span class="o">{</span>

    <span class="nd">@Scope</span><span class="o">(</span><span class="s">"prototype"</span><span class="o">)</span>
    <span class="nd">@Bean</span><span class="o">(</span><span class="s">"person"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ç»™IOCå®¹å™¨ä¸­æ·»åŠ Person..."</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test02</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ApplicationContext</span> <span class="n">applicationContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="nc">MainConfig2</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

</code></pre></div></div>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ§åˆ¶å°æ²¡æœ‰ä»»ä½•çš„è¾“å‡ºç»“æœï¼›åœ¨IOCå®¹å™¨åˆ›å»ºçš„æ—¶å€™ï¼Œæ²¡æœ‰å»åˆ›å»ºè¿™ä¸ªä½œç”¨åŸŸä¸ºå¤šå®ä¾‹çš„beanï¼›</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test02</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ApplicationContext</span> <span class="n">applicationContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="nc">MainConfig2</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"IOCå®¹å™¨åˆ›å»ºå®Œæˆ..."</span><span class="o">);</span>
        <span class="nc">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Person</span><span class="o">)</span> <span class="n">applicationContext</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"person"</span><span class="o">);</span>
        <span class="nc">Person</span> <span class="n">person1</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Person</span><span class="o">)</span> <span class="n">applicationContext</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"person"</span><span class="o">);</span>
    <span class="o">}</span>

</code></pre></div></div>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">IOCå®¹å™¨åˆ›å»ºå®Œæˆâ€¦</span>
<span class="err">ç»™IOCå®¹å™¨ä¸­æ·»åŠ Personâ€¦</span>
<span class="err">ç»™IOCå®¹å™¨ä¸­æ·»åŠ Personâ€¦</span>

<span class="err">æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬ç”¨getBeanæ–¹æ³•è·å–å‡ æ¬¡ï¼Œå°±åˆ›å»ºå‡ æ¬¡beançš„å®ä¾‹ï¼›</span>
<span class="err">ä¹Ÿå°±æ˜¯è¯´å½“beanæ˜¯ä½œç”¨åŸŸä¸ºå¤šä¾‹çš„æ—¶å€™ï¼ŒIOCå®¹å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå»åˆ›å»ºbeançš„å®ä¾‹çš„ï¼Œè€Œæ˜¯å½“æˆ‘ä»¬è°ƒç”¨getBean()è·å–çš„æ—¶å€™å»åˆ›å»ºbeançš„å®ä¾‹ï¼›è€Œä¸”æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œéƒ½ä¼šåˆ›å»ºbeançš„å®ä¾‹ï¼›</span>
</code></pre></div></div>

<h4 id="å•ä¾‹">å•ä¾‹</h4>

<ul>
  <li>æˆ‘ä»¬æ¥çœ‹çœ‹å½“beançš„ä½œç”¨åŸŸä¸ºå•ä¾‹çš„æ—¶å€™ï¼Œå®ƒåœ¨IOCå®¹å™¨ä¸­æ˜¯ä½•æ—¶åˆ›å»ºçš„ï¼š</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainConfig2</span> <span class="o">{</span>
    
    <span class="nd">@Scope</span>
    <span class="nd">@Bean</span><span class="o">(</span><span class="s">"person"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Person</span> <span class="nf">person</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ç»™IOCå®¹å™¨ä¸­æ·»åŠ Person..."</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test02</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ApplicationContext</span> <span class="n">applicationContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="nc">MainConfig2</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

</code></pre></div></div>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">ç»™IOCå®¹å™¨ä¸­æ·»åŠ Personâ€¦</span>

<span class="err">è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç°ï¼Œå½“ä½œç”¨åŸŸä¸ºå•ä¾‹çš„æ—¶å€™ï¼ŒIOCå®¹å™¨åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šå°†å®¹å™¨ä¸­æ‰€æœ‰ä½œç”¨åŸŸä¸ºå•ä¾‹çš„beançš„å®ä¾‹ç»™åˆ›å»ºå‡ºæ¥ï¼›ä»¥åçš„æ¯æ¬¡è·å–ï¼Œå°±ç›´æ¥ä»IOCå®¹å™¨ä¸­æ¥è·å–ï¼Œç›¸å½“äºæ˜¯ä»map.get()çš„ä¸€ä¸ªè¿‡ç¨‹ï¼›</span>
</code></pre></div></div>

:ET