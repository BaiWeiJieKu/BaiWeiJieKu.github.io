I"/<ul id="markdown-toc">
  <li><a href="#æ¦‚å¿µ" id="markdown-toc-æ¦‚å¿µ">æ¦‚å¿µ</a></li>
  <li><a href="#å†…å­˜æ¨¡å‹" id="markdown-toc-å†…å­˜æ¨¡å‹">å†…å­˜æ¨¡å‹</a>    <ul>
      <li><a href="#åŒæ­¥æ“ä½œ" id="markdown-toc-åŒæ­¥æ“ä½œ">åŒæ­¥æ“ä½œ</a></li>
      <li><a href="#åŒæ­¥è§„åˆ™" id="markdown-toc-åŒæ­¥è§„åˆ™">åŒæ­¥è§„åˆ™</a></li>
      <li><a href="#å¹¶å‘ä¼˜åŠ¿" id="markdown-toc-å¹¶å‘ä¼˜åŠ¿">å¹¶å‘ä¼˜åŠ¿</a></li>
      <li><a href="#å¹¶å‘é£é™©" id="markdown-toc-å¹¶å‘é£é™©">å¹¶å‘é£é™©</a></li>
    </ul>
  </li>
  <li><a href="#çº¿ç¨‹å®‰å…¨æ€§" id="markdown-toc-çº¿ç¨‹å®‰å…¨æ€§">çº¿ç¨‹å®‰å…¨æ€§</a>    <ul>
      <li><a href="#æ€»ç»“" id="markdown-toc-æ€»ç»“">æ€»ç»“</a></li>
    </ul>
  </li>
  <li><a href="#å¯è§æ€§" id="markdown-toc-å¯è§æ€§">å¯è§æ€§</a></li>
  <li><a href="#å®‰å…¨å‘å¸ƒå¯¹è±¡" id="markdown-toc-å®‰å…¨å‘å¸ƒå¯¹è±¡">å®‰å…¨å‘å¸ƒå¯¹è±¡</a>    <ul>
      <li><a href="#å‘å¸ƒé€¸å‡º" id="markdown-toc-å‘å¸ƒé€¸å‡º">å‘å¸ƒ&amp;é€¸å‡º</a></li>
      <li><a href="#å®‰å…¨å‘å¸ƒ" id="markdown-toc-å®‰å…¨å‘å¸ƒ">å®‰å…¨å‘å¸ƒ</a></li>
    </ul>
  </li>
  <li><a href="#ä¸å¯å˜å¯¹è±¡" id="markdown-toc-ä¸å¯å˜å¯¹è±¡">ä¸å¯å˜å¯¹è±¡</a></li>
  <li><a href="#çº¿ç¨‹å°é—­" id="markdown-toc-çº¿ç¨‹å°é—­">çº¿ç¨‹å°é—­</a></li>
  <li><a href="#çº¿ç¨‹ä¸å®‰å…¨ç±»" id="markdown-toc-çº¿ç¨‹ä¸å®‰å…¨ç±»">çº¿ç¨‹ä¸å®‰å…¨ç±»</a></li>
  <li><a href="#åŒæ­¥å®¹å™¨" id="markdown-toc-åŒæ­¥å®¹å™¨">åŒæ­¥å®¹å™¨</a></li>
  <li><a href="#å®‰å…¨å…±äº«å¯¹è±¡ç­–ç•¥" id="markdown-toc-å®‰å…¨å…±äº«å¯¹è±¡ç­–ç•¥">å®‰å…¨å…±äº«å¯¹è±¡ç­–ç•¥</a></li>
  <li><a href="#aqs" id="markdown-toc-aqs">AQS</a>    <ul>
      <li><a href="#aqsåŒæ­¥ç»„ä»¶" id="markdown-toc-aqsåŒæ­¥ç»„ä»¶">AQSåŒæ­¥ç»„ä»¶</a></li>
      <li><a href="#jucæ‹“å±•" id="markdown-toc-jucæ‹“å±•">JUCæ‹“å±•</a></li>
    </ul>
  </li>
  <li><a href="#çº¿ç¨‹æ± " id="markdown-toc-çº¿ç¨‹æ± ">çº¿ç¨‹æ± </a>    <ul>
      <li><a href="#threadpoolexecutor" id="markdown-toc-threadpoolexecutor">ThreadPoolExecutor</a></li>
      <li><a href="#executoræ¡†æ¶æ¥å£" id="markdown-toc-executoræ¡†æ¶æ¥å£">Executoræ¡†æ¶æ¥å£</a></li>
      <li><a href="#æ­»é”" id="markdown-toc-æ­»é”">æ­»é”</a></li>
    </ul>
  </li>
  <li><a href="#ä»£ç å®ä¾‹" id="markdown-toc-ä»£ç å®ä¾‹">ä»£ç å®ä¾‹</a>    <ul>
      <li><a href="#è®¡æ•°å™¨æ¡ˆä¾‹" id="markdown-toc-è®¡æ•°å™¨æ¡ˆä¾‹">è®¡æ•°å™¨æ¡ˆä¾‹</a></li>
      <li><a href="#synchronized" id="markdown-toc-synchronized">synchronized</a></li>
      <li><a href="#å‘å¸ƒå¯¹è±¡" id="markdown-toc-å‘å¸ƒå¯¹è±¡">å‘å¸ƒå¯¹è±¡</a></li>
      <li><a href="#ä¸å¯å˜å¯¹è±¡-1" id="markdown-toc-ä¸å¯å˜å¯¹è±¡-1">ä¸å¯å˜å¯¹è±¡</a></li>
      <li><a href="#çº¿ç¨‹å°é—­-1" id="markdown-toc-çº¿ç¨‹å°é—­-1">çº¿ç¨‹å°é—­</a></li>
      <li><a href="#çº¿ç¨‹ä¸å®‰å…¨ç±»-1" id="markdown-toc-çº¿ç¨‹ä¸å®‰å…¨ç±»-1">çº¿ç¨‹ä¸å®‰å…¨ç±»</a></li>
      <li><a href="#åŒæ­¥å®¹å™¨-1" id="markdown-toc-åŒæ­¥å®¹å™¨-1">åŒæ­¥å®¹å™¨</a></li>
      <li><a href="#aqs-1" id="markdown-toc-aqs-1">AQS</a></li>
    </ul>
  </li>
  <li><a href="#é«˜å¹¶å‘ä¹‹ç¼“å­˜" id="markdown-toc-é«˜å¹¶å‘ä¹‹ç¼“å­˜">é«˜å¹¶å‘ä¹‹ç¼“å­˜</a>    <ul>
      <li><a href="#guavacache" id="markdown-toc-guavacache">GuavaCache</a></li>
      <li><a href="#redis" id="markdown-toc-redis">Redis</a></li>
    </ul>
  </li>
  <li><a href="#é«˜å¹¶å‘ä¹‹æ¶ˆæ¯é˜Ÿåˆ—" id="markdown-toc-é«˜å¹¶å‘ä¹‹æ¶ˆæ¯é˜Ÿåˆ—">é«˜å¹¶å‘ä¹‹æ¶ˆæ¯é˜Ÿåˆ—</a></li>
</ul>
<h3 id="æ¦‚å¿µ">æ¦‚å¿µ</h3>

<ul>
  <li>
    <p><a href="https://github.com/CL0610/Java-concurrency">å¹¶å‘ç¼–ç¨‹ä½“ç³»</a></p>
  </li>
  <li>
    <p><a href="https://github.com/BaiWeiJieKu/Concurrency">é¡¹ç›®ä»£ç </a></p>
  </li>
  <li><strong>å¹¶å‘</strong>ï¼šåŒæ—¶æ‹¥æœ‰ä¸¤ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹ï¼Œå¦‚æœç¨‹åºåœ¨å•æ ¸å¤„ç†å™¨ä¸Šè¿è¡Œï¼Œå¤šä¸ªçº¿ç¨‹å°†äº¤æ›¿çš„æ¢å…¥æˆ–æ¢å‡ºå†…å­˜ï¼Œè¿™äº›çº¿ç¨‹æ˜¯åŒæ—¶â€œå­˜åœ¨â€çš„ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å¤„äºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸ªçŠ¶æ€ï¼Œå¦‚æœè¿è¡Œåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šï¼Œæ­¤æ—¶ï¼Œç¨‹åºä¸­çš„æ¯ä¸ªçº¿ç¨‹éƒ½å°†åˆ†é…åˆ°ä¸€ä¸ªå¤„ç†å™¨æ ¸ä¸Šï¼Œå› æ­¤å¯ä»¥åŒæ—¶è¿è¡Œ
    <ul>
      <li>å¤šä¸ªçº¿ç¨‹æ“ä½œç›¸åŒçš„èµ„æºï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œåˆç†ä½¿ç”¨èµ„æº</li>
    </ul>
  </li>
  <li><strong>é«˜å¹¶å‘</strong>ï¼šé«˜å¹¶å‘ï¼ˆHigh Concurrencyï¼‰æ˜¯äº’è”ç½‘åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„è®¾è®¡ä¸­å¿…é¡»è€ƒè™‘çš„å› ç´ ä¹‹ä¸€ï¼Œå®ƒé€šå¸¸æ˜¯æŒ‡ï¼Œé€šè¿‡è®¾è®¡ä¿è¯ç³»ç»Ÿèƒ½å¤Ÿ<strong>åŒæ—¶å¹¶è¡Œå¤„ç†</strong>å¾ˆå¤šè¯·æ±‚ã€‚
    <ul>
      <li>æœåŠ¡èƒ½åŒæ—¶å¤„ç†å¾ˆå¤šè¯·æ±‚ï¼Œæé«˜ç¨‹åºæ€§èƒ½</li>
    </ul>
  </li>
</ul>

<h3 id="å†…å­˜æ¨¡å‹">å†…å­˜æ¨¡å‹</h3>

<h4 id="åŒæ­¥æ“ä½œ">åŒæ­¥æ“ä½œ</h4>

<ul>
  <li><strong>lockï¼ˆé”å®šï¼‰</strong>ï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠä¸€ä¸ªå˜é‡æ ‡è¯†ä¸ºä¸€æ¡çº¿ç¨‹ç‹¬å çŠ¶æ€</li>
  <li><strong>unlockï¼ˆè§£é”ï¼‰</strong>ï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠä¸€ä¸ªå¤„äºé”å®šçŠ¶æ€çš„å˜é‡é‡Šæ”¾å‡ºæ¥ï¼Œé‡Šæ”¾åçš„å˜é‡æ‰å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹é”å®šã€‚</li>
  <li><strong>readï¼ˆè¯»å–ï¼‰</strong>ï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠä¸€ä¸ªå˜é‡çš„å€¼ä»ä¸»å†…å­˜ä¼ è¾“åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ï¼Œä»¥ä¾¿ä»¥åçš„loadåŠ¨ä½œä½¿ç”¨ã€‚</li>
  <li><strong>loadï¼ˆè½½å…¥ï¼‰</strong>ï¼šä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠreadæ“ä½œä»ä¸»å†…å­˜ä¸­å¾—åˆ°çš„å˜é‡å€¼æ”¾å…¥å·¥ä½œå†…å­˜çš„å˜é‡å‰¯æœ¬ä¸­ã€‚</li>
  <li><strong>useï¼ˆä½¿ç”¨ï¼‰</strong>ï¼šä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­çš„ä¸€ä¸ªå˜é‡å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ã€‚</li>
  <li><strong>assignï¼ˆèµ‹å€¼ï¼‰</strong>ï¼šä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªä»æ‰§è¡Œå¼•æ“æ¥æ”¶åˆ°çš„å€¼èµ‹å€¼ç»™å·¥ä½œå†…å­˜çš„å˜é‡ã€‚</li>
  <li><strong>storeï¼ˆå­˜å‚¨ï¼‰</strong>ï¼šä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­çš„ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€åˆ°ä¸»å†…å­˜ä¸­ï¼Œä»¥ä¾¿ä»¥åçš„writeæ“ä½œã€‚</li>
  <li><strong>writeï¼ˆå†™å…¥ï¼‰</strong>ï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠstoreæ“ä½œä»å·¥ä½œå†…å­˜ä¸­ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€åˆ°ä¸»å†…å­˜çš„å˜é‡ä¸­ã€‚</li>
</ul>

<h4 id="åŒæ­¥è§„åˆ™">åŒæ­¥è§„åˆ™</h4>

<ul>
  <li>å¦‚æœè¦æŠŠä¸€ä¸ªå˜é‡ä»ä¸»å†…å­˜ä¸­å¤åˆ¶åˆ°å·¥ä½œå†…å­˜ï¼Œå°±éœ€è¦æŒ‰é¡ºåºåœ°æ‰§è¡Œreadå’Œloadæ“ä½œï¼Œå¦‚æœæŠŠå˜é‡ä»å·¥ä½œå†…å­˜ä¸­åŒæ­¥å›ä¸»å†…å­˜ä¸­ï¼Œå°±è¦æŒ‰é¡ºåºåœ°æ‰§è¡Œstoreå’Œwriteæ“ä½œã€‚ä½†javaå†…å­˜æ¨¡å‹åªè¦æ±‚ä¸Šè¿°æ“ä½œå¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œï¼Œè€Œæ²¡æœ‰ä¿è¯å¿…é¡»æ˜¯è¿ç»­æ‰§è¡Œã€‚</li>
  <li>ä¸å…è®¸readå’Œloadã€storeå’Œwriteæ“ä½œä¹‹ä¸€å•ç‹¬å‡ºç°</li>
  <li>ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹ä¸¢å¼ƒå®ƒçš„æœ€è¿‘assignçš„æ“ä½œï¼Œå³å˜é‡åœ¨å·¥ä½œå†…å­˜ä¸­æ”¹å˜äº†ä¹‹åå¿…é¡»åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­</li>
  <li>ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹æ— åŸå› åœ°ï¼ˆæ²¡æœ‰å‘ç”Ÿè¿‡ä»»ä½•assignæ“ä½œï¼‰æŠŠæ•°æ®ä»å·¥ä½œå†…å­˜åŒæ­¥å›ä¸»å†…å­˜ä¸­ã€‚</li>
  <li>ä¸€ä¸ªæ–°çš„å˜é‡åªèƒ½åœ¨ä¸»å†…å­˜ä¸­è¯ç”Ÿï¼Œä¸å…è®¸åœ¨å·¥ä½œå†…å­˜ä¸­ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœªè¢«åˆå§‹åŒ–ï¼ˆloadæˆ–assignï¼‰çš„å˜é‡ã€‚å³å°±æ˜¯å¯¹ä¸€ä¸ªå˜é‡å®æ–½useå’Œstoreæ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæ‰§è¡Œè¿‡äº†assignå’Œloadæ“ä½œã€‚</li>
  <li>ä¸€ä¸ªå˜é‡åœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€æ¡çº¿ç¨‹å¯¹å…¶è¿›è¡Œlockæ“ä½œï¼Œä½†lockæ“ä½œå¯ä»¥è¢«åŒä¸€æ¡çº¿ç¨‹é‡å¤æ‰§è¡Œå¤šæ¬¡ï¼Œå¤šæ¬¡æ‰§è¡Œlockåï¼Œåªæœ‰æ‰§è¡Œç›¸åŒæ¬¡æ•°çš„unlockæ“ä½œï¼Œå˜é‡æ‰ä¼šè¢«è§£é”ã€‚lockå’Œunlockå¿…é¡»æˆå¯¹å‡ºç°ã€‚</li>
  <li>å¦‚æœä¸€ä¸ªå˜é‡æ‰§è¡Œlockæ“ä½œï¼Œå°†ä¼šæ¸…ç©ºå·¥ä½œå†…å­˜ä¸­æ­¤å˜é‡çš„å€¼ï¼Œåœ¨æ‰§è¡Œå¼•æ“ä½¿ç”¨è¿™ä¸ªå˜é‡å‰éœ€è¦é‡æ–°æ‰§è¡Œloadæˆ–assignæ“ä½œåˆå§‹åŒ–å˜é‡çš„å€¼</li>
  <li>å¦‚æœä¸€ä¸ªå˜é‡äº‹å…ˆæ²¡æœ‰è¢«lockæ“ä½œé”å®šï¼Œåˆ™ä¸å…è®¸å¯¹å®ƒæ‰§è¡Œunlockæ“ä½œï¼›ä¹Ÿä¸å…è®¸å»unlockä¸€ä¸ªè¢«å…¶ä»–çº¿ç¨‹é”å®šçš„å˜é‡ã€‚</li>
  <li>å¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œunlockæ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼ˆæ‰§è¡Œstoreå’Œwriteæ“ä½œï¼‰ã€‚</li>
</ul>

<h4 id="å¹¶å‘ä¼˜åŠ¿">å¹¶å‘ä¼˜åŠ¿</h4>

<ul>
  <li>é€Ÿåº¦ï¼šåŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚ï¼Œå“åº”æ›´å¿«ï¼›å¤æ‚çš„æ“ä½œå¯ä»¥åˆ†æˆå¤šä¸ªè¿›ç¨‹åŒæ—¶è¿›è¡Œ</li>
  <li>è®¾è®¡ï¼šç¨‹åºè®¾è®¡åœ¨æŸäº›æƒ…å†µä¸‹æ›´ç®€å•ï¼Œä¹Ÿå¯ä»¥æœ‰æ›´å¤šçš„é€‰æ‹©ã€‚</li>
  <li>èµ„æºåˆ©ç”¨ï¼šcupèƒ½å¤Ÿåœ¨ç­‰å¾…ioçš„æ—¶å€™åšä¸€äº›å…¶ä»–çš„äº‹æƒ…</li>
</ul>

<h4 id="å¹¶å‘é£é™©">å¹¶å‘é£é™©</h4>

<ul>
  <li>å®‰å…¨æ€§ï¼šå¤šä¸ªçº¿ç¨‹å…±äº«æ•°æ®æ—¶å¯èƒ½ä¼šäº§ç”Ÿä¸æœŸæœ›ä¸ç¬¦çš„ç»“æœ</li>
  <li>æ´»è·ƒæ€§ï¼šæŸä¸ªæ“ä½œæ— æ³•ç»§ç»­è¿›è¡Œä¸‹å»æ—¶ï¼Œå°±ä¼šå‘ç”Ÿæ´»è·ƒæ€§é—®é¢˜ã€‚æ¯”å¦‚æ­»é”ï¼Œé¥¥é¥¿ç­‰é—®é¢˜</li>
  <li>æ€§èƒ½ï¼šçº¿ç¨‹è¿‡å¤šæ—¶ä¼šä½¿å¾—CPUé¢‘ç¹åˆ‡æ¢ï¼Œè°ƒåº¦æ—¶é—´å¢å¤šï¼ŒåŒæ­¥æœºåˆ¶ï¼Œæ¶ˆè€—è¿‡å¤šå†…å­˜</li>
</ul>

<h3 id="çº¿ç¨‹å®‰å…¨æ€§">çº¿ç¨‹å®‰å…¨æ€§</h3>

<ul>
  <li>å½“å¤šä¸ªçº¿ç¨‹è®¿é—®æŸä¸ªç±»æ—¶ï¼Œä¸ç®¡è¿è¡Œæ—¶ç¯å¢ƒé‡‡ç”¨<strong>ä½•ç§è°ƒåº¦æ–¹å¼</strong>æˆ–è€…è¿™äº›è¿›ç¨‹å°†å¦‚ä½•äº¤æ›¿æ‰§è¡Œï¼Œå¹¶ä¸”åœ¨ä¸»è°ƒåº¦ä»£ç ä¸­<strong>ä¸éœ€è¦ä»»ä½•é¢å¤–çš„åŒæ­¥æˆ–ååŒ</strong>ï¼Œè¿™ä¸ªç±»éƒ½èƒ½è¡¨ç°å‡º<strong>æ­£ç¡®çš„è¡Œä¸º</strong>ï¼Œé‚£ä¹ˆå°±ç§°è¿™ä¸ªç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li>
  <li>åŸå­æ€§ï¼šæä¾›äº†äº’æ–¥è®¿é—®ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥å¯¹å®ƒè¿›è¡Œæ“ä½œ</li>
  <li>å¯è§æ€§ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹ä¸»å†…å­˜çš„ä¿®æ”¹å¯ä»¥åŠæ—¶çš„è¢«å…¶ä»–çº¿ç¨‹è§‚å¯Ÿåˆ°</li>
  <li>æœ‰åºæ€§ï¼šä¸€ä¸ªçº¿ç¨‹è§‚å¯Ÿå…¶ä»–çº¿ç¨‹ä¸­çš„æŒ‡ä»¤æ‰§è¡Œé¡ºåºï¼Œç”±äºæŒ‡ä»¤é‡æ’åºçš„å­˜åœ¨ï¼Œè¯¥è§‚å¯Ÿç»“æœä¸€èˆ¬æ‚ä¹±æ— åºã€‚</li>
  <li>åŸå­æ€§é”
    <ul>
      <li>synchronizedï¼šä¾èµ–JVMï¼Œä¸å¯ä¸­æ–­é”ï¼Œé€‚åˆç«äº‰ä¸æ¿€çƒˆï¼Œå¯è¯»æ€§å¥½</li>
      <li>Lockï¼šä¾èµ–ç‰¹æ®Šçš„CPUæŒ‡ä»¤ï¼Œä»£ç å®ç°ï¼ŒReentrantLockã€‚å¯ä¸­æ–­é”ï¼Œå¤šæ ·åŒ–åŒæ­¥ï¼Œç«äº‰æ¿€çƒˆæ—¶èƒ½ç»´æŒå¸¸æ€</li>
    </ul>
  </li>
  <li>synchronizedï¼š
    <ul>
      <li>ä¿®é¥°ä»£ç å—ï¼šå¤§æ‹¬å·æ‹¬èµ·æ¥çš„ä»£ç ï¼Œä½œç”¨äº<strong>è°ƒç”¨çš„å¯¹è±¡</strong></li>
      <li>ä¿®é¥°æ–¹æ³•ï¼šæ•´ä¸ªæ–¹æ³•ï¼Œä½œç”¨äº<strong>è°ƒç”¨çš„å¯¹è±¡</strong></li>
      <li>ä¿®é¥°é™æ€æ–¹æ³•ï¼šæ•´ä¸ªé™æ€æ–¹æ³•ï¼Œä½œç”¨äº<strong>æ‰€æœ‰å¯¹è±¡</strong></li>
      <li>ä¿®é¥°ç±»ï¼šæ‹¬å·æ‹¬èµ·æ¥çš„éƒ¨åˆ†ï¼Œä½œç”¨äº<strong>æ‰€æœ‰å¯¹è±¡</strong></li>
    </ul>
  </li>
</ul>

<h4 id="æ€»ç»“">æ€»ç»“</h4>

<ul>
  <li>åŸå­æ€§ï¼šAtomicåŒ…ï¼ŒCASç®—æ³•ï¼Œsynchronizedï¼ŒLock</li>
  <li>å¯è§æ€§ï¼šsynchronizedï¼Œvolatile</li>
  <li>æœ‰åºæ€§ï¼šhappens-beforeåŸåˆ™</li>
</ul>

<h3 id="å¯è§æ€§">å¯è§æ€§</h3>

<ul>
  <li>å¯¼è‡´å…±äº«å˜é‡åœ¨çº¿ç¨‹é—´ä¸å¯è§çš„åŸå› ï¼š
    <ul>
      <li>çº¿ç¨‹äº¤å‰æ‰§è¡Œ</li>
      <li>é‡æ’åºç»“åˆçº¿ç¨‹äº¤å‰æ‰§è¡Œ</li>
      <li>å…±äº«å˜é‡æ›´æ–°åçš„å€¼æ²¡æœ‰åœ¨å·¥ä½œå†…å­˜ä¸ä¸»å­˜é—´åŠæ—¶æ›´æ–°</li>
    </ul>
  </li>
  <li>JMMå¯¹synchronizedçš„è§„å®šï¼š
    <ul>
      <li>çº¿ç¨‹è§£é”å‰ï¼Œå¿…é¡»æŠŠå…±äº«å˜é‡çš„æœ€æ–°å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜</li>
      <li>çº¿ç¨‹åŠ é”æ—¶ï¼Œå°†æ¸…ç©ºå·¥ä½œå†…å­˜ä¸­å…±äº«å˜é‡çš„å€¼ï¼Œä»è€Œä½¿ç”¨å…±äº«å˜é‡æ—¶éœ€è¦ä»ä¸»å†…å­˜ä¸­é‡æ–°è¯»å–æœ€æ–°çš„å€¼ï¼ˆåŠ é”å’Œè§£é”æ˜¯åŒä¸€æŠŠé”ï¼‰</li>
    </ul>
  </li>
  <li>volatileé€šè¿‡åŠ å…¥<strong>å†…å­˜å±éšœ</strong>å’Œ<strong>ç¦æ­¢é‡æ’åº</strong>æ¥å®ç°å¯è§æ€§
    <ul>
      <li>å¯¹volatileå˜é‡å†™æ“ä½œæ—¶ï¼Œä¼šåœ¨å†™æ“ä½œååŠ å…¥ä¸€æ¡storeå±éšœæŒ‡ä»¤ï¼Œå°†æœ¬åœ°å†…å­˜ä¸­çš„å…±äº«å˜é‡å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜</li>
      <li>å¯¹volatileå˜é‡çš„è¯»æ“ä½œæ—¶ï¼Œä¼šåœ¨è¯»æ“ä½œå‰åŠ å…¥ä¸€æ¡loadå±éšœæŒ‡ä»¤ï¼Œä»ä¸»å­˜ä¸­è¯»å–å…±äº«å˜é‡</li>
      <li>volatileä¸å…·æœ‰åŸå­æ€§ï¼Œä¸é€‚ç”¨äºè®¡æ•°</li>
      <li>ä½¿ç”¨volatileçš„ä¸¤ä¸ªæ¡ä»¶ï¼š
        <ul>
          <li>å¯¹å˜é‡çš„å†™æ“ä½œä¸ä¾èµ–äºå½“å‰å€¼</li>
          <li>è¯¥å˜é‡æ²¡æœ‰åŒ…å«åœ¨å…·æœ‰å…¶ä»–å˜é‡çš„ä¸å˜è¡¨è¾¾å¼ä¸­</li>
          <li><strong>volatileé€‚åˆåšçŠ¶æ€æ ‡è®°é‡</strong></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="å®‰å…¨å‘å¸ƒå¯¹è±¡">å®‰å…¨å‘å¸ƒå¯¹è±¡</h3>

<h4 id="å‘å¸ƒé€¸å‡º">å‘å¸ƒ&amp;é€¸å‡º</h4>

<ul>
  <li>å‘å¸ƒå¯¹è±¡ï¼šä½¿ä¸€ä¸ªå¯¹è±¡èƒ½å¤Ÿè¢«å½“å‰èŒƒå›´ä¹‹å¤–çš„ä»£ç æ‰€ä½¿ç”¨</li>
  <li>å¯¹è±¡é€¸å‡ºï¼šä¸€ç§é”™è¯¯çš„å‘å¸ƒã€‚å½“ä¸€ä¸ªå¯¹è±¡è¿˜æ²¡æœ‰æ„é€ å®Œæˆæ—¶ï¼Œå°±ä½¿å®ƒè¢«å…¶ä»–çº¿ç¨‹æ‰€è§</li>
</ul>

<h4 id="å®‰å…¨å‘å¸ƒ">å®‰å…¨å‘å¸ƒ</h4>

<ul>
  <li>åœ¨é™æ€åˆå§‹åŒ–å‡½æ•°ä¸­åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡å¼•ç”¨</li>
  <li>å°†å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åˆ°volatileç±»å‹åŸŸæˆ–è€…AtomicReferenceå¯¹è±¡ä¸­</li>
  <li>å°†å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åˆ°æŸä¸ªæ­£ç¡®æ„é€ å¯¹è±¡çš„finalç±»å‹åŸŸä¸­</li>
  <li>å°†å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åˆ°ä¸€ä¸ªç”±é”ä¿æŠ¤çš„åŸŸä¸­</li>
</ul>

<h3 id="ä¸å¯å˜å¯¹è±¡">ä¸å¯å˜å¯¹è±¡</h3>

<ul>
  <li>ä¸å¯å˜å¯¹è±¡éœ€è¦æ»¡è¶³çš„æ¡ä»¶ï¼š
    <ul>
      <li>å¯¹è±¡åˆ›å»ºä»¥åçŠ¶æ€å°±ä¸èƒ½ä¿®æ”¹</li>
      <li>å¯¹è±¡æ‰€æœ‰åŸŸéƒ½æ˜¯finalç±»å‹</li>
      <li>å¯¹è±¡æ˜¯æ­£ç¡®åˆ›å»ºçš„ï¼ˆåœ¨å¯¹è±¡åˆ›å»ºæœŸé—´ï¼Œthiså¼•ç”¨æ²¡æœ‰é€¸å‡ºï¼‰</li>
    </ul>
  </li>
  <li>finalå…³é”®å­—ï¼š
    <ul>
      <li>ä¿®é¥°ç±»ï¼šä¸èƒ½è¢«ç»§æ‰¿</li>
      <li>ä¿®é¥°æ–¹æ³•ï¼šé”å®šæ–¹æ³•ä¸è¢«ç»§æ‰¿ç±»ä¿®æ”¹ï¼Œæé«˜æ•ˆç‡</li>
      <li>ä¿®é¥°å˜é‡ï¼šåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆåˆå§‹åŒ–åä¸èƒ½ä¿®æ”¹ï¼‰ï¼Œå¼•ç”¨ç±»å‹å˜é‡ï¼ˆåˆå§‹åŒ–åä¸èƒ½å†æŒ‡å‘å…¶ä»–å¯¹è±¡ï¼‰</li>
    </ul>
  </li>
  <li>Collections.unmodifiableXXXï¼šCollectionã€Listã€Setã€Map</li>
  <li>Guava:ImmutableXXXï¼šCollectionã€Listã€Setã€Map</li>
</ul>

<h3 id="çº¿ç¨‹å°é—­">çº¿ç¨‹å°é—­</h3>

<ul>
  <li>ThreadLocalçº¿ç¨‹å°é—­ï¼šè¿™æ˜¯ä¸€ç§ç‰¹åˆ«å¥½çš„å°é—­æ–¹æ³•</li>
  <li>å †æ ˆå°é—­ï¼šå±€éƒ¨å˜é‡ï¼ˆåœ¨æ–¹æ³•ä¸­å®šä¹‰å±€éƒ¨å˜é‡ï¼‰ï¼Œæ— å¹¶å‘é—®é¢˜</li>
</ul>

<h3 id="çº¿ç¨‹ä¸å®‰å…¨ç±»">çº¿ç¨‹ä¸å®‰å…¨ç±»</h3>

<ul>
  <li>StringBuilderï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼Œä½†ä½œä¸ºå±€éƒ¨å˜é‡æ—¶å®‰å…¨çš„ï¼ˆå †æ ˆå°é—­ï¼‰ï¼‰</li>
  <li>StringBufferï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œåº•å±‚æ–¹æ³•åŠ äº†synchronizedä¿®é¥°ç¬¦ï¼Œä½†æ˜¯æ•ˆç‡ä½ï¼‰</li>
  <li>SimpleDateFormatï¼ˆä½œä¸ºå…¨å±€å˜é‡æ˜¯ä¸å®‰å…¨çš„ï¼Œä½œä¸ºå±€éƒ¨å˜é‡æ—¶å®‰å…¨çš„ï¼ˆå †æ ˆå°é—­ï¼‰ï¼‰</li>
  <li>JodaTimeï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</li>
  <li>ArrayListã€HashSetã€HashMapéƒ½æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ç±»</li>
  <li>çº¿ç¨‹ä¸å®‰å…¨çš„å†™æ³•ï¼šifï¼ˆconditionï¼ˆaï¼‰ï¼‰ï½›handleï¼ˆaï¼‰ï¼›ï½</li>
</ul>

<h3 id="åŒæ­¥å®¹å™¨">åŒæ­¥å®¹å™¨</h3>

<ul>
  <li>vectorï¼ŒStackï¼ŒHashTableï¼ŒCollections.synchronizedXXXï¼ˆè¿™äº›éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼‰</li>
  <li>ä¸‹é¢æ˜¯JUCï¼ˆjava.util.concurrentåŒ…ä¸‹çš„åŒæ­¥å®¹å™¨ï¼‰</li>
  <li>ArrayList â€”&gt; CopyOnWriteArrayList</li>
  <li>HashSetã€TreeSet â€”&gt; CopyOnWriteArraySetã€ConcurrentSkipListSet</li>
  <li>HashMapã€TreeMap â€”&gt; ConcurrentHashMapã€ConcurrentSkipListMap</li>
</ul>

<h3 id="å®‰å…¨å…±äº«å¯¹è±¡ç­–ç•¥">å®‰å…¨å…±äº«å¯¹è±¡ç­–ç•¥</h3>

<ul>
  <li>çº¿ç¨‹é™åˆ¶ï¼šä¸€ä¸ªè¢«çº¿ç¨‹é™åˆ¶çš„å¯¹è±¡ï¼Œç”±çº¿ç¨‹ç‹¬å ï¼Œå¹¶ä¸”åªèƒ½è¢«å æœ‰å®ƒçš„çº¿ç¨‹ä¿®æ”¹</li>
  <li>å…±äº«åªè¯»ï¼šä¸€ä¸ªå…±äº«åªè¯»çš„å¯¹è±¡ï¼Œåœ¨æ²¡æœ‰é¢å¤–åŒæ­¥çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®ï¼Œä½†æ˜¯ä»»ä½•çº¿ç¨‹éƒ½ä¸èƒ½ä¿®æ”¹å®ƒ</li>
  <li>çº¿ç¨‹å®‰å…¨å¯¹è±¡ï¼šä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡æˆ–è€…å®¹å™¨ï¼Œåœ¨å†…éƒ¨é€šè¿‡åŒæ­¥æœºåˆ¶æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ‰€ä»¥å…¶ä»–çº¿ç¨‹æ— éœ€é¢å¤–çš„åŒæ­¥å°±å¯ä»¥é€šè¿‡å…¬å…±æ¥å£éšæ„è®¿é—®å®ƒ</li>
  <li>è¢«å®ˆæŠ¤å¯¹è±¡ï¼šè¢«å®ˆæŠ¤å¯¹è±¡åªèƒ½é€šè¿‡è·å–ç‰¹å®šçš„é”æ¥è®¿é—®</li>
</ul>

<h3 id="aqs">AQS</h3>

<ul>
  <li>AQSï¼ˆAbstractQueuedSynchronizerï¼‰ä½¿ç”¨Nodeå®ç°FIFOé˜Ÿåˆ—ï¼Œå¯ä»¥ç”¨äºæ„å»ºé”æˆ–è€…å…¶ä»–åŒæ­¥è£…ç½®çš„åŸºç¡€æ¡†æ¶</li>
  <li>åˆ©ç”¨äº†ä¸€ä¸ªintç±»å‹è¡¨ç¤ºçŠ¶æ€</li>
  <li>ä½¿ç”¨æ–¹æ³•æ˜¯ç»§æ‰¿</li>
  <li>å­ç±»é€šè¿‡ç»§æ‰¿å¹¶é€šè¿‡å®ç°å®ƒçš„æ–¹æ³•ç®¡ç†å…¶çŠ¶æ€ï½›acquireå’Œreleaseï½çš„æ–¹æ³•æ“çºµçŠ¶æ€</li>
  <li>å¯ä»¥åŒæ—¶å®ç°æ’å®ƒé”å’Œå…±äº«é”æ¨¡å¼ï¼ˆç‹¬å ã€å…±äº«ï¼‰</li>
</ul>

<h4 id="aqsåŒæ­¥ç»„ä»¶">AQSåŒæ­¥ç»„ä»¶</h4>

<ul>
  <li>CountDownLatchï¼ˆå€’è®¡æ—¶å™¨ï¼‰</li>
  <li>Semaphoreï¼ˆä¿¡å·é‡ï¼Œæ§åˆ¶å¹¶å‘è®¿é—®çš„çº¿ç¨‹ä¸ªæ•°ï¼‰</li>
  <li>CyclicBarrierï¼ˆå¾ªç¯æ …æ ï¼Œå…è®¸ä¸€ç»„çº¿ç¨‹ç›¸äº’ç­‰å¾…ï¼Œç›´åˆ°åˆ°è¾¾ä¸€ä¸ªå…¬å…±çš„å±éšœç‚¹ï¼‰</li>
  <li>ReentrantLockï¼ˆå¯é‡å…¥é”ï¼‰
    <ul>
      <li>å’ŒsynchronizedåŒºåˆ«æ˜¯ï¼šå¯é‡å…¥æ€§ã€é”çš„å®ç°ã€æ€§èƒ½åŒºåˆ«ã€åŠŸèƒ½åŒºåˆ«</li>
      <li>å¯æŒ‡å®šæ˜¯å…¬å¹³é”ï¼ˆå…ˆç­‰å¾…çš„çº¿ç¨‹å…ˆè·å–é”ï¼‰è¿˜æ˜¯éå…¬å¹³é”</li>
      <li>æä¾›äº†ä¸€ä¸ªConditionç±»ï¼Œå¯ä»¥åˆ†ç»„å”¤é†’éœ€è¦å”¤é†’çš„çº¿ç¨‹</li>
      <li>æä¾›èƒ½å¤Ÿä¸­æ–­ç­‰å¾…é”çš„çº¿ç¨‹çš„æœºåˆ¶ï¼Œlock.lockInterruptibly()</li>
    </ul>
  </li>
  <li>Condition</li>
</ul>

<h4 id="jucæ‹“å±•">JUCæ‹“å±•</h4>

<ul>
  <li>FutureTaskï¼ˆåˆ›å»ºå¤šçº¿ç¨‹ä»»åŠ¡ï¼Œå¹¶è·å–ä»»åŠ¡çš„ç»“æœã€‚ï¼‰</li>
  <li>ForkJoinæ¡†æ¶ï¼ˆç”¨äºå¹¶è¡Œæ‰§è¡Œä»»åŠ¡ï¼Œå®ƒçš„æ€æƒ³å°±æ˜¯è®²ä¸€ä¸ªå¤§ä»»åŠ¡åˆ†å‰²æˆè‹¥å¹²å°ä»»åŠ¡ï¼Œæœ€ç»ˆæ±‡æ€»æ¯ä¸ªå°ä»»åŠ¡çš„ç»“æœå¾—åˆ°è¿™ä¸ªå¤§ä»»åŠ¡çš„ç»“æœã€‚ï¼‰</li>
  <li>BlockingQueueï¼ˆé˜»å¡é˜Ÿåˆ—ï¼‰
    <ul>
      <li>å½“é˜Ÿåˆ—å·²æ»¡ï¼Œçº¿ç¨‹éœ€è¦å…¥é˜Ÿçš„æ—¶å€™ä¼šé˜»å¡</li>
      <li>å½“é˜Ÿåˆ—ä¸ºç©ºï¼Œçº¿ç¨‹éœ€è¦å‡ºé˜Ÿçš„æ—¶å€™ä¼šé˜»å¡</li>
      <li>å®ç°ç±»ï¼šArrayBlockingQueue</li>
      <li>å®ç°ç±»ï¼šDelayQueue</li>
      <li>å®ç°ç±»ï¼šLinkedBlockingQueue</li>
      <li>å®ç°ç±»ï¼šPriorityBlockingQueue</li>
      <li>å®ä¹ ç±»ï¼šSynchronousQueue</li>
    </ul>
  </li>
</ul>

<h3 id="çº¿ç¨‹æ± ">çº¿ç¨‹æ± </h3>

<ul>
  <li>ä½¿ç”¨new Threadçš„å¼Šç«¯ï¼š
    <ul>
      <li>æ¯æ¬¡new Threadæ–°å»ºå¯¹è±¡ï¼Œæ€§èƒ½å·®</li>
      <li>çº¿ç¨‹ç¼ºä¹ç»Ÿä¸€ç®¡ç†ï¼Œå¯ä»¥æ— é™åˆ¶çš„æ–°å»ºçº¿ç¨‹ï¼Œç›¸äº’ç«äº‰ï¼Œæœ‰å¯èƒ½å ç”¨è¿‡å¤šç³»ç»Ÿèµ„æºå¯¼è‡´æ­»æœºæˆ–OOM</li>
      <li>ç¼ºä¹æ›´å¤šåŠŸèƒ½ï¼Œå¦‚æ›´å¤šæ‰§è¡Œã€å®šæœŸæ‰§è¡Œã€çº¿ç¨‹ä¸­æ–­</li>
    </ul>
  </li>
  <li>çº¿ç¨‹æ± çš„å¥½å¤„ï¼š
    <ul>
      <li>é‡ç”¨å­˜åœ¨çš„çº¿ç¨‹ï¼Œå‡å°‘å¯¹è±¡åˆ›å»ºã€æ¶ˆäº¡çš„å¼€é”€ï¼Œæ€§èƒ½ä½³</li>
      <li>å¯æœ‰æ•ˆæ§åˆ¶æœ€å¤§å¹¶å‘çº¿ç¨‹æ•°ï¼Œæé«˜ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡ï¼ŒåŒæ—¶å¯ä»¥é¿å…è¿‡å¤šèµ„æºç«äº‰ï¼Œé¿å…é˜»å¡</li>
      <li>æä¾›å®šæ—¶ä»»åŠ¡ã€å®šæœŸæ‰§è¡Œã€å•çº¿ç¨‹ã€å¹¶å‘æ•°æ§åˆ¶ç­‰åŠŸèƒ½</li>
    </ul>
  </li>
</ul>

<h4 id="threadpoolexecutor">ThreadPoolExecutor</h4>

<ul>
  <li>corePoolSizeï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡</li>
  <li>maximumPoolSizeï¼šçº¿ç¨‹æœ€å¤§çº¿ç¨‹æ•°</li>
  <li>workQueueï¼šé˜»å¡é˜Ÿåˆ—ï¼Œå­˜å‚¨ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œ<strong>å¾ˆé‡è¦</strong>ï¼Œä¼šå¯¹çº¿ç¨‹æ± è¿è¡Œè¿‡ç¨‹äº§ç”Ÿé‡å¤§å½±å“</li>
  <li>keepAliveTimeï¼šçº¿ç¨‹æ²¡æœ‰ä»»åŠ¡æ‰§è¡Œæ—¶æœ€å¤šä¿æŒå¤šä¹…æ—¶é—´ç»ˆæ­¢</li>
  <li>unitï¼škeepAliveTimeçš„æ—¶é—´å•ä½</li>
  <li>threadFactoryï¼šçº¿ç¨‹å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºçº¿ç¨‹</li>
  <li>rejectHandlerï¼šå½“æ‹’ç»å¤„ç†ä»»åŠ¡æ—¶çš„ç­–ç•¥</li>
  <li>executeï¼ˆï¼‰ï¼šæäº¤ä»»åŠ¡ï¼Œäº¤ç»™çº¿ç¨‹æ± æ‰§è¡Œ</li>
  <li>submitï¼ˆï¼‰ï¼šæäº¤ä»»åŠ¡ï¼Œèƒ½å¤Ÿè¿”å›æ‰§è¡Œç»“æœ execute+Future</li>
  <li>shutdownï¼ˆï¼‰ï¼šå…³é—­çº¿ç¨‹æ± ï¼Œç­‰å¾…ä»»åŠ¡éƒ½æ‰§è¡Œå®Œ</li>
  <li>shutdownNowï¼ˆï¼‰ï¼šå…³é—­çº¿ç¨‹æ± ï¼Œä¸ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œ</li>
  <li>getTaskCountï¼ˆï¼‰ï¼šçº¿ç¨‹æ± å·²æ‰§è¡Œå’Œæœªæ‰§è¡Œçš„ä»»åŠ¡æ€»æ•°</li>
  <li>getCompletedTaskCountï¼ˆï¼‰ï¼šå·²å®Œæˆçš„ä»»åŠ¡æ•°é‡</li>
  <li>getPoolSizeï¼ˆï¼‰ï¼šçº¿ç¨‹æ± å½“å‰çš„çº¿ç¨‹æ•°é‡</li>
  <li>getActiveCountï¼ˆï¼‰ï¼šå½“å‰çº¿ç¨‹æ± ä¸­æ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹æ•°é‡</li>
</ul>

<h4 id="executoræ¡†æ¶æ¥å£">Executoræ¡†æ¶æ¥å£</h4>

<ul>
  <li>Executors.newCachedThreadPool</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.mmall.concurrency.example.threadPool</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent.ExecutorService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executors</span><span class="o">;</span>

<span class="cm">/**æµ‹è¯•newCachedThreadPool
 * @author Administrator
 */</span>
<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadPoolExample1</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newCachedThreadPool</span><span class="o">();</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kd">final</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
            <span class="n">executorService</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                    <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"task:{}"</span><span class="o">,</span> <span class="n">index</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">});</span>
        <span class="o">}</span>
        <span class="n">executorService</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>Executors.newFixedThreadPool</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.mmall.concurrency.example.threadPool</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent.ExecutorService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executors</span><span class="o">;</span>

<span class="cm">/**æµ‹è¯•newFixedThreadPool
 * @author Administrator
 */</span>
<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadPoolExample2</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kd">final</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
            <span class="n">executorService</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                    <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"task:{}"</span><span class="o">,</span> <span class="n">index</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">});</span>
        <span class="o">}</span>
        <span class="n">executorService</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>Executors.newScheduledThreadPool</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.mmall.concurrency.example.threadPool</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Timer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.TimerTask</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executors</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.ScheduledExecutorService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="cm">/**æµ‹è¯•newScheduledThreadPool
 * @author Administrator
 */</span>
<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadPoolExample4</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">ScheduledExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newScheduledThreadPool</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

<span class="c1">//        executorService.schedule(new Runnable() {</span>
<span class="c1">//            @Override</span>
<span class="c1">//            public void run() {</span>
<span class="c1">//                log.warn("schedule run");</span>
<span class="c1">//            }</span>
<span class="c1">//        }, 3, TimeUnit.SECONDS);</span>

        <span class="n">executorService</span><span class="o">.</span><span class="na">scheduleAtFixedRate</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">log</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">"schedule run"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">);</span>
<span class="c1">//        executorService.shutdown();</span>

        <span class="nc">Timer</span> <span class="n">timer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Timer</span><span class="o">();</span>
        <span class="n">timer</span><span class="o">.</span><span class="na">schedule</span><span class="o">(</span><span class="k">new</span> <span class="nc">TimerTask</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">log</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">"timer run"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">(),</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>Executors.newSingleThreadExecutor</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.mmall.concurrency.example.threadPool</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent.ExecutorService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executors</span><span class="o">;</span>

<span class="cm">/**æµ‹è¯•newSingleThreadExecutor
 * @author Administrator
 */</span>
<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadPoolExample3</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newSingleThreadExecutor</span><span class="o">();</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kd">final</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
            <span class="n">executorService</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                    <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"task:{}"</span><span class="o">,</span> <span class="n">index</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">});</span>
        <span class="o">}</span>
        <span class="n">executorService</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h4 id="æ­»é”">æ­»é”</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.mmall.concurrency.example.deadLock</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="cm">/**
 * ä¸€ä¸ªç®€å•çš„æ­»é”ç±»
 * å½“DeadLockç±»çš„å¯¹è±¡flag==1æ—¶ï¼ˆtd1ï¼‰ï¼Œå…ˆé”å®šo1,ç¡çœ 500æ¯«ç§’
 * è€Œtd1åœ¨ç¡çœ çš„æ—¶å€™å¦ä¸€ä¸ªflag==0çš„å¯¹è±¡ï¼ˆtd2ï¼‰çº¿ç¨‹å¯åŠ¨ï¼Œå…ˆé”å®šo2,ç¡çœ 500æ¯«ç§’
 * td1ç¡çœ ç»“æŸåéœ€è¦é”å®šo2æ‰èƒ½ç»§ç»­æ‰§è¡Œï¼Œè€Œæ­¤æ—¶o2å·²è¢«td2é”å®šï¼›
 * td2ç¡çœ ç»“æŸåéœ€è¦é”å®šo1æ‰èƒ½ç»§ç»­æ‰§è¡Œï¼Œè€Œæ­¤æ—¶o1å·²è¢«td1é”å®šï¼›
 * td1ã€td2ç›¸äº’ç­‰å¾…ï¼Œéƒ½éœ€è¦å¾—åˆ°å¯¹æ–¹é”å®šçš„èµ„æºæ‰èƒ½ç»§ç»­æ‰§è¡Œï¼Œä»è€Œæ­»é”ã€‚
 */</span>

<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DeadLock</span> <span class="kd">implements</span> <span class="nc">Runnable</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">flag</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
    <span class="c1">//é™æ€å¯¹è±¡æ˜¯ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«çš„</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="n">o1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">(),</span> <span class="n">o2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">();</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"flag:{}"</span><span class="o">,</span> <span class="n">flag</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">flag</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">synchronized</span> <span class="o">(</span><span class="n">o1</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="kd">synchronized</span> <span class="o">(</span><span class="n">o2</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">flag</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">synchronized</span> <span class="o">(</span><span class="n">o2</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="kd">synchronized</span> <span class="o">(</span><span class="n">o1</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">DeadLock</span> <span class="n">td1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DeadLock</span><span class="o">();</span>
        <span class="nc">DeadLock</span> <span class="n">td2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DeadLock</span><span class="o">();</span>
        <span class="n">td1</span><span class="o">.</span><span class="na">flag</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="n">td2</span><span class="o">.</span><span class="na">flag</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="c1">//td1,td2éƒ½å¤„äºå¯æ‰§è¡ŒçŠ¶æ€ï¼Œä½†JVMçº¿ç¨‹è°ƒåº¦å…ˆæ‰§è¡Œå“ªä¸ªçº¿ç¨‹æ˜¯ä¸ç¡®å®šçš„ã€‚</span>
        <span class="c1">//td2çš„run()å¯èƒ½åœ¨td1çš„run()ä¹‹å‰è¿è¡Œ</span>
        <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="n">td1</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
        <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="n">td2</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="ä»£ç å®ä¾‹">ä»£ç å®ä¾‹</h3>

<h4 id="è®¡æ•°å™¨æ¡ˆä¾‹">è®¡æ•°å™¨æ¡ˆä¾‹</h4>

<ul>
  <li>
    <p>Atomicï¼šç«äº‰æ¿€çƒˆæ—¶èƒ½ç»´æŒå¸¸æ€ï¼Œæ¯”Lockæ€§èƒ½å¥½ï¼›åªèƒ½åŒæ­¥ä¸€ä¸ªå€¼</p>
  </li>
  <li>com.mmall.concurrency.example.count.CountExample1(çº¿ç¨‹ä¸å®‰å…¨çš„ç¨‹åºè®¡æ•°ç±»)</li>
  <li>com.mmall.concurrency.example.count.CountExample2(çº¿ç¨‹å®‰å…¨çš„ç¨‹åºè®¡æ•°ç±»:AtomicInteger)</li>
  <li>com.mmall.concurrency.example.atomic.AtomicExample3(çº¿ç¨‹å®‰å…¨çš„ç¨‹åºè®¡æ•°å™¨ç±»ï¼ˆLongAdderï¼‰)</li>
  <li>com.mmall.concurrency.example.atomic.AtomicExample4(çº¿ç¨‹å®‰å…¨çš„ç±»ï¼ˆAtomicReferenceï¼‰)</li>
  <li>com.mmall.concurrency.example.atomic.AtomicExample5(çº¿ç¨‹å®‰å…¨çš„ç±»ï¼ˆAtomicIntegerFieldUpdaterï¼‰)</li>
  <li>com.mmall.concurrency.example.atomic.AtomicExample6(çº¿ç¨‹å®‰å…¨çš„ç±»ï¼ˆAtomicBooleanï¼‰)</li>
</ul>

<h4 id="synchronized">synchronized</h4>

<ul>
  <li>com.mmall.concurrency.example.sync.SynchronizedExample1(ä¿®é¥°ä»£ç å—å’Œæ–¹æ³•)</li>
  <li>com.mmall.concurrency.example.sync.SynchronizedExample2(ä¿®é¥°ç±»æˆ–é™æ€æ–¹æ³•)</li>
  <li>com.mmall.concurrency.example.count.CountExample3(ä½¿ç”¨synchronizedå®ç°è®¡æ•°å™¨)</li>
  <li>com.mmall.concurrency.example.count.CountExample4(ä½¿ç”¨volatileå®ç°è®¡æ•°å™¨)</li>
</ul>

<h4 id="å‘å¸ƒå¯¹è±¡">å‘å¸ƒå¯¹è±¡</h4>

<ul>
  <li>com.mmall.concurrency.example.publish.UnsafePublish(çº¿ç¨‹ä¸å®‰å…¨çš„å¯¹è±¡å‘å¸ƒ)</li>
  <li>com.mmall.concurrency.example.publish.Escape(å¯¹è±¡é€¸å‡º)</li>
  <li>com.mmall.concurrency.example.singleton.SingletonExample1(æ‡’æ±‰æ¨¡å¼-çº¿ç¨‹ä¸å®‰å…¨)</li>
  <li>com.mmall.concurrency.example.singleton.SingletonExample2(é¥¿æ±‰æ¨¡å¼-çº¿ç¨‹å®‰å…¨)</li>
  <li>com.mmall.concurrency.example.singleton.SingletonExample3(çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰æ¨¡å¼)</li>
  <li>com.mmall.concurrency.example.singleton.SingletonExample4(åŒé‡åŒæ­¥é”å•ä¾‹æ¨¡å¼)</li>
  <li>com.mmall.concurrency.example.singleton.SingletonExample5(åŒé‡åŒæ­¥é”å•ä¾‹æ¨¡å¼-volatile)</li>
  <li>com.mmall.concurrency.example.singleton.SingletonExample6(é¥¿æ±‰æ¨¡å¼-é™æ€ä»£ç å—)</li>
  <li>com.mmall.concurrency.example.singleton.SingletonExample7(æšä¸¾æ¨¡å¼ï¼šæœ€å®‰å…¨)</li>
</ul>

<h4 id="ä¸å¯å˜å¯¹è±¡-1">ä¸å¯å˜å¯¹è±¡</h4>

<ul>
  <li>com.mmall.concurrency.example.immutable.ImmutableExample1(æµ‹è¯•final)</li>
  <li>com.mmall.concurrency.example.immutable.ImmutableExample2(æµ‹è¯•Collections)</li>
  <li>com.mmall.concurrency.example.immutable.ImmutableExample3(æµ‹è¯•Immutable)</li>
</ul>

<h4 id="çº¿ç¨‹å°é—­-1">çº¿ç¨‹å°é—­</h4>

<ul>
  <li>com.mmall.concurrency.example.threadLocal.RequestHolder(è¯·æ±‚æŒæœ‰çš„çº¿ç¨‹:å°è£…ThreadLocal)</li>
  <li>com.mmall.concurrency.HttpFilter(è¯·æ±‚è¿‡æ»¤å™¨ï¼Œå¾€ThreadLocalä¸­æ·»åŠ å†…å®¹)</li>
  <li>com.mmall.concurrency.HttpInterceptor(è¯·æ±‚æ‹¦æˆªå™¨ï¼Œåœ¨è¯·æ±‚ç»“æŸåæ¸…ç©ºThreadLocal)</li>
</ul>

<p><a href="https://baiweijieku.github.io/2019/04/14/RBAC%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/#%E7%94%A8%E6%88%B7%E5%92%8C%E8%AF%B7%E6%B1%82%E7%BA%BF%E7%A8%8B%E5%B7%A5%E5%85%B7%E7%B1%BB">å…·ä½“ä½¿ç”¨å·¥å…·</a></p>

<h4 id="çº¿ç¨‹ä¸å®‰å…¨ç±»-1">çº¿ç¨‹ä¸å®‰å…¨ç±»</h4>

<ul>
  <li>com.mmall.concurrency.example.commonUnsafe.StringExample1(æµ‹è¯•StringBuilder,çº¿ç¨‹ä¸å®‰å…¨)</li>
  <li>com.mmall.concurrency.example.commonUnsafe.StringExample2(æµ‹è¯•StringBuffer,çº¿ç¨‹å®‰å…¨)</li>
  <li>com.mmall.concurrency.example.commonUnsafe.DateFormatExample1(æµ‹è¯•SimpleDateFormat,çº¿ç¨‹ä¸å®‰å…¨)</li>
  <li>com.mmall.concurrency.example.commonUnsafe.DateFormatExample2(æµ‹è¯•SimpleDateFormatä½œä¸ºå±€éƒ¨å˜é‡,çº¿ç¨‹å®‰å…¨)</li>
  <li>com.mmall.concurrency.example.commonUnsafe.DateFormatExample3(æµ‹è¯•JodaTime,çº¿ç¨‹å®‰å…¨)</li>
  <li>com.mmall.concurrency.example.commonUnsafe.ArrayListExampleï¼ˆArrayListçº¿ç¨‹ä¸å®‰å…¨ï¼‰</li>
  <li>com.mmall.concurrency.example.commonUnsafe.HashSetExampleï¼ˆHashSetçº¿ç¨‹ä¸å®‰å…¨ï¼‰</li>
  <li>com.mmall.concurrency.example.commonUnsafe.HashMapExampleï¼ˆHashMapçº¿ç¨‹ä¸å®‰å…¨ï¼‰</li>
</ul>

<h4 id="åŒæ­¥å®¹å™¨-1">åŒæ­¥å®¹å™¨</h4>

<ul>
  <li>com.mmall.concurrency.example.syncContainer.VectorExample1ï¼ˆVectorçº¿ç¨‹å®‰å…¨ï¼‰</li>
  <li>com.mmall.concurrency.example.syncContainer.VectorExample2ï¼ˆVectorçº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µï¼‰</li>
  <li>com.mmall.concurrency.example.syncContainer.VectorExample3ï¼ˆVectorå¹¶å‘ä¿®æ”¹å¼‚å¸¸ï¼‰</li>
  <li>com.mmall.concurrency.example.syncContainer.HashTableExampleï¼ˆHashTableçº¿ç¨‹å®‰å…¨ï¼‰</li>
  <li>com.mmall.concurrency.example.syncContainer.CollectionsExample1ï¼ˆä½¿ç”¨Collectionsåˆ›å»ºçº¿ç¨‹å®‰å…¨çš„listï¼‰</li>
  <li>com.mmall.concurrency.example.syncContainer.CollectionsExample2ï¼ˆä½¿ç”¨Collectionsåˆ›å»ºçº¿ç¨‹å®‰å…¨çš„Setï¼‰</li>
  <li>com.mmall.concurrency.example.syncContainer.CollectionsExample3ï¼ˆä½¿ç”¨Collectionsåˆ›å»ºçº¿ç¨‹å®‰å…¨çš„Mapï¼‰</li>
  <li>com.mmall.concurrency.example.concurrent.CopyOnWriteArrayListExampleï¼ˆJUCï¼‰</li>
  <li>com.mmall.concurrency.example.concurrent.CopyOnWriteArraySetExampleï¼ˆJUCï¼‰</li>
  <li>com.mmall.concurrency.example.concurrent.ConcurrentSkipListSetExampleï¼ˆJUCï¼‰</li>
  <li>com.mmall.concurrency.example.concurrent.ConcurrentHashMapExampleï¼ˆJUCï¼‰</li>
  <li>com.mmall.concurrency.example.concurrent.ConcurrentSkipListMapExampleï¼ˆJUCï¼‰</li>
</ul>

<h4 id="aqs-1">AQS</h4>

<ul>
  <li>com.mmall.concurrency.example.aqs.CountDownLatchExample1ï¼ˆæµ‹è¯•CountDownLatchï¼‰</li>
  <li>com.mmall.concurrency.example.aqs.CountDownLatchExample2ï¼ˆæµ‹è¯•CountDownLatchç­‰å¾…è¶…æ—¶ï¼‰</li>
  <li>com.mmall.concurrency.example.aqs.SemaphoreExample1ï¼ˆæµ‹è¯•Semaphoreå•è®¸å¯ï¼‰</li>
  <li>com.mmall.concurrency.example.aqs.SemaphoreExample2ï¼ˆæµ‹è¯•Semaphoreå¤šè®¸å¯ï¼‰</li>
  <li>com.mmall.concurrency.example.aqs.SemaphoreExample3ï¼ˆæµ‹è¯•Semaphoreå°è¯•è·å–è®¸å¯ï¼‰</li>
  <li>com.mmall.concurrency.example.aqs.SemaphoreExample4ï¼ˆæµ‹è¯•Semaphoreåœ¨è¶…æ—¶æ—¶é—´å†…è·å–è®¸å¯ï¼‰</li>
  <li>com.mmall.concurrency.example.aqs.CyclicBarrierExample1ï¼ˆæµ‹è¯•CyclicBarrierï¼‰</li>
  <li>com.mmall.concurrency.example.aqs.CyclicBarrierExample2ï¼ˆæµ‹è¯•CyclicBarrierç­‰å¾…æ—¶é—´ï¼‰</li>
  <li>com.mmall.concurrency.example.aqs.CyclicBarrierExample3ï¼ˆæµ‹è¯•CyclicBarrierç»“åˆrunnableï¼‰</li>
  <li>com.mmall.concurrency.example.lock.LockExample2ï¼ˆæµ‹è¯•ReentrantLockï¼‰</li>
  <li>com.mmall.concurrency.example.lock.LockExample3ï¼ˆæµ‹è¯•ReentrantReadWriteLockï¼‰</li>
  <li>com.mmall.concurrency.example.lock.LockExample4ï¼ˆæµ‹è¯•StampedLockï¼‰</li>
  <li>com.mmall.concurrency.example.lock.LockExample5ï¼ˆæµ‹è¯•StampedLockï¼‰</li>
  <li>com.mmall.concurrency.example.lock.LockExample6ï¼ˆæµ‹è¯•Conditionï¼‰</li>
  <li>com.mmall.concurrency.example.aqs.FutureExampleï¼ˆæµ‹è¯•Futureï¼‰</li>
  <li>com.mmall.concurrency.example.aqs.FutureTaskExampleï¼ˆæµ‹è¯•FutureTaskï¼‰</li>
  <li>com.mmall.concurrency.example.aqs.ForkJoinTaskExampleï¼ˆæµ‹è¯•ForkJoinæ¡†æ¶ï¼‰</li>
</ul>

<h3 id="é«˜å¹¶å‘ä¹‹ç¼“å­˜">é«˜å¹¶å‘ä¹‹ç¼“å­˜</h3>

<ul>
  <li>ç¼“å­˜ä¸€è‡´æ€§ï¼š
    <ul>
      <li>æ›´æ–°æ•°æ®åº“æˆåŠŸ â€”&gt; æ›´æ–°ç¼“å­˜å¤±è´¥ â€”&gt; æ•°æ®ä¸ä¸€è‡´</li>
      <li>æ›´æ–°ç¼“å­˜æˆåŠŸ â€”&gt; æ›´æ–°æ•°æ®åº“å¤±è´¥ â€”&gt; æ•°æ®ä¸ä¸€è‡´</li>
      <li>æ›´æ–°æ•°æ®åº“æˆåŠŸ â€”&gt; æ·˜æ±°ç¼“å­˜å¤±è´¥ â€”&gt; æ•°æ®ä¸ä¸€è‡´</li>
      <li>æ·˜æ±°ç¼“å­˜æˆåŠŸ â€”&gt; æ›´æ–°æ•°æ®åº“å¤±è´¥ â€”&gt; æŸ¥è¯¢ç¼“å­˜Miss</li>
    </ul>
  </li>
  <li>ç¼“å­˜å·¥å…·
    <ul>
      <li>GuavaCache</li>
      <li>Redis</li>
    </ul>
  </li>
</ul>

<h4 id="guavacache">GuavaCache</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.mmall.concurrency.example.cache</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.google.common.cache.CacheBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.cache.CacheLoader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.cache.LoadingCache</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="cm">/**æµ‹è¯•GuavaCache
 * @author Administrator
 */</span>
<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuavaCacheExample1</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">LoadingCache</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">cache</span> <span class="o">=</span> <span class="nc">CacheBuilder</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">maximumSize</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span> <span class="c1">// æœ€å¤šå­˜æ”¾10ä¸ªæ•°æ®</span>
                <span class="o">.</span><span class="na">expireAfterWrite</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">)</span> <span class="c1">// ç¼“å­˜10ç§’</span>
                <span class="o">.</span><span class="na">recordStats</span><span class="o">()</span> <span class="c1">// å¼€å¯è®°å½•çŠ¶æ€æ•°æ®åŠŸèƒ½</span>
                <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="k">new</span> <span class="nc">CacheLoader</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;()</span> <span class="o">{</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="nc">Integer</span> <span class="nf">load</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
                        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">});</span>

        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="s">"key1"</span><span class="o">));</span> <span class="c1">// null</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"key1"</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="s">"key1"</span><span class="o">));</span> <span class="c1">// 1</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">invalidate</span><span class="o">(</span><span class="s">"key1"</span><span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="s">"key1"</span><span class="o">));</span> <span class="c1">// null</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"key2"</span><span class="o">));</span> <span class="c1">// -1</span>
            <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"key2"</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"key2"</span><span class="o">));</span> <span class="c1">// 2</span>

            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">size</span><span class="o">());</span> <span class="c1">// 1</span>

            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">13</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"key"</span> <span class="o">+</span> <span class="n">i</span><span class="o">,</span> <span class="n">i</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">size</span><span class="o">());</span> <span class="c1">// 10</span>

            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="s">"key2"</span><span class="o">));</span> <span class="c1">// null</span>

            <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">11000</span><span class="o">);</span>

            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"key5"</span><span class="o">));</span> <span class="c1">// -1</span>

            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{},{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">stats</span><span class="o">().</span><span class="na">hitCount</span><span class="o">(),</span> <span class="n">cache</span><span class="o">.</span><span class="na">stats</span><span class="o">().</span><span class="na">missCount</span><span class="o">());</span>

            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{},{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">stats</span><span class="o">().</span><span class="na">hitRate</span><span class="o">(),</span> <span class="n">cache</span><span class="o">.</span><span class="na">stats</span><span class="o">().</span><span class="na">missRate</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"cache exception"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.mmall.concurrency.example.cache</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.google.common.cache.Cache</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.cache.CacheBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent.Callable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="cm">/**æµ‹è¯•GuavaCache
 * @author Administrator
 */</span>
<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuavaCacheExample2</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">Cache</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">cache</span> <span class="o">=</span> <span class="nc">CacheBuilder</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">maximumSize</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span> <span class="c1">// æœ€å¤šå­˜æ”¾10ä¸ªæ•°æ®</span>
                <span class="o">.</span><span class="na">expireAfterWrite</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">)</span> <span class="c1">// ç¼“å­˜10ç§’</span>
                <span class="o">.</span><span class="na">recordStats</span><span class="o">()</span> <span class="c1">// å¼€å¯è®°å½•çŠ¶æ€æ•°æ®åŠŸèƒ½</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>

        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="s">"key1"</span><span class="o">));</span> <span class="c1">// null</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"key1"</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="s">"key1"</span><span class="o">));</span> <span class="c1">// 1</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">invalidate</span><span class="o">(</span><span class="s">"key1"</span><span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="s">"key1"</span><span class="o">));</span> <span class="c1">// null</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"key2"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Callable</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="nc">Integer</span> <span class="nf">call</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}));</span> <span class="c1">// -1</span>
            <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"key2"</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"key2"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Callable</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="nc">Integer</span> <span class="nf">call</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}));</span> <span class="c1">// 2</span>

            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">size</span><span class="o">());</span> <span class="c1">// 1</span>

            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">13</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"key"</span> <span class="o">+</span> <span class="n">i</span><span class="o">,</span> <span class="n">i</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">size</span><span class="o">());</span> <span class="c1">// 10</span>

            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="s">"key2"</span><span class="o">));</span> <span class="c1">// null</span>

            <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">11000</span><span class="o">);</span>

            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"key5"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Callable</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="nc">Integer</span> <span class="nf">call</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}));</span> <span class="c1">// -1</span>

            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{},{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">stats</span><span class="o">().</span><span class="na">hitCount</span><span class="o">(),</span> <span class="n">cache</span><span class="o">.</span><span class="na">stats</span><span class="o">().</span><span class="na">missCount</span><span class="o">());</span>

            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{},{}"</span><span class="o">,</span> <span class="n">cache</span><span class="o">.</span><span class="na">stats</span><span class="o">().</span><span class="na">hitRate</span><span class="o">(),</span> <span class="n">cache</span><span class="o">.</span><span class="na">stats</span><span class="o">().</span><span class="na">missRate</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"cache exception"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h4 id="redis">Redis</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.mmall.concurrency.example.cache</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Value</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">redis.clients.jedis.JedisPool</span><span class="o">;</span>

<span class="cm">/**
 * Redisé…ç½®ç±»
 */</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RedisConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"redisPool"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">JedisPool</span> <span class="nf">jedisPool</span><span class="o">(</span><span class="nd">@Value</span><span class="o">(</span><span class="s">"${jedis.host}"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">host</span><span class="o">,</span>
                               <span class="nd">@Value</span><span class="o">(</span><span class="s">"${jedis.port}"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">port</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">JedisPool</span><span class="o">(</span><span class="n">host</span><span class="o">,</span> <span class="n">port</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.mmall.concurrency.example.cache</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">redis.clients.jedis.Jedis</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">redis.clients.jedis.JedisPool</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.annotation.Resource</span><span class="o">;</span>

<span class="cm">/**RedisæœåŠ¡å™¨
 * http://redis.cn/
 * @author Administrator
 */</span>
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RedisClient</span> <span class="o">{</span>

    <span class="nd">@Resource</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"redisPool"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">JedisPool</span> <span class="n">jedisPool</span><span class="o">;</span>

    <span class="cm">/**å­˜å‚¨
     * @param key é”®
     * @param value å€¼
     * @throws Exception
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">set</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="nc">String</span> <span class="n">value</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Jedis</span> <span class="n">jedis</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">jedis</span> <span class="o">=</span> <span class="n">jedisPool</span><span class="o">.</span><span class="na">getResource</span><span class="o">();</span>
            <span class="n">jedis</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">jedis</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">jedis</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>


    <span class="cm">/**è·å–
     * @param key é”®
     * @return é”®å¯¹åº”çš„å€¼
     * @throws Exception
     */</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">get</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Jedis</span> <span class="n">jedis</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">jedis</span> <span class="o">=</span> <span class="n">jedisPool</span><span class="o">.</span><span class="na">getResource</span><span class="o">();</span>
            <span class="k">return</span> <span class="n">jedis</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">jedis</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">jedis</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="é«˜å¹¶å‘ä¹‹æ¶ˆæ¯é˜Ÿåˆ—">é«˜å¹¶å‘ä¹‹æ¶ˆæ¯é˜Ÿåˆ—</h3>

<ul>
  <li>ç‰¹æ€§ï¼š
    <ul>
      <li>ä¸šåŠ¡æ— å…³ï¼šåªåšæ¶ˆæ¯åˆ†å‘</li>
      <li>FIFOï¼šå…ˆæŠ•é€’å…ˆåˆ°è¾¾</li>
      <li>å®¹ç¾ï¼šèŠ‚ç‚¹çš„åŠ¨æ€å¢åˆ å’Œæ¶ˆæ¯çš„æŒä¹…åŒ–</li>
      <li>æ€§èƒ½ï¼šååé‡æå‡ï¼Œç³»ç»Ÿå†…éƒ¨é€šä¿¡æ•ˆç‡æé«˜</li>
    </ul>
  </li>
  <li>ä¸¾ä¾‹ï¼š
    <ul>
      <li>Kafka</li>
      <li>RabbitMQ</li>
    </ul>
  </li>
</ul>
:ET