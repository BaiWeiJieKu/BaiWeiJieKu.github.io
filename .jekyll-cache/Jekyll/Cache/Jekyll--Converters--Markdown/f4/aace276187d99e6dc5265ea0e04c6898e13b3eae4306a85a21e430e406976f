I"¡;<ul id="markdown-toc">
  <li><a href="#æ ¸å¿ƒå†…å®¹" id="markdown-toc-æ ¸å¿ƒå†…å®¹">æ ¸å¿ƒå†…å®¹</a></li>
  <li><a href="#å·¥ä½œæµç¨‹" id="markdown-toc-å·¥ä½œæµç¨‹">å·¥ä½œæµç¨‹</a></li>
  <li><a href="#æ¨¡æ‹Ÿæ€æ¯’" id="markdown-toc-æ¨¡æ‹Ÿæ€æ¯’">æ¨¡æ‹Ÿæ€æ¯’</a>    <ul>
      <li><a href="#æŠ½è±¡ç»„ä»¶" id="markdown-toc-æŠ½è±¡ç»„ä»¶">æŠ½è±¡ç»„ä»¶</a></li>
      <li><a href="#æŠ½è±¡æ„å»º" id="markdown-toc-æŠ½è±¡æ„å»º">æŠ½è±¡æ„å»º</a></li>
      <li><a href="#æµ‹è¯•" id="markdown-toc-æµ‹è¯•">æµ‹è¯•</a></li>
      <li><a href="#åŸç†" id="markdown-toc-åŸç†">åŸç†</a></li>
    </ul>
  </li>
  <li><a href="#åº”ç”¨åœºæ™¯" id="markdown-toc-åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</a></li>
</ul>
<h3 id="æ ¸å¿ƒå†…å®¹">æ ¸å¿ƒå†…å®¹</h3>

<ul>
  <li>æŠ½è±¡æ„ä»¶(Component)è§’è‰²: å®šä¹‰äº†å¶å­å’Œå®¹å™¨æ„ä»¶çš„å…±åŒç‚¹</li>
  <li>å¶å­(Leaf)æ„ä»¶è§’è‰²ï¼šæ— å­èŠ‚ç‚¹</li>
  <li>å®¹å™¨(Composite)æ„ä»¶è§’è‰²ï¼š æœ‰å®¹å™¨ç‰¹å¾ï¼Œå¯ä»¥åŒ…å«å­èŠ‚ç‚¹</li>
</ul>

<h3 id="å·¥ä½œæµç¨‹">å·¥ä½œæµç¨‹</h3>

<ul>
  <li>ç»„åˆæ¨¡å¼ä¸ºå¤„ç†æ ‘å½¢ç»“æ„æä¾›äº†å®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œæè¿°äº†å¦‚ä½•å°†å®¹å™¨å’Œå¶å­è¿›è¡Œé€’å½’ç»„åˆï¼Œä½¿å¾—ç”¨æˆ·åœ¨ä½¿ç”¨æ—¶å¯ä»¥ä¸€è‡´æ€§çš„å¯¹å¾…å®¹å™¨å’Œå¶å­</li>
  <li>å½“å®¹å™¨å¯¹è±¡çš„æŒ‡å®šæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå°†éå†æ•´ä¸ªæ ‘å½¢ç»“æ„ï¼Œå¯»æ‰¾ä¹ŸåŒ…å«è¿™ä¸ªæ–¹æ³•çš„æˆå‘˜ï¼Œå¹¶è°ƒç”¨æ‰§è¡Œã€‚å…¶ä¸­ï¼Œä½¿ç”¨äº†é€’å½’è°ƒç”¨çš„æœºåˆ¶å¯¹æ•´ä¸ªç»“æ„è¿›è¡Œå¤„ç†</li>
</ul>

<h3 id="æ¨¡æ‹Ÿæ€æ¯’">æ¨¡æ‹Ÿæ€æ¯’</h3>

<h4 id="æŠ½è±¡ç»„ä»¶">æŠ½è±¡ç»„ä»¶</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.composite</span><span class="o">;</span>

<span class="cm">/**
 * æŠ½è±¡ç»„ä»¶
 * @author Administrator
 *
 */</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Component</span> <span class="o">{</span>
	<span class="kt">void</span> <span class="nf">operation</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">//å¶å­ç»„ä»¶</span>
<span class="kd">interface</span> <span class="nc">Leaf</span> <span class="kd">extends</span> <span class="nc">Component</span> <span class="o">{</span>
<span class="o">}</span>
<span class="c1">//å®¹å™¨ç»„ä»¶</span>
<span class="kd">interface</span> <span class="nc">Composite</span> <span class="kd">extends</span> <span class="nc">Component</span> <span class="o">{</span>
	<span class="cm">/**
	 * æ·»åŠ æ–¹æ³•
	 * @param c
	 */</span>
	<span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="nc">Component</span> <span class="n">c</span><span class="o">);</span>
	<span class="cm">/**
	 * åˆ é™¤æ–¹æ³•
	 * @param c
	 */</span>
	<span class="kt">void</span> <span class="nf">remove</span><span class="o">(</span><span class="nc">Component</span> <span class="n">c</span><span class="o">);</span>
	<span class="cm">/**
	 * è·å–å­èŠ‚ç‚¹æ–¹æ³•
	 * @param index
	 * @return
	 */</span>
	<span class="nc">Component</span> <span class="nf">getChild</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="æŠ½è±¡æ„å»º">æŠ½è±¡æ„å»º</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.composite</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="c1">//æŠ½è±¡æ„å»º</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AbstractFile</span> <span class="o">{</span>
	<span class="kt">void</span> <span class="nf">killVirus</span><span class="o">();</span>  <span class="c1">//æ€æ¯’</span>
<span class="o">}</span>

<span class="cm">/**
 *ç…§ç‰‡æ–‡ä»¶ç±» 
 * @author Administrator
 *
 */</span>
<span class="kd">class</span> <span class="nc">ImageFile</span> <span class="kd">implements</span> <span class="nc">AbstractFile</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	
	<span class="kd">public</span> <span class="nf">ImageFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">killVirus</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"---å›¾åƒæ–‡ä»¶ï¼š"</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s">",è¿›è¡ŒæŸ¥æ€ï¼"</span><span class="o">);</span>
	<span class="o">}</span>
	
<span class="o">}</span>
<span class="cm">/**
 * æ–‡æœ¬æ–‡ä»¶
 * @author Administrator
 *
 */</span>
<span class="kd">class</span> <span class="nc">TextFile</span> <span class="kd">implements</span> <span class="nc">AbstractFile</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	
	<span class="kd">public</span> <span class="nf">TextFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">killVirus</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"---æ–‡æœ¬æ–‡ä»¶ï¼š"</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s">",è¿›è¡ŒæŸ¥æ€ï¼"</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
<span class="cm">/**
 * è§†é¢‘æ–‡ä»¶ç±»
 * @author Administrator
 *
 */</span>
<span class="kd">class</span> <span class="nc">VideoFile</span> <span class="kd">implements</span> <span class="nc">AbstractFile</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	
	<span class="kd">public</span> <span class="nf">VideoFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">killVirus</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"---è§†é¢‘æ–‡ä»¶ï¼š"</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s">",è¿›è¡ŒæŸ¥æ€ï¼"</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
<span class="cm">/**
 * æ–‡ä»¶å¤¹ç±»
 * @author Administrator
 *
 */</span>
<span class="kd">class</span> <span class="nc">Folder</span> <span class="kd">implements</span> <span class="nc">AbstractFile</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="c1">//å®šä¹‰å®¹å™¨ï¼Œç”¨æ¥å­˜æ”¾æœ¬å®¹å™¨æ„å»ºä¸‹çš„å­èŠ‚ç‚¹</span>
	<span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">AbstractFile</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">AbstractFile</span><span class="o">&gt;();</span>
	
	<span class="kd">public</span> <span class="nf">Folder</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="nc">AbstractFile</span> <span class="n">file</span><span class="o">){</span>
		<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">(</span><span class="nc">AbstractFile</span> <span class="n">file</span><span class="o">){</span>
		<span class="n">list</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nc">AbstractFile</span> <span class="nf">getChild</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">){</span>
		<span class="k">return</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">killVirus</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"---æ–‡ä»¶å¤¹ï¼š"</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s">",è¿›è¡ŒæŸ¥æ€"</span><span class="o">);</span>
		
		<span class="k">for</span> <span class="o">(</span><span class="nc">AbstractFile</span> <span class="n">file</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">file</span><span class="o">.</span><span class="na">killVirus</span><span class="o">();</span>
		<span class="o">}</span>
		
	<span class="o">}</span>
	
<span class="o">}</span>


</code></pre></div></div>

<h4 id="æµ‹è¯•">æµ‹è¯•</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.bjsxt.composite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">AbstractFile</span> <span class="n">f2</span><span class="o">,</span><span class="n">f3</span><span class="o">,</span><span class="n">f4</span><span class="o">,</span><span class="n">f5</span><span class="o">;</span>
		<span class="nc">Folder</span> <span class="n">f1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Folder</span><span class="o">(</span><span class="s">"æˆ‘çš„æ”¶è—"</span><span class="o">);</span>
		
		<span class="n">f2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ImageFile</span><span class="o">(</span><span class="s">"è€é«˜çš„å¤§å¤´åƒ.jpg"</span><span class="o">);</span>
		<span class="n">f3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TextFile</span><span class="o">(</span><span class="s">"Hello.txt"</span><span class="o">);</span>
		<span class="n">f1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">f2</span><span class="o">);</span>
		<span class="n">f1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">f3</span><span class="o">);</span>
		
		<span class="nc">Folder</span> <span class="n">f11</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Folder</span><span class="o">(</span><span class="s">"ç”µå½±"</span><span class="o">);</span>
		<span class="n">f4</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">VideoFile</span><span class="o">(</span><span class="s">"ç¬‘å‚²æ±Ÿæ¹–.avi"</span><span class="o">);</span>
		<span class="n">f5</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">VideoFile</span><span class="o">(</span><span class="s">"ç¥é›•ä¾ ä¾£.avi"</span><span class="o">);</span>
		<span class="n">f11</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">f4</span><span class="o">);</span>
		<span class="n">f11</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">f5</span><span class="o">);</span>
		<span class="n">f1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">f11</span><span class="o">);</span>
		
		
<span class="c1">//		f2.killVirus();</span>
		
		<span class="n">f1</span><span class="o">.</span><span class="na">killVirus</span><span class="o">();</span>
		
		
	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h4 id="åŸç†">åŸç†</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>å›¾åƒæ–‡ä»¶ï¼Œæ–‡æœ¬æ–‡ä»¶ï¼Œè§†é¢‘æ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹---&gt;å®ç°æ€æ¯’æ¥å£ï¼ˆæœ‰ä¸€ä¸ªæ€æ¯’æ–¹æ³•ï¼‰
</code></pre></div></div>

<h3 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h3>

<ul>
  <li>â€“æ“ä½œç³»ç»Ÿçš„èµ„æºç®¡ç†å™¨</li>
  <li>â€“GUIä¸­çš„å®¹å™¨å±‚æ¬¡å›¾</li>
  <li>â€“XMLæ–‡ä»¶è§£æ</li>
  <li>â€“OAç³»ç»Ÿä¸­ï¼Œç»„ç»‡ç»“æ„çš„å¤„ç†</li>
  <li>â€“Junitå•å…ƒæµ‹è¯•æ¡†æ¶ï¼ˆâ€¢åº•å±‚è®¾è®¡å°±æ˜¯å…¸å‹çš„ç»„åˆæ¨¡å¼ï¼ŒTestCase(å¶å­)ã€TestUnite(å®¹å™¨)ã€Testæ¥å£(æŠ½è±¡)ï¼‰</li>
</ul>
:ET